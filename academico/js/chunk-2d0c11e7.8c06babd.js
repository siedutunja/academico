(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c11e7"],{"454d":function(e,o,t){"use strict";t.r(o);var a=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("b-row",{staticClass:"mt-2"},[t("b-col",{attrs:{lg:"12"}},[t("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[t("h5",{staticClass:"mb-0"},[t("b-icon",{attrs:{icon:"person-square","aria-hidden":"true"}}),e._v(" DOCENTES DE LA INSTITUCIÓN EDUCATIVA")],1)]},proxy:!0},{key:"footer",fn:function(){return[t("em",[e._v("Consulte o actualice los datos de un docente haciendo clic en la lupa.")])]},proxy:!0}])},[t("b-card-text",[t("b-row",[t("b-col",{attrs:{lg:"12"}},[t("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:e._u([{key:"header",fn:function(){return[1==e.$store.state.idRol||12==e.$store.state.idRol||1==e.$store.state.perActDocente?t("b-button",{staticClass:"small float-right",attrs:{variant:"dark"},on:{click:e.nuevoDocente}},[e._v("Nuevo Docente")]):e._e(),t("h5",{staticClass:"mb-0"},[t("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" Lista de Docentes")],1)]},proxy:!0}])},[t("b-card-text",[t("vue-good-table",{attrs:{columns:e.encabColumnas,rows:e.listaDocentes,styleClass:"vgt-table condensed bordered striped","line-numbers":!0,"search-options":{enabled:!0,placeholder:"Buscar docente..."}},scopedSlots:e._u([{key:"table-row",fn:function(o){return["id"==o.column.field?t("span",[t("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},attrs:{title:"Consultar/Actualizar Datos del Docente"},on:{click:function(t){return e.seleccionarDocente(o.row)}}},[t("CIcon",{attrs:{name:"cilZoom"}})],1)]):e._e()]}}])},[t("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[t("h5",{staticClass:"text-danger ml-5"},[e._v("No existen Docentes creados")])])]),t("b-row",[t("b-col",{staticClass:"mt-5",attrs:{lg:"12"}},[t("vue-excel-xlsx",{staticClass:"small mx-1 mt-2 btn btn-outline-primary",attrs:{data:e.listaDocentes,columns:e.encabColumnas,"file-name":"Docentes- "+(new Date).toLocaleDateString(),"file-type":"xlsx","sheet-name":"Docentes "+e.$store.state.aLectivo}},[e._v(" Exportar Directorio a Excel ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),t("b-modal",{ref:"modalCrearEditarDocente",attrs:{size:"xl",scrollable:"","hide-footer":"",title:e.datosDocente.editarDocente?"Editar Datos del Docente":"Nuevo Docente","ok-only":""}},[t("div",{staticClass:"mx-3"},[t("div",[t("FichaDocente",{attrs:{datosDocente:e.datosDocente},on:{retorno:e.datosRecibidosDocente}})],1)])])],1)},n=[],r=t("1da1"),s=(t("96cf"),t("bc3a")),i=t.n(s),d=t("9c40"),l=(t("dac4"),t("f617")),c=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("b-row",{staticClass:"mt-2"},[t("b-col",{attrs:{lg:"12"}},[t("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[t("h5",{staticClass:"mb-0"},[t("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" DATOS DEL DOCENTE")],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"float-right text-medium-emphasis text-info"},[e._v("* Campo requerido")]),e.documentoValido?t("div",[1==e.$store.state.idRol||12==e.$store.state.idRol||1==e.$store.state.perActDocente?t("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"primary"},on:{click:e.validarDatosFormulario}},[e.datosPersona.editarDocente?t("div",[e._v("Actualizar Datos del Docente")]):t("div",[e._v("Crear Docente")])]):e._e(),!e.datosPersona.editarDocente||1!=e.$store.state.idRol&&12!=e.$store.state.idRol?e._e():t("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"danger"},on:{click:e.validarRetiroDocente}},[e._v("Desvincular Docente")]),t("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"secondary"},on:{click:e.cancelarFormulario}},[e._v("Cancelar")])],1):t("div",[t("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"primary"},on:{click:e.validarDocumento}},[e._v("Validar Documento")]),t("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"secondary"},on:{click:e.cancelarFormulario}},[e._v("Cancelar")])],1)]},proxy:!0}])},[t("b-card-text",[e.documentoValido?t("b-row",[t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Primer Apellido*","label-for":"ape1"}},[t("b-form-input",{ref:"ape1",attrs:{id:"ape1",state:e.validateStateD("apellido1"),"aria-describedby":"feedApe1",autocomplete:"off",maxlength:"30",disabled:!e.habilitarCampo},on:{keydown:e.soloLetras},model:{value:e.$v.datosPersona.apellido1.$model,callback:function(o){e.$set(e.$v.datosPersona.apellido1,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.apellido1.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedApe1"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Segundo Apellido","label-for":"ape2"}},[t("b-form-input",{ref:"ape2",attrs:{id:"ape2",state:e.validateStateD("apellido2"),"aria-describedby":"feedApe2",autocomplete:"off",maxlength:"30",disabled:!e.habilitarCampo},on:{keydown:e.soloLetras},model:{value:e.$v.datosPersona.apellido2.$model,callback:function(o){e.$set(e.$v.datosPersona.apellido2,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.apellido2.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedApe2"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Primer Nombre*","label-for":"nom1"}},[t("b-form-input",{ref:"nom1",attrs:{id:"nom1",state:e.validateStateD("nombre1"),"aria-describedby":"feedNom1",autocomplete:"off",maxlength:"30",disabled:!e.habilitarCampo},on:{keydown:e.soloLetras},model:{value:e.$v.datosPersona.nombre1.$model,callback:function(o){e.$set(e.$v.datosPersona.nombre1,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.nombre1.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedNom1"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Segundo Nombre","label-for":"nom2"}},[t("b-form-input",{ref:"nom2",attrs:{id:"nom2",state:e.validateStateD("nombre2"),"aria-describedby":"feedNom2",autocomplete:"off",maxlength:"30",disabled:!e.habilitarCampo},on:{keydown:e.soloLetras},model:{value:e.$v.datosPersona.nombre2.$model,callback:function(o){e.$set(e.$v.datosPersona.nombre2,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.nombre2.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedNom2"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Número de Documento*","label-for":"doc"}},[t("b-form-input",{ref:"doc",attrs:{id:"doc","aria-describedby":"feedDoc",autocomplete:"off",maxlength:"20",disabled:""},on:{keydown:e.soloNumeros},model:{value:e.datosPersona.documento,callback:function(o){e.$set(e.datosPersona,"documento",o)},expression:"datosPersona.documento"}}),t("b-form-invalid-feedback",{attrs:{id:"feedDoc"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Tipo Documento*","label-for":"tipoDoc"}},[t("b-form-select",{ref:"tipoDoc",attrs:{id:"tipoDoc",options:e.comboTiposDoc,state:e.validateStateD("id_tipo_documento"),"aria-describedby":"feedTipoDoc",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.id_tipo_documento.$model,callback:function(o){e.$set(e.$v.datosPersona.id_tipo_documento,"$model",o)},expression:"$v.datosPersona.id_tipo_documento.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedTipoDoc"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"6",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Municipio de Expedición del Documento*","label-for":"muniDoc"}},[t("b-form-select",{ref:"muniDoc",attrs:{id:"muniDoc",options:e.comboMunicipios,state:e.validateStateD("id_municipio_documento"),"aria-describedby":"feedMuniDoc",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.id_municipio_documento.$model,callback:function(o){e.$set(e.$v.datosPersona.id_municipio_documento,"$model",o)},expression:"$v.datosPersona.id_municipio_documento.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedMuniDoc"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"6",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Fecha de Nacimiento*","label-for":"fechaN"}},[t("b-form-input",{ref:"fechaN",attrs:{id:"fechaN",type:"date",state:e.validateStateD("fecha_nacimiento"),"aria-describedby":"feedFechaN",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.fecha_nacimiento.$model,callback:function(o){e.$set(e.$v.datosPersona.fecha_nacimiento,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.fecha_nacimiento.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedFechaN"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Género*","label-for":"genero"}},[t("b-form-select",{ref:"genero",attrs:{id:"genero",options:e.comboGeneros,state:e.validateStateD("id_genero"),"aria-describedby":"feedGenero",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.id_genero.$model,callback:function(o){e.$set(e.$v.datosPersona.id_genero,"$model",o)},expression:"$v.datosPersona.id_genero.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedGenero"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Grupo y Factor RH*","label-for":"rh"}},[t("b-form-select",{ref:"rh",attrs:{id:"rh",options:e.comboRhs,state:e.validateStateD("id_rh"),"aria-describedby":"feedRh",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.id_rh.$model,callback:function(o){e.$set(e.$v.datosPersona.id_rh,"$model",o)},expression:"$v.datosPersona.id_rh.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedRh"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"6",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Dirección de Residencia*","label-for":"dir"}},[t("b-form-input",{ref:"dir",attrs:{id:"dir",state:e.validateStateD("direccion"),"aria-describedby":"feedDir",autocomplete:"off",maxlength:"100",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.direccion.$model,callback:function(o){e.$set(e.$v.datosPersona.direccion,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.direccion.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedDir"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"6",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Municipio de Residencia*","label-for":"muniRes"}},[t("b-form-select",{ref:"muniRes",attrs:{id:"muniRes",options:e.comboMunicipios,state:e.validateStateD("id_municipio_direccion"),"aria-describedby":"feedMuniRes",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.id_municipio_direccion.$model,callback:function(o){e.$set(e.$v.datosPersona.id_municipio_direccion,"$model",o)},expression:"$v.datosPersona.id_municipio_direccion.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedMuniRes"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Teléfono Principal*","label-for":"tel1"}},[t("b-form-input",{ref:"tel1",attrs:{id:"tel1",state:e.validateStateD("telefono1"),"aria-describedby":"feedTel1",autocomplete:"off",maxlength:"15",disabled:!e.habilitarCampo},on:{keydown:e.soloNumeros},model:{value:e.$v.datosPersona.telefono1.$model,callback:function(o){e.$set(e.$v.datosPersona.telefono1,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.telefono1.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedTel1"}},[e._v("El número debe contener 10 dígitos.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Teléfono Opcional","label-for":"tel2"}},[t("b-form-input",{ref:"tel2",attrs:{id:"tel2",state:e.validateStateD("telefono2"),"aria-describedby":"feedTel2",autocomplete:"off",maxlength:"15",disabled:!e.habilitarCampo},on:{keydown:e.soloNumeros},model:{value:e.$v.datosPersona.telefono2.$model,callback:function(o){e.$set(e.$v.datosPersona.telefono2,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.telefono2.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedTel2"}},[e._v("El número debe contener 10 dígitos.")])],1)],1),t("b-col",{attrs:{lg:"6",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Correo Electrónico*","label-for":"correo"}},[t("b-form-input",{ref:"correo",attrs:{id:"correo",state:e.validateStateD("correo"),"aria-describedby":"feedCorreo",autocomplete:"off",maxlength:"50",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.correo.$model,callback:function(o){e.$set(e.$v.datosPersona.correo,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.correo.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedCorreo"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"12"}},[t("hr")]),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Escalafón*","label-for":"escala"}},[t("b-form-select",{ref:"escala",attrs:{id:"escala",options:e.comboEscalafones,state:e.validateStateD("id_escalafon"),"aria-describedby":"feedEscala",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.id_escalafon.$model,callback:function(o){e.$set(e.$v.datosPersona.id_escalafon,"$model",o)},expression:"$v.datosPersona.id_escalafon.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedEscala"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"9",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Último Título Obtenido*","label-for":"titulo"}},[t("b-form-input",{ref:"titulo",attrs:{id:"titulo",state:e.validateStateD("titulo"),"aria-describedby":"feedTitulo",autocomplete:"off",maxlength:"255",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.titulo.$model,callback:function(o){e.$set(e.$v.datosPersona.titulo,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.titulo.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedTitulo"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"12"}},[t("hr")]),1==e.$store.state.idRol||12==e.$store.state.idRol?t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Usuario"}},[t("b-form-input",{attrs:{disabled:""},model:{value:e.datosPersona.usuario,callback:function(o){e.$set(e.datosPersona,"usuario","string"===typeof o?o.trim():o)},expression:"datosPersona.usuario"}})],1)],1):e._e(),1==e.$store.state.idRol||12==e.$store.state.idRol?t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Contraseña"}},[t("b-form-input",{attrs:{disabled:""},model:{value:e.datosPersona.clave,callback:function(o){e.$set(e.datosPersona,"clave","string"===typeof o?o.trim():o)},expression:"datosPersona.clave"}})],1)],1):e._e(),1==e.$store.state.idRol||12==e.$store.state.idRol?t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Fecha Vigencia*","label-for":"fechaV"}},[t("b-form-input",{ref:"fechaV",attrs:{id:"fechaV",type:"date",state:e.validateStateD("vigencia"),"aria-describedby":"feedFechaV",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.vigencia.$model,callback:function(o){e.$set(e.$v.datosPersona.vigencia,"$model","string"===typeof o?o.trim():o)},expression:"$v.datosPersona.vigencia.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedFechaV"}},[e._v("Campo requerido.")])],1)],1):e._e(),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Estado del Docente*","label-for":"estado"}},[t("b-form-select",{ref:"estado",attrs:{id:"estado",options:e.comboEstados,state:e.validateStateD("estado"),"aria-describedby":"feedEstado",disabled:!e.habilitarCampo},model:{value:e.$v.datosPersona.estado.$model,callback:function(o){e.$set(e.$v.datosPersona.estado,"$model",o)},expression:"$v.datosPersona.estado.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedEstado"}},[e._v("Campo requerido.")])],1)],1)],1):t("b-row",[t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Número de Documento*","label-for":"docV"}},[t("b-form-input",{ref:"docV",attrs:{id:"docV",autocomplete:"off",maxlength:"20"},on:{keydown:e.soloNumeros},model:{value:e.nuevoDocumento,callback:function(o){e.nuevoDocumento="string"===typeof o?o.trim():o},expression:"nuevoDocumento"}})],1)],1)],1)],1)],1)],1)],1),t("b-modal",{ref:"modalMensaje",attrs:{size:"",title:"Mensaje","ok-only":""},scopedSlots:e._u([{key:"modal-footer",fn:function(o){var a=o.ok;return[t("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){return a()}}},[e._v("Aceptar")])]}}])},[t("div",{staticClass:"mx-3"},[t("div",[t("h5",{staticClass:"mb-2"},[e._v("¡Lo sentimos!")]),t("h5",{staticClass:"mb-4 text-danger"},[e._v("El número de documento "+e._s(e.nuevoDocumento)+" ya tiene un usuario registrado en el sistema.")]),t("h6",[e._v("Institución asociada al documento:")]),t("h5",{staticClass:"mb-4"},[e._v(e._s(e.IeVinculante))]),t("h6",[e._v("Por favor comuníquese con la entidad y solicite que el usuario sea desvinculado.")])])])])],1)},u=[],m=(t("ac1f"),t("5319"),t("159b"),t("1dce")),b=t("b5ae"),f=t("9612"),p={name:"fichadocente",mixins:[m["validationMixin"]],props:{datosDocente:Object},components:{},data:function(){return{datosPersona:{id:null,documento:null,id_tipo_documento:null,id_municipio_documento:null,nombre1:null,nombre2:null,apellido1:null,apellido2:null,id_genero:null,fecha_nacimiento:null,id_rh:null,direccion:null,id_municipio_direccion:null,telefono1:null,telefono2:null,correo:null,idDocente:null,id_escalafon:null,titulo:null,estado:null,idUsuario:null,usuario:null,clave:null,id_rol:null,id_entorno:null,id_institucion:null,id_dependencia:null,vigencia:null,editarDocente:!0},comboTiposDoc:[],comboMunicipios:[],comboGeneros:[],comboRhs:[],comboEscalafones:[],comboEstados:[],nuevoDocumento:null,documentoValido:!1,personaExiste:!1,IeVinculante:null,habilitarCampo:!1}},validations:{datosPersona:{documento:{minLength:Object(b["minLength"])(6)},id_tipo_documento:{required:b["required"]},id_municipio_documento:{required:b["required"]},nombre1:{required:b["required"]},nombre2:{minLength:Object(b["minLength"])(0)},apellido1:{required:b["required"]},apellido2:{minLength:Object(b["minLength"])(0)},fecha_nacimiento:{required:b["required"]},id_genero:{required:b["required"]},id_rh:{required:b["required"]},direccion:{required:b["required"]},id_municipio_direccion:{required:b["required"]},telefono1:{required:b["required"],minLength:Object(b["minLength"])(10)},telefono2:{minLength:Object(b["minLength"])(0)},correo:{required:b["required"],minLength:Object(b["minLength"])(5)},id_escalafon:{required:b["required"]},titulo:{required:b["required"]},vigencia:{required:b["required"]},estado:{required:b["required"]}}},methods:{validarDocumento:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var t;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t=new String(e.nuevoDocumento),!(t.length>5)){o.next=6;break}return o.next=4,i.a.get(d["d"]+"academico/docentes/validadocumento",{params:{documento:e.nuevoDocumento}}).then((function(o){o.data.error?e.mensajeEmergente("danger",d["h"],o.data.mensaje+" - Validar documento docente"):0==o.data.datos?e.consultarPersonaDocumento():(e.IeVinculante=null==o.data.datos.institucion?"SET":o.data.datos.institucion,e.$refs.docV.focus(),e.documentoValido=!1,e.$refs["modalMensaje"].show())})).catch((function(o){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Validar documento docente. Intente más tarde. "+o)}));case 4:o.next=10;break;case 6:e.nuevoDocumento="",e.$refs.docV.focus(),e.documentoValido=!1,e.mensajeEmergente("danger",d["h"],"El documento debe contener mínimo 6 dígitos.");case 10:case"end":return o.stop()}}),o)})))()},consultarPersonaDocumento:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,i.a.get(d["d"]+"academico/personas/documento",{params:{documento:e.nuevoDocumento}}).then((function(o){o.data.error?e.mensajeEmergente("danger",d["h"],o.data.mensaje+" - Consultar Persona por Documento"):(0!=o.data.datos?(e.datosPersona.id=o.data.datos.id,e.datosPersona.documento=o.data.datos.documento,e.datosPersona.id_tipo_documento=o.data.datos.id_tipo_documento,e.datosPersona.id_municipio_documento=o.data.datos.id_municipio_documento,e.datosPersona.nombre1=o.data.datos.nombre1,e.datosPersona.nombre2=o.data.datos.nombre2,e.datosPersona.apellido1=o.data.datos.apellido1,e.datosPersona.apellido2=o.data.datos.apellido2,e.datosPersona.id_genero=o.data.datos.id_genero,null!=o.data.datos.fecha_nacimiento&&""!=o.data.datos.fecha_nacimiento&&(e.datosPersona.fecha_nacimiento=o.data.datos.fecha_nacimiento.substr(0,10)),e.datosPersona.id_rh=o.data.datos.id_rh,e.datosPersona.direccion=o.data.datos.direccion,e.datosPersona.id_municipio_direccion=o.data.datos.id_municipio_direccion,e.datosPersona.telefono1=o.data.datos.telefono1,e.datosPersona.telefono2=o.data.datos.telefono2,e.datosPersona.correo=o.data.datos.correo,e.personaExiste=!0):(e.datosPersona.id=f["b"].v1(),e.datosPersona.documento=e.nuevoDocumento,e.datosPersona.id_tipo_documento=null,e.datosPersona.id_municipio_documento=null,e.datosPersona.nombre1=null,e.datosPersona.nombre2=null,e.datosPersona.apellido1=null,e.datosPersona.apellido2=null,e.datosPersona.id_genero=null,e.datosPersona.fecha_nacimiento=null,e.datosPersona.id_rh=null,e.datosPersona.direccion=null,e.datosPersona.id_municipio_direccion=null,e.datosPersona.telefono1=null,e.datosPersona.telefono2=null,e.datosPersona.correo=null,e.personaExiste=!1),e.datosPersona.idDocente=f["b"].v1(),e.datosPersona.id_escalafon=null,e.datosPersona.titulo=null,e.datosPersona.idUsuario=f["b"].v1(),e.datosPersona.usuario=e.nuevoDocumento,e.datosPersona.clave=e.nuevoDocumento,e.datosPersona.vigencia=null,e.datosPersona.id_rol=8,e.datosPersona.id_entorno=4,e.datosPersona.id_institucion=e.$store.state.idInstitucion,e.datosPersona.id_dependencia=12,e.datosPersona.estado=1,e.documentoValido=!0)})).catch((function(o){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Consultar Persona por Documento. Intente más tarde. "+o)}));case 2:case"end":return o.stop()}}),o)})))()},validarDatosFormulario:function(){var e=this;if(this.$v.datosPersona.$touch(),this.$v.datosPersona.$anyError)return this.mensajeEmergente("danger",d["h"],"Algunos campos están incompletos."),!1;var o=this.datosPersona.editarDocente?"Actualizar Datos del Docente":"Crear Docente",t=this.datosPersona.editarDocente?"¿Esta seguro de Actualizar los Datos del Docente?":"¿Esta seguro de Crear el Docente?";return this.$bvModal.msgBoxConfirm(t,{headerBgVariant:"primary",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:o,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+o,cancelVariant:"danger",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(o){o&&e.guardarDatosPersona()})),!0},guardarDatosPersona:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e.datosPersona.apellido1=e.datosPersona.apellido1.toUpperCase(),""==e.datosPersona.apellido2||null==e.datosPersona.apellido2?e.datosPersona.apellido2=null:e.datosPersona.apellido2=e.datosPersona.apellido2.toUpperCase(),e.datosPersona.nombre1=e.datosPersona.nombre1.toUpperCase(),""==e.datosPersona.nombre2||null==e.datosPersona.nombre2?e.datosPersona.nombre2=null:e.datosPersona.nombre2=e.datosPersona.nombre2.toUpperCase(),""!=e.datosPersona.telefono2&&null!=e.datosPersona.telefono2||e.datosPersona.telefono2,e.datosPersona.correo=e.datosPersona.correo.toLowerCase(),e.datosPersona.titulo=e.datosPersona.titulo.toUpperCase(),null!=e.datosPersona.vigencia&&""!=e.datosPersona.vigencia&&(e.datosPersona.vigencia=e.datosPersona.vigencia.substr(0,10)),!e.datosPersona.editarDocente){o.next=13;break}return o.next=11,i.a.put(d["d"]+"academico/docente",JSON.stringify(e.datosPersona),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(o){o.data.error?e.mensajeEmergente("danger",d["h"],o.data.mensaje+" - Actualizar Docente"):(e.cargarDatosDocentes(),e.$emit("retorno",2))})).catch((function(o){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Actualizar Docente. Intente más tarde. "+o)}));case 11:o.next=17;break;case 13:return e.personaExiste||(e.datosPersona.id=f["b"].v1()),e.datosPersona.personaExiste=e.personaExiste,o.next=17,i.a.post(d["d"]+"academico/docente",JSON.stringify(e.datosPersona),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(o){o.data.error?e.mensajeEmergente("danger",d["h"],o.data.mensaje+" - Crear Docente"):(e.cargarDatosDocentes(),e.$emit("retorno",1))})).catch((function(o){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Crear Docente. Intente más tarde. "+o)}));case 17:case"end":return o.stop()}}),o)})))()},validarRetiroDocente:function(){var e=this,o="Desvincular Docente",t="Recuerde que al desvincular (retirar) un Docente de la Institución Educativa, este no podrá volver a ingresar con las credenciales asignadas actualmente. ¿Esta seguro de Desvincular el Docente de la Institución Educativa?";return this.$bvModal.msgBoxConfirm(t,{headerBgVariant:"danger",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:o,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+o,cancelVariant:"",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(o){o&&e.retirarDocente()})),!0},retirarDocente:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,i.a.delete(d["d"]+"academico/docente",{params:{idDocente:e.datosPersona.idDocente,idUsuario:e.datosPersona.idUsuario}}).then((function(o){o.data.error?e.mensajeEmergente("danger",d["h"],o.data.mensaje+" - Retirar Docente"):e.$emit("retorno",3)})).catch((function(o){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Retirar Docente. Intente más tarde. "+o)}));case 2:case"end":return o.stop()}}),o)})))()},consultaDatosPersona:function(){this.datosPersona=this.datosDocente,this.datosPersona.editarDocente&&(this.documentoValido=!0)},enviarCorreoRetiro:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var t;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t={},t.institucion=e.$store.state.nombreInstitucion,t.nombres=e.datosPersona.nombre1+" "+e.datosPersona.nombre2,t.apellidos=e.datosPersona.apellido1+" "+e.datosPersona.apellido2,t.documento=e.datosPersona.documento,t.usuario=null,t.clave=null,t.correo=e.datosPersona.correo,o.next=10,i.a.post(d["d"]+"correos/retirodocente",JSON.stringify(t),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(o){o.data.error&&e.mensajeEmergente("danger",d["h"],o.data.mensaje+" - Correo Retiro docente")})).catch((function(o){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Correo Retiro docente. Intente más tarde. "+o)}));case 10:case"end":return o.stop()}}),o)})))()},enviarCorreoNuevo:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var t;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t={},t.institucion=e.$store.state.nombreInstitucion,t.nombres=e.datosPersona.nombre1+" "+e.datosPersona.nombre2,t.apellidos=e.datosPersona.apellido1+" "+e.datosPersona.apellido2,t.documento=e.datosPersona.documento,t.usuario=e.datosPersona.usuario,t.clave=e.datosPersona.clave,t.correo=e.datosPersona.correo,o.next=10,i.a.post(d["d"]+"correos/nuevodocente",JSON.stringify(t),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(o){o.data.error&&e.mensajeEmergente("danger",d["h"],o.data.mensaje+" - Correo Nuevo docente")})).catch((function(o){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Correo Nuevo docente. Intente más tarde. "+o)}));case 10:case"end":return o.stop()}}),o)})))()},cargarDatosDocentes:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,i.a.get(d["d"]+"academico/carguedocentes",{params:{idInstitucion:e.$store.state.idInstitucion}}).then((function(o){o.data.error?(alert(o.data.mensaje+" - Consulta datos Docentes Activos"),location.replace(d["c"])):0!=o.data.datos?e.$store.commit("set",["datosDocentes",o.data.datos]):e.$store.commit("set",["datosDocentes",[]])})).catch((function(e){alert("Algo salio mal y no se pudo realizar: Consulta datos Docentes Activos. Intente más tarde. "+e),location.replace(d["e"])}));case 2:case"end":return o.stop()}}),o)})))()},soloLetras:function(e){var o=window.Event?e.which:e.keyCode;o>=65&&o<=90||o>=97&&o<=122||193==o||201==o||205==o||211==o||218==o||225==o||233==o||237==o||243==o||250==o||192==o||32==o||8==o||9==o||37==o||39==o||e.preventDefault()},soloNumeros:function(e){var o=window.Event?e.which:e.keyCode;o>=48&&o<=57||o>=96&&o<=105||8==o||9==o||37==o||39==o||e.preventDefault()},cancelarFormulario:function(){this.$emit("retorno",0)},ocuparCombos:function(){var e=this;this.comboEstados=[],this.$store.state.datosTablas.estados.forEach((function(o){e.comboEstados.push({value:o.id,text:o.estado.toUpperCase()})})),this.comboRhs=[],this.$store.state.datosTablas.rhs.forEach((function(o){e.comboRhs.push({value:o.id,text:o.rh.toUpperCase()})})),this.comboGeneros=[],this.$store.state.datosTablas.generos.forEach((function(o){e.comboGeneros.push({value:o.id,text:o.genero.toUpperCase()})})),this.comboTiposDoc=[],this.$store.state.datosTablas.tiposdocumentos.forEach((function(o){e.comboTiposDoc.push({value:o.id,text:o.tipodocumento.toUpperCase()})})),this.comboMunicipios=[],this.$store.state.datosTablas.municipios.forEach((function(o){e.comboMunicipios.push({value:o.id,text:o.municipio.toUpperCase()+" - "+o.departamento.toUpperCase()})}))},ocuparComboEscalafones:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.comboEscalafones=[],e.$store.state.datosEscalafones.forEach((function(o){e.comboEscalafones.push({value:o.id,text:o.escalafon.toUpperCase()})}));case 2:case"end":return o.stop()}}),o)})))()},validateStateD:function(e){var o=this.$v.datosPersona[e],t=o.$dirty,a=o.$error;return t?!a:null},mensajeEmergente:function(e,o,t){this.$bvToast.toast(t,{title:o,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){this.habilitarCampo=1==this.$store.state.idRol||12==this.$store.state.idRol||1==this.$store.state.perActDocente,this.ocuparCombos(),this.ocuparComboEscalafones(),this.consultaDatosPersona()}},h=p,v=t("2877"),g=Object(v["a"])(h,c,u,!1,null,null,null),D=g.exports,_={name:"listadocentes",components:{VueGoodTable:l["a"],FichaDocente:D},data:function(){return{listaDocentes:[],datosDocente:{id:null,documento:null,id_tipo_documento:null,id_municipio_documento:null,nombre1:null,nombre2:null,apellido1:null,apellido2:null,id_genero:null,fecha_nacimiento:null,id_rh:null,direccion:null,id_municipio_direccion:null,telefono1:null,telefono2:null,correo:null,idDocente:null,id_escalafon:null,titulo:null,estado:null,idUsuario:null,usuario:null,clave:null,vigencia:null,editarDocente:!0},encabColumnas:[{label:"Docente",field:"docente"},{label:"Documento",field:"documento",sortable:!1},{label:"Teléfono",field:"telefono1",sortable:!1},{label:"Correo",field:"correo",sortable:!1},{label:"Usuario",field:"usuario",sortable:!1},{label:"Vigencia",field:"vigencia",formatFn:this.formatFnV,sortable:!1},{label:"Estado",field:"estado",formatFn:this.formatFnE,tdClass:this.tdClassFuncE,sortable:!1},{label:"",field:"id",sortable:!1}]}},methods:{nuevoDocente:function(){this.datosDocente.editarDocente=!1,this.$refs["modalCrearEditarDocente"].show()},seleccionarDocente:function(e){this.datosDocente.id=e.id,this.datosDocente.documento=e.documento,this.datosDocente.id_tipo_documento=e.id_tipo_documento,this.datosDocente.id_municipio_documento=e.id_municipio_documento,this.datosDocente.nombre1=e.nombre1,this.datosDocente.nombre2=e.nombre2,this.datosDocente.apellido1=e.apellido1,this.datosDocente.apellido2=e.apellido2,this.datosDocente.id_genero=e.id_genero,null!=e.fecha_nacimiento&&""!=e.fecha_nacimiento&&(this.datosDocente.fecha_nacimiento=e.fecha_nacimiento.substr(0,10)),this.datosDocente.id_rh=e.id_rh,this.datosDocente.direccion=e.direccion,this.datosDocente.id_municipio_direccion=e.id_municipio_direccion,this.datosDocente.telefono1=e.telefono1,this.datosDocente.telefono2=e.telefono2,this.datosDocente.correo=e.correo,this.datosDocente.idDocente=e.idDocente,this.datosDocente.id_escalafon=e.id_escalafon,this.datosDocente.titulo=e.titulo,this.datosDocente.estado=e.estado,this.datosDocente.idUsuario=e.idUsuario,this.datosDocente.usuario=e.usuario,this.datosDocente.clave=e.clave,null!=e.vigencia&&""!=e.vigencia?this.datosDocente.vigencia=e.vigencia.substr(0,10):this.datosDocente.vigencia=null,this.datosDocente.editarDocente=!0,this.$refs["modalCrearEditarDocente"].show()},datosRecibidosDocente:function(e){1==e?this.mensajeEmergente("success",d["h"],"El docente se ha creado correctamente."):2==e?this.mensajeEmergente("success",d["h"],"Los datos del docente se han actualizado correctamente."):3==e&&this.mensajeEmergente("success",d["h"],"El docente se ha desvinculado correctamente."),this.consultarListaDocentes(),this.$refs["modalCrearEditarDocente"].hide()},consultarListaDocentes:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.listaDocentes=[],o.next=3,i.a.get(d["d"]+"academico/docentes",{params:{idInstitucion:e.$store.state.idInstitucion}}).then((function(o){o.data.error?e.mensajeEmergente("danger",d["h"],o.data.mensaje+" - Lista Docentes"):0!=o.data.datos&&(e.listaDocentes=o.data.datos)})).catch((function(o){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Lista Docentes. Intente más tarde."+o)}));case 3:case"end":return o.stop()}}),o)})))()},formatFnV:function(e){return null!=e&&""!=e?e.substr(0,10):""},formatFnE:function(e){return 0==e?"INACTIVO":"ACTIVO"},tdClassFuncE:function(e){return 0==e.estado?"text-danger text-left":"text-success text-left"},mensajeEmergente:function(e,o,t){this.$bvToast.toast(t,{title:o,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){this.consultarListaDocentes()}},$=_,P=Object(v["a"])($,a,n,!1,null,null,null);o["default"]=P.exports}}]);
//# sourceMappingURL=chunk-2d0c11e7.8c06babd.js.map