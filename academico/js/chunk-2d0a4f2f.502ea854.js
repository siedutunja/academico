(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4f2f"],{"092b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.validaVigencia?a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"search","aria-hidden":"true"}}),e._v(" RENOVACIÓN DE MATRICULAS PARA LA VIGENCIA "+e._s(e.$store.state.aLectivo))],1)]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"float-right text-medium-emphasis text-info"},[e._v("* Campo requerido")]),a("div",[a("b-button",{staticClass:"small ml-3",attrs:{variant:"secondary"},on:{click:e.cancelarFormulario}},[e._v("Cerrar")])],1)]},proxy:!0}])},[a("b-card-text",[a("b-row",[a("b-col",[a("p",[e._v("Para realizar la revación de la matricula de un estudiante, este debe estar matriculado en la vigencia "+e._s(e.vigenciaBusqueda)+".")])])],1),a("b-row",{staticClass:"mt-3"},[a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Criterio de Busqueda*","label-for":"texto"}},[a("b-form-input",{ref:"texto",attrs:{id:"texto",state:e.validateStateT("textoBusqueda"),"aria-describedby":"feedTextoB",autocomplete:"off",maxlength:"50",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.buscarEstudiante()}},model:{value:e.$v.buscarTexto.textoBusqueda.$model,callback:function(t){e.$set(e.$v.buscarTexto.textoBusqueda,"$model","string"===typeof t?t.trim():t)},expression:"$v.buscarTexto.textoBusqueda.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedTextoB"}},[e._v("La busqueda debe contener mínimo 5 caracteres.")])],1),a("p",[e._v(" Realice la busqueda de un estudiante digitando el número de documento sin puntos ni comas o digitando el nombre y/o apellido del estudiante. ")])],1),a("b-col",{attrs:{lg:"6"}},[a("br"),a("b-button",{staticClass:"small mt-1",attrs:{variant:"primary"},on:{click:function(t){return e.buscarEstudiante()}}},[e._v("Buscar Estudiante")])],1)],1),e.listaEstudiantes.length?a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("hr")]),a("b-col",{attrs:{lg:"12"}},[a("vue-good-table",{attrs:{columns:e.encabColumnas,rows:e.listaEstudiantes,styleClass:"vgt-table condensed bordered striped","line-numbers":!0,"search-options":{enabled:!0,placeholder:"Buscar..."},"pagination-options":{enabled:!0,mode:"records",perPage:25,position:"",perPageDropdown:[50,100,150,200],dropdownAllowAll:!1,setCurrentPage:1,nextLabel:"Siguiente",prevLabel:"Anterior",rowsPerPageLabel:"Filas por página",ofLabel:"de",pageLabel:"Página",allLabel:"Todo"}},scopedSlots:e._u([{key:"table-row",fn:function(t){return["estudiante"==t.column.field?a("span",[a("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},on:{click:function(a){return e.renovarMatricula(t.row)}}},[e._v(e._s(t.row.estudiante))])]):e._e()]}}],null,!1,2970548546)},[a("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[a("h5",{staticClass:"text-danger ml-5"},[e._v("No se encontraron estudiantes")])])])],1)],1):e._e()],1)],1)],1)],1):a("b-row",[a("b-col",[a("b-card",[a("b-alert",{attrs:{variant:"danger",show:""}},[a("h5",{staticClass:"mt-3"},[e._v("Vigencia no válida.")]),a("h6",{staticClass:"mt-3"},[e._v("Lo sentimos, no se puede renovar matriculas en la vigencia "+e._s(e.$store.state.aLectivo)+".")]),a("h6",{staticClass:"mt-3"},[e._v("Cambie a la vigencia "+e._s(e.$store.state.aMatriculas)+" para renovar matriculas.")])])],1)],1)],1)],1)},s=[],n=a("1da1"),o=(a("96cf"),a("bc3a")),i=a.n(o),u=a("9c40"),l=a("1dce"),c=a("b5ae"),d=(a("dac4"),a("f617")),b={name:"buscarrenovacion",mixins:[l["validationMixin"]],components:{VueGoodTable:d["a"]},data:function(){return{buscarTexto:{textoBusqueda:null},listaEstudiantes:[],encabColumnas:[{label:"Apellidos y Nombres del Estudiante",field:"estudiante",sortable:!0},{label:"Documento",field:"documento",sortable:!1},{label:"Grado",field:"grado",sortable:!1},{label:"Observaciones/Pendientes",field:"obs_matricula",sortable:!0}],validaVigencia:!1,vigenciaBusqueda:null}},validations:{buscarTexto:{textoBusqueda:{required:c["required"],minLength:Object(c["minLength"])(5)}}},methods:{renovarMatricula:function(e){this.$store.commit("set",["datosEstudianteRenovar",e]),this.$router.push("/matriculas/FichaRenovacionMatricula")},buscarEstudiante:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.listaEstudiantes=[],e.$v.buscarTexto.$touch(),!e.$v.buscarTexto.$anyError){t.next=8;break}return e.mensajeEmergente("danger",u["h"],"El criterio de busqueda es menor a 5 caracteres."),e.$refs.texto.focus(),t.abrupt("return",!1);case 8:return t.next=10,i.a.get(u["d"]+"academico/buscarestudiante/renovacion",{params:{texto:e.buscarTexto.textoBusqueda,idInstitucion:e.$store.state.idInstitucion,vigencia:e.vigenciaBusqueda}}).then((function(t){t.data.error?e.mensajeEmergente("danger",u["h"],t.data.mensaje+" - Intente realizar una nueva busqueda de estudiante"):0!=t.data.datos?e.listaEstudiantes=t.data.datos:e.mensajeEmergente("info",u["h"],"No se encontraron estudiantes en la busqueda.")})).catch((function(t){e.mensajeEmergente("danger",u["h"],"Algo salio mal y no se pudo realizar: Buscar estudiante. Intente más tarde. "+t)}));case 10:return t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})))()},validateStateT:function(e){var t=this.$v.buscarTexto[e],a=t.$dirty,r=t.$error;return a?!r:null},cancelarFormulario:function(){this.$router.push("/")},mensajeEmergente:function(e,t,a){this.$bvToast.toast(a,{title:t,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){1==this.$store.state.idRol||12==this.$store.state.idRol||1==this.$store.state.perMatricular?(this.validaVigencia=this.$store.state.aMatriculas==this.$store.state.aLectivo,this.vigenciaBusqueda=this.$store.state.aMatriculas-1):this.$router.push("/restringida")}},m=b,v=a("2877"),p=Object(v["a"])(m,r,s,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0a4f2f.502ea854.js.map