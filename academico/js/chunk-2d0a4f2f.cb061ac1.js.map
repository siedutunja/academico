{"version":3,"sources":["webpack:///./src/views/matriculas/BuscarRenovacion.vue?7c07","webpack:///src/views/matriculas/BuscarRenovacion.vue","webpack:///./src/views/matriculas/BuscarRenovacion.vue?6da8","webpack:///./src/views/matriculas/BuscarRenovacion.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","staticClass","_v","proxy","on","cancelarFormulario","ref","validateStateT","$event","type","indexOf","_k","keyCode","buscarEstudiante","model","value","$v","buscarTexto","textoBusqueda","callback","$$v","$set","trim","expression","listaEstudiantes","encabColumnas","enabled","placeholder","mode","perPage","position","perPageDropdown","dropdownAllowAll","setCurrentPage","nextLabel","prevLabel","rowsPerPageLabel","ofLabel","pageLabel","allLabel","props","column","field","row","idInstitucion","$store","state","estado","_s","estudiante","staticStyle","renovarMatricula","_e","slot","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d0a4f2f.cb061ac1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('b-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h5',{staticClass:\"mb-0\"},[_c('b-icon',{attrs:{\"icon\":\"search\",\"aria-hidden\":\"true\"}}),_vm._v(\" BUSCAR ESTUDIANTE\")],1)]},proxy:true},{key:\"footer\",fn:function(){return [_c('div',{staticClass:\"float-right text-medium-emphasis text-info\"},[_vm._v(\"* Campo requerido\")]),_c('div',[_c('b-button',{staticClass:\"small ml-3\",attrs:{\"variant\":\"secondary\"},on:{\"click\":_vm.cancelarFormulario}},[_vm._v(\"Cerrar\")])],1)]},proxy:true}])},[_c('b-card-text',[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"6\",\"md\":\"6\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Criterio de Busqueda*\",\"label-for\":\"texto\"}},[_c('b-form-input',{ref:\"texto\",attrs:{\"id\":\"texto\",\"state\":_vm.validateStateT('textoBusqueda'),\"aria-describedby\":\"feedTextoB\",\"autocomplete\":\"off\",\"maxlength\":\"50\",\"autofocus\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.buscarEstudiante()}},model:{value:(_vm.$v.buscarTexto.textoBusqueda.$model),callback:function ($$v) {_vm.$set(_vm.$v.buscarTexto.textoBusqueda, \"$model\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"$v.buscarTexto.textoBusqueda.$model\"}}),_c('b-form-invalid-feedback',{attrs:{\"id\":\"feedTextoB\"}},[_vm._v(\"La busqueda debe contener mínimo 5 caracteres.\")])],1),_c('p',[_vm._v(\" Realice la busqueda de un estudiante digitando el número de documento sin puntos ni comas o digitando el nombre y/o apellido del estudiante. \")])],1),_c('b-col',{attrs:{\"lg\":\"6\",\"md\":\"6\"}},[_c('br'),_c('b-button',{staticClass:\"small mt-1\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.buscarEstudiante()}}},[_vm._v(\"Buscar Estudiante\")])],1)],1),(_vm.listaEstudiantes.length)?_c('b-row',[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('hr')]),_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('vue-good-table',{attrs:{\"columns\":_vm.encabColumnas,\"rows\":_vm.listaEstudiantes,\"styleClass\":\"vgt-table condensed bordered striped\",\"line-numbers\":true,\"search-options\":{enabled: true,placeholder: 'Buscar...'},\"pagination-options\":{\n                  enabled: true,\n                  mode: 'records',\n                  perPage: 25,\n                  position: '',\n                  perPageDropdown: [50, 100, 150, 200],\n                  dropdownAllowAll: false,\n                  setCurrentPage: 1,\n                  nextLabel: 'Siguiente',\n                  prevLabel: 'Anterior',\n                  rowsPerPageLabel: 'Filas por página',\n                  ofLabel: 'de',\n                  pageLabel: 'Página', // for 'pages' mode\n                  allLabel: 'Todo',\n                  //infoFn: (params) => `my own page ${params.firstRecordOnPage}`, \n                }},scopedSlots:_vm._u([{key:\"table-row\",fn:function(props){return [(props.column.field == 'estudiante')?_c('span',[(props.row.idInstitucion != _vm.$store.state.idInstitucion && (props.row.estado == 2 || props.row.estado == null))?_c('span',{staticStyle:{\"font-weight\":\"bold\",\"color\":\"blue\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.renovarMatricula(props.row)}}},[_vm._v(_vm._s(props.row.estudiante))]):_c('span',[_vm._v(_vm._s(props.row.estudiante))])]):_vm._e()]}}],null,false,2551411652)},[_c('div',{attrs:{\"slot\":\"emptystate\"},slot:\"emptystate\"},[_c('h5',{staticClass:\"text-danger ml-5\"},[_vm._v(\"No se encontraron estudiantes\")])])])],1)],1):_vm._e()],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <b-row>\n      <b-col lg=\"12\">\n        <b-card>\n          <template #header>\n            <h5 class=\"mb-0\"><b-icon icon=\"search\" aria-hidden=\"true\"></b-icon> BUSCAR ESTUDIANTE</h5>\n          </template>\n          <b-card-text>\n            <b-row>\n              <b-col lg=\"6\" md=\"6\">\n                <b-form-group label=\"Criterio de Busqueda*\" label-for=\"texto\" class=\"etiqueta\">\n                  <b-form-input id=\"texto\" ref=\"texto\" v-model.trim=\"$v.buscarTexto.textoBusqueda.$model\" :state=\"validateStateT('textoBusqueda')\" aria-describedby=\"feedTextoB\" autocomplete=\"off\" maxlength=\"50\" v-on:keyup.enter=\"buscarEstudiante()\" autofocus></b-form-input>\n                  <b-form-invalid-feedback id=\"feedTextoB\" >La busqueda debe contener mínimo 5 caracteres.</b-form-invalid-feedback>\n                </b-form-group>\n                <p>\n                  Realice la busqueda de un estudiante digitando el número de documento sin puntos ni comas o digitando el nombre y/o apellido del estudiante.\n                </p>\n              </b-col>\n              <b-col lg=\"6\" md=\"6\">\n                <br>\n                <b-button class=\"small mt-1\" variant=\"primary\" @click=\"buscarEstudiante()\">Buscar Estudiante</b-button>\n              </b-col>\n            </b-row>\n            <b-row v-if=\"listaEstudiantes.length\">\n              <b-col lg=\"12\"><hr></b-col>\n              <b-col lg=\"12\">\n                <vue-good-table :columns=\"encabColumnas\" :rows=\"listaEstudiantes\" styleClass=\"vgt-table condensed bordered striped\" :line-numbers=\"true\"\n                  :search-options=\"{enabled: true,placeholder: 'Buscar...'}\"\n                  :pagination-options=\"{\n                    enabled: true,\n                    mode: 'records',\n                    perPage: 25,\n                    position: '',\n                    perPageDropdown: [50, 100, 150, 200],\n                    dropdownAllowAll: false,\n                    setCurrentPage: 1,\n                    nextLabel: 'Siguiente',\n                    prevLabel: 'Anterior',\n                    rowsPerPageLabel: 'Filas por página',\n                    ofLabel: 'de',\n                    pageLabel: 'Página', // for 'pages' mode\n                    allLabel: 'Todo',\n                    //infoFn: (params) => `my own page ${params.firstRecordOnPage}`, \n                  }\">\n                  <template slot=\"table-row\" slot-scope=\"props\">\n                    <span v-if=\"props.column.field == 'estudiante'\">\n                      <span v-if=\"props.row.idInstitucion != $store.state.idInstitucion && (props.row.estado == 2 || props.row.estado == null)\" style=\"font-weight: bold; color: blue; cursor: pointer\" @click=\"renovarMatricula(props.row)\">{{props.row.estudiante}}</span> \n                      <span v-else>{{props.row.estudiante}}</span>\n                    </span>\n                  </template>\n                  <div slot=\"emptystate\">\n                    <h5 class=\"text-danger ml-5\">No se encontraron estudiantes</h5>\n                  </div>\n                </vue-good-table>\n              </b-col>\n            </b-row>\n          </b-card-text>\n          <template #footer>\n            <div class=\"float-right text-medium-emphasis text-info\">* Campo requerido</div>\n            <div>\n              <b-button class=\"small ml-3\" variant=\"secondary\" @click=\"cancelarFormulario\">Cerrar</b-button>\n            </div>\n          </template>\n        </b-card>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\"\n  import * as CONFIG from '@/assets/config.js'\n  import { validationMixin } from \"vuelidate\";\n  import { required, minLength } from \"vuelidate/lib/validators\";\n  import 'vue-good-table/dist/vue-good-table.css'\n  import { VueGoodTable } from 'vue-good-table'\n\n  export default {\n    name: 'buscarrenovacion',\n    mixins: [validationMixin],\n    components: {\n      VueGoodTable\n    },\n    data () {\n      return {\n        buscarTexto: {\n          textoBusqueda: null,\n        },\n        listaEstudiantes: [],\n        encabColumnas : [\n          { label: 'Apellidos y Nombres del Estudiante', field: 'estudiante', sortable: true },\n          { label: 'Documento', field: 'documento', sortable: false },\n          { label: 'Estado', field: 'estado', formatFn: this.formatFnE, sortable: true },\n          { label: 'Institución', field: 'institucion', sortable: true },\n          //{ label: 'IdIE', field: 'idInstitucion', sortable: true },\n          //{ label: 'Repitente', field: 'id_repitente', formatFn: this.formatFnF, sortable: false }\n        ]\n      }\n    },\n    validations: {\n      buscarTexto: {\n        textoBusqueda: { required, minLength: minLength(5) }\n      }\n    },\n    methods: {\n      renovarMatricula(fila) {\n        this.$store.commit('set', ['datosEstudianteRenovar', fila])\n        this.$router.push('/matriculas/FichaRenovacionMatricula')\n      },\n      async buscarEstudiante() {\n        this.listaEstudiantes = []\n        this.$v.buscarTexto.$touch()\n        if (this.$v.buscarTexto.$anyError) {\n          this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'El criterio de busqueda es menor a 5 caracteres.')\n          this.$refs.texto.focus()\n          return false\n        } else {\n          await axios\n          .get(CONFIG.ROOT_PATH + 'academico/buscarestudiante/renovacion', { params: { texto: this.buscarTexto.textoBusqueda, idInstitucion: this.$store.state.idInstitucion, vigencia: this.$store.state.aMatriculas }})\n          .then(response => {\n            if (response.data.error){\n              this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Intente realizar una nueva busqueda de estudiante')\n            } else{\n              if (response.data.datos != 0) {\n                this.listaEstudiantes = response.data.datos\n                //console.log(JSON.stringify(this.listaEstudiantes))\n              } else {\n                this.mensajeEmergente('info',CONFIG.TITULO_MSG,'No se encontraron estudiantes en la busqueda.')\n              }\n            }\n          })\n          .catch(err => {\n              this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Buscar estudiante. Intente más tarde. ' + err)\n          })\n        }\n        return true\n      },\n      formatFnE: function(value) {\n        if (value == 1) {\n          return 'MATRICULADO'\n        } else if (value == 2) {\n          return 'RETIRADO'\n        }\n        return 'SIN MATRICULAR'\n      },\n      validateStateT(name) {\n        const { $dirty, $error } = this.$v.buscarTexto[name]\n        return $dirty ? !$error : null\n      },\n      cancelarFormulario() {\n        this.$router.push('/')\n      },\n      mensajeEmergente(variante, titulo, contenido) {\n        this.$bvToast.toast(contenido, { title: titulo, variant: variante, toaster: \"b-toaster-top-center\", solid: true, autoHideDelay: 4000, appendToast: false })\n      }\n    },\n    beforeMount() {\n      if(this.$store.state.idRol == 1 || this.$store.state.idRol == 12 || this.$store.state.perMatricular == 1) {\n      } else {\n        this.$router.push('/restringida')\n      }\n    }\n  }\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuscarRenovacion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuscarRenovacion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BuscarRenovacion.vue?vue&type=template&id=557dd6f1&\"\nimport script from \"./BuscarRenovacion.vue?vue&type=script&lang=js&\"\nexport * from \"./BuscarRenovacion.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}