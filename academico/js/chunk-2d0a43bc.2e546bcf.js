(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a43bc"],{"0622":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-row",{staticClass:"mt-2"},[e("b-col",{attrs:{lg:"12"}},[e("b-card",{scopedSlots:t._u([{key:"header",fn:function(){return[e("h5",{staticClass:"mb-0"},[e("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),t._v(" RUTAS DE LA INSTITUCIÓN EDUCATIVA")],1)]},proxy:!0},{key:"footer",fn:function(){return[e("em",[t._v("Consulte o actualice los datos de una ruta haciendo clic en el lapiz.")])]},proxy:!0}])},[e("b-card-text",[e("b-row",[e("b-col",{attrs:{lg:"12"}},[e("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:t._u([{key:"header",fn:function(){return[1==t.$store.state.idRol||12==t.$store.state.idRol?e("b-button",{staticClass:"small float-right",attrs:{variant:"dark"},on:{click:t.nuevaRuta}},[t._v("Nueva Ruta")]):t._e(),e("h5",{staticClass:"mb-0"},[e("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),t._v(" Lista de Rutas")],1)]},proxy:!0}])},[e("b-card-text",[e("vue-good-table",{attrs:{columns:t.encabColumnas,rows:t.listaRutas,styleClass:"vgt-table condensed bordered striped","line-numbers":!0},scopedSlots:t._u([{key:"table-row",fn:function(a){return["id"==a.column.field?e("span",[e("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},attrs:{title:"Consultar/Actualizar Datos de la Ruta"},on:{click:function(e){return t.seleccionarRuta(a.row)}}},[e("CIcon",{attrs:{name:"cilPencil"}})],1)]):t._e()]}}])},[e("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[e("h5",{staticClass:"text-danger ml-5"},[t._v("No existen Rutas creadas")])])])],1)],1)],1)],1)],1)],1)],1)],1),e("b-modal",{ref:"modalCrearEditarRuta",attrs:{size:"xl",scrollable:"","hide-footer":"",title:t.datosRuta.editarRuta?"Editar Datos de la Ruta":"Nueva Ruta","ok-only":""}},[e("div",{staticClass:"mx-3"},[e("div",[e("FichaRuta",{attrs:{datosRuta:t.datosRuta},on:{retorno:t.datosRecibidosRuta}})],1)])])],1)},s=[],o=e("1da1"),n=(e("96cf"),e("ac1f"),e("5319"),e("bc3a")),i=e.n(n),u=e("9c40"),c=(e("dac4"),e("f617")),d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-row",{staticClass:"mt-2"},[e("b-col",{attrs:{lg:"12"}},[e("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:t._u([{key:"header",fn:function(){return[e("h5",{staticClass:"mb-0"},[e("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),t._v(" DATOS DE LA RUTA")],1)]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"float-right text-medium-emphasis text-info"},[t._v("* Campo requerido")]),e("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"primary"},on:{click:t.validarDatosFormulario}},[t.infoRutas.editarRuta?e("div",[t._v("Actualizar Datos de la Ruta")]):e("div",[t._v("Guardar la Nueva Ruta")])]),e("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"secondary"},on:{click:t.cancelarFormulario}},[t._v("Cancelar")])]},proxy:!0}])},[e("b-card-text",[e("b-row",[e("b-col",{attrs:{lg:"9",md:"12"}},[e("b-form-group",{staticClass:"etiqueta",attrs:{label:"Descripción de la Ruta*","label-for":"ruta"}},[e("b-form-input",{ref:"ruta",attrs:{id:"ruta",state:t.validateStateS("ruta"),"aria-describedby":"feedRuta",autocomplete:"off",maxlength:"100"},model:{value:t.$v.infoRutas.ruta.$model,callback:function(a){t.$set(t.$v.infoRutas.ruta,"$model","string"===typeof a?a.trim():a)},expression:"$v.infoRutas.ruta.$model"}}),e("b-form-invalid-feedback",{attrs:{id:"feedRuta"}},[t._v("Campo requerido.")])],1)],1),e("b-col",{attrs:{lg:"3",md:"6"}},[e("b-form-group",{staticClass:"etiqueta",attrs:{label:"Estado de la Ruta*","label-for":"estado"}},[e("b-form-select",{ref:"estado",attrs:{id:"estado",options:t.comboEstados,state:t.validateStateS("estado"),"aria-describedby":"feedEstado"},model:{value:t.$v.infoRutas.estado.$model,callback:function(a){t.$set(t.$v.infoRutas.estado,"$model",a)},expression:"$v.infoRutas.estado.$model"}}),e("b-form-invalid-feedback",{attrs:{id:"feedEstado"}},[t._v("Campo requerido.")])],1)],1)],1)],1)],1)],1)],1)],1)},l=[],m=(e("159b"),e("1dce")),f=e("b5ae"),h={name:"ficharuta",mixins:[m["validationMixin"]],props:{datosRuta:Object},components:{},data:function(){return{infoRutas:{id:null,id_institucion:null,ruta:null,estado:null,editarRuta:!0},comboEstados:[]}},validations:{infoRutas:{ruta:{required:f["required"],minLength:Object(f["minLength"])(4)},estado:{required:f["required"]}}},methods:{validarDatosFormulario:function(){var t=this;if(this.$v.infoRutas.$touch(),this.$v.infoRutas.$anyError)return this.mensajeEmergente("danger",u["h"],"Algunos campos están incompletos."),!1;var a=this.infoRutas.editarRuta?"Actualizar datos de la Ruta":"Crear Ruta",e=this.infoRutas.editarRuta?"¿Esta seguro de actualizar los datos de la Ruta?":"¿Esta seguro de crear la Ruta?";return this.$bvModal.msgBoxConfirm(e,{headerBgVariant:"primary",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:a,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+a,cancelVariant:"",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(a){a&&t.guardarDatosRuta()})),!0},guardarDatosRuta:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.infoRutas.ruta=t.infoRutas.ruta.toUpperCase(),!t.infoRutas.editarRuta){a.next=6;break}return a.next=4,i.a.put(u["d"]+"academico/ruta",JSON.stringify(t.infoRutas),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(a){a.data.error?t.mensajeEmergente("danger",u["h"],a.data.mensaje+" - Actualizar Ruta"):t.$emit("retorno",2)})).catch((function(a){t.mensajeEmergente("danger",u["h"],"Algo salio mal y no se pudo realizar: Actualizar Ruta. Intente más tarde. "+a)}));case 4:a.next=8;break;case 6:return a.next=8,i.a.post(u["d"]+"academico/ruta",JSON.stringify(t.infoRutas),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(a){a.data.error?t.mensajeEmergente("danger",u["h"],a.data.mensaje+" - Crear Ruta"):t.$emit("retorno",1)})).catch((function(a){t.mensajeEmergente("danger",u["h"],"Algo salio mal y no se pudo realizar: Crear Ruta. Intente más tarde. "+a)}));case 8:t.cargarDatosRutas();case 9:case"end":return a.stop()}}),a)})))()},cargarDatosRutas:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i.a.get(u["d"]+"academico/carguerutas",{params:{idInstitucion:t.$store.state.idInstitucion}}).then((function(a){a.data.error?(alert(a.data.mensaje+" - Consulta datos Rutas IE"),location.replace(u["c"])):t.$store.commit("set",["datosRutas",a.data.datos])})).catch((function(t){alert("Algo salio mal y no se pudo realizar: Consulta datos Rutas IE. Intente más tarde. "+t),location.replace(u["e"])}));case 2:case"end":return a.stop()}}),a)})))()},consultaInfoRutas:function(){this.infoRutas=this.datosRuta},soloNumeros:function(t){var a=window.Event?t.which:t.keyCode;a>=48&&a<=57||a>=96&&a<=105||8==a||9==a||37==a||39==a||t.preventDefault()},cancelarFormulario:function(){this.$emit("retorno",0)},ocuparCombos:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.comboEstados=[],t.$store.state.datosTablas.estados.forEach((function(a){t.comboEstados.push({value:a.id,text:a.estado.toUpperCase()})}));case 2:case"end":return a.stop()}}),a)})))()},validateStateS:function(t){var a=this.$v.infoRutas[t],e=a.$dirty,r=a.$error;return e?!r:null},mensajeEmergente:function(t,a,e){this.$bvToast.toast(e,{title:a,variant:t,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){this.consultaInfoRutas(),this.ocuparCombos()}},R=h,b=e("2877"),p=Object(b["a"])(R,d,l,!1,null,null,null),v=p.exports,g={name:"rutasie",components:{VueGoodTable:c["a"],FichaRuta:v},data:function(){return{listaRutas:[],datosRuta:{id:null,ruta:null,id_institucion:null,estado:null,editarRuta:!0},encabColumnas:[{label:"Descripción de la Ruta",field:"ruta"},{label:"Estado",field:"estado",formatFn:this.formatFnE,tdClass:this.tdClassFuncE,sortable:!1},{label:"",field:"id",sortable:!1}]}},methods:{nuevaRuta:function(){this.datosRuta.id=null,this.datosRuta.ruta=null,this.datosRuta.id_institucion=this.$store.state.idInstitucion,this.datosRuta.estado=1,this.datosRuta.editarRuta=!1,this.$refs["modalCrearEditarRuta"].show()},seleccionarRuta:function(t){this.datosRuta.id=t.id,this.datosRuta.ruta=t.ruta,this.datosRuta.id_institucion=t.id_institucion,this.datosRuta.estado=t.estado,this.datosRuta.editarRuta=!0,this.$refs["modalCrearEditarRuta"].show()},datosRecibidosRuta:function(t){1==t?this.mensajeEmergente("success",u["h"],"La Ruta se ha creado correctamente."):2==t&&this.mensajeEmergente("success",u["h"],"Los datos de la Ruta se han actualizado correctamente."),this.verRutas(),this.$refs["modalCrearEditarRuta"].hide()},verRutas:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i.a.get(u["d"]+"academico/carguerutasconfig",{params:{idInstitucion:t.$store.state.idInstitucion}}).then((function(a){a.data.error?(alert(a.data.mensaje+" - Consulta datos Rutas"),location.replace(u["c"])):0!=a.data.datos?t.listaRutas=a.data.datos:t.listaRutas=[]})).catch((function(t){alert("Algo salio mal y no se pudo realizar: Consulta datos Rutas. Intente más tarde. "+t),location.replace(u["e"])}));case 2:case"end":return a.stop()}}),a)})))()},formatFnE:function(t){return 0==t?"INACTIVO":"ACTIVO"},tdClassFuncE:function(t){return 0==t.estado?"text-danger text-left":"text-success text-left"},mensajeEmergente:function(t,a,e){this.$bvToast.toast(e,{title:a,variant:t,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){1==this.$store.state.idRol||12==this.$store.state.idRol?this.verRutas():this.$router.push("/restringida")}},C=g,$=Object(b["a"])(C,r,s,!1,null,null,null);a["default"]=$.exports}}]);
//# sourceMappingURL=chunk-2d0a43bc.2e546bcf.js.map