{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/views/reportes/Boletines.vue?be56","webpack:///./src/views/reportes/boletines/BoletinPeriodoInem.vue?07d4","webpack:///src/views/reportes/boletines/BoletinPeriodoInem.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoInem.vue?7da4","webpack:///./src/views/reportes/boletines/BoletinPeriodoInem.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoGranColombiano.vue?4fd3","webpack:///src/views/reportes/boletines/BoletinPeriodoGranColombiano.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoGranColombiano.vue?bd80","webpack:///./src/views/reportes/boletines/BoletinPeriodoGranColombiano.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoGustavoRojas.vue?c95e","webpack:///src/views/reportes/boletines/BoletinPeriodoGustavoRojas.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoGustavoRojas.vue?048b","webpack:///./src/views/reportes/boletines/BoletinPeriodoGustavoRojas.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoJulius.vue?d2f5","webpack:///src/views/reportes/boletines/BoletinPeriodoJulius.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoJulius.vue?8cea","webpack:///./src/views/reportes/boletines/BoletinPeriodoJulius.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoEmiliani.vue?6ac2","webpack:///src/views/reportes/boletines/BoletinPeriodoEmiliani.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoEmiliani.vue?2648","webpack:///./src/views/reportes/boletines/BoletinPeriodoEmiliani.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodo.vue?77f7","webpack:///src/views/reportes/boletines/BoletinPeriodo.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodo.vue?1257","webpack:///./src/views/reportes/boletines/BoletinPeriodo.vue","webpack:///./src/views/reportes/boletines/BoletinPree.vue?1cc6","webpack:///src/views/reportes/boletines/BoletinPree.vue","webpack:///./src/views/reportes/boletines/BoletinPree.vue?ac9c","webpack:///./src/views/reportes/boletines/BoletinPree.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoRetirado.vue?82c0","webpack:///src/views/reportes/boletines/BoletinPeriodoRetirado.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoRetirado.vue?2e55","webpack:///./src/views/reportes/boletines/BoletinPeriodoRetirado.vue","webpack:///./src/views/reportes/boletines/BoletinPreeRetirado.vue?3316","webpack:///src/views/reportes/boletines/BoletinPreeRetirado.vue","webpack:///./src/views/reportes/boletines/BoletinPreeRetirado.vue?4690","webpack:///./src/views/reportes/boletines/BoletinPreeRetirado.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoReubicado.vue?351d","webpack:///src/views/reportes/boletines/BoletinPeriodoReubicado.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoReubicado.vue?15e7","webpack:///./src/views/reportes/boletines/BoletinPeriodoReubicado.vue","webpack:///./src/views/reportes/boletines/BoletinPreeReubicado.vue?721a","webpack:///src/views/reportes/boletines/BoletinPreeReubicado.vue","webpack:///./src/views/reportes/boletines/BoletinPreeReubicado.vue?dcc2","webpack:///./src/views/reportes/boletines/BoletinPreeReubicado.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoPromocionado.vue?89cc","webpack:///src/views/reportes/boletines/BoletinPeriodoPromocionado.vue","webpack:///./src/views/reportes/boletines/BoletinPeriodoPromocionado.vue?e636","webpack:///./src/views/reportes/boletines/BoletinPeriodoPromocionado.vue","webpack:///./src/views/reportes/boletines/BoletinPreePromocionado.vue?0481","webpack:///src/views/reportes/boletines/BoletinPreePromocionado.vue","webpack:///./src/views/reportes/boletines/BoletinPreePromocionado.vue?b800","webpack:///./src/views/reportes/boletines/BoletinPreePromocionado.vue","webpack:///./src/views/reportes/boletines/BoletinPreeFinal.vue?40a1","webpack:///src/views/reportes/boletines/BoletinPreeFinal.vue","webpack:///./src/views/reportes/boletines/BoletinPreeFinal.vue?f73e","webpack:///./src/views/reportes/boletines/BoletinPreeFinal.vue","webpack:///./src/views/reportes/boletines/BoletinFinalRural.vue?f7cf","webpack:///src/views/reportes/boletines/BoletinFinalRural.vue","webpack:///./src/views/reportes/boletines/BoletinFinalRural.vue?bc1a","webpack:///./src/views/reportes/boletines/BoletinFinalRural.vue","webpack:///./src/views/reportes/boletines/BoletinFinalGranColombiano.vue?c708","webpack:///src/views/reportes/boletines/BoletinFinalGranColombiano.vue","webpack:///./src/views/reportes/boletines/BoletinFinalGranColombiano.vue?fd15","webpack:///./src/views/reportes/boletines/BoletinFinalGranColombiano.vue","webpack:///./src/views/reportes/boletines/BoletinFinalSandoval.vue?3b43","webpack:///src/views/reportes/boletines/BoletinFinalSandoval.vue","webpack:///./src/views/reportes/boletines/BoletinFinalSandoval.vue?1b91","webpack:///./src/views/reportes/boletines/BoletinFinalSandoval.vue","webpack:///./src/views/reportes/boletines/BoletinFinalJulius.vue?68f8","webpack:///src/views/reportes/boletines/BoletinFinalJulius.vue","webpack:///./src/views/reportes/boletines/BoletinFinalJulius.vue?9d09","webpack:///./src/views/reportes/boletines/BoletinFinalJulius.vue","webpack:///./src/views/reportes/boletines/BoletinFinalInem.vue?7ac5","webpack:///src/views/reportes/boletines/BoletinFinalInem.vue","webpack:///./src/views/reportes/boletines/BoletinFinalInem.vue?527e","webpack:///./src/views/reportes/boletines/BoletinFinalInem.vue","webpack:///./src/views/reportes/boletines/BoletinFinalEnslap.vue?373a","webpack:///src/views/reportes/boletines/BoletinFinalEnslap.vue","webpack:///./src/views/reportes/boletines/BoletinFinalEnslap.vue?805f","webpack:///./src/views/reportes/boletines/BoletinFinalEnslap.vue","webpack:///./src/views/reportes/boletines/BoletinFinalEmiliani.vue?c0c1","webpack:///src/views/reportes/boletines/BoletinFinalEmiliani.vue","webpack:///./src/views/reportes/boletines/BoletinFinalEmiliani.vue?65ed","webpack:///./src/views/reportes/boletines/BoletinFinalEmiliani.vue","webpack:///./src/views/reportes/boletines/BoletinFinalSantiago.vue?8f7b","webpack:///src/views/reportes/boletines/BoletinFinalSantiago.vue","webpack:///./src/views/reportes/boletines/BoletinFinalSantiago.vue?fe23","webpack:///./src/views/reportes/boletines/BoletinFinalSantiago.vue","webpack:///./src/views/reportes/boletines/BoletinFinalGustavo.vue?065e","webpack:///src/views/reportes/boletines/BoletinFinalGustavo.vue","webpack:///./src/views/reportes/boletines/BoletinFinalGustavo.vue?cff4","webpack:///./src/views/reportes/boletines/BoletinFinalGustavo.vue","webpack:///./src/views/reportes/boletines/BoletinFinalLibertador.vue?485a","webpack:///src/views/reportes/boletines/BoletinFinalLibertador.vue","webpack:///./src/views/reportes/boletines/BoletinFinalLibertador.vue?5df2","webpack:///./src/views/reportes/boletines/BoletinFinalLibertador.vue","webpack:///./src/views/reportes/boletines/BoletinFinalSilvino.vue?cc62","webpack:///src/views/reportes/boletines/BoletinFinalSilvino.vue","webpack:///./src/views/reportes/boletines/BoletinFinalSilvino.vue?8871","webpack:///./src/views/reportes/boletines/BoletinFinalSilvino.vue","webpack:///./src/views/reportes/boletines/BoletinFinalGonzalo.vue?9132","webpack:///src/views/reportes/boletines/BoletinFinalGonzalo.vue","webpack:///./src/views/reportes/boletines/BoletinFinalGonzalo.vue?adeb","webpack:///./src/views/reportes/boletines/BoletinFinalGonzalo.vue","webpack:///./src/views/reportes/boletines/BoletinFinal.vue?be4c","webpack:///src/views/reportes/boletines/BoletinFinal.vue","webpack:///./src/views/reportes/boletines/BoletinFinal.vue?61ad","webpack:///./src/views/reportes/boletines/BoletinFinal.vue","webpack:///src/views/reportes/Boletines.vue","webpack:///./src/views/reportes/Boletines.vue?77a6","webpack:///./src/views/reportes/Boletines.vue","webpack:///./node_modules/regenerator-runtime/runtime.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","_v","proxy","ref","ariaDescribedby","on","$event","idPeriodo","idSede","idCurso","model","callback","$$v","idBoletin","expression","comboPeriodos","mostrarBoletines","comboSedes","ocuparComboCursosSede","comboCursosSede","consultarEstudiantes","idNivel","estudiantesSeleccionados","listaAreasAsignaturas","listaDescriptores","notas","datosEstudiantes","Number","$store","state","aLectivo","periodosVisibles","nombreSede","nombreCurso","nombrePeriodo","nombreJornada","nombreDirector","umbralesA","umbralesT","pesosPeriodos","tipoValComp","promCompor","escalaPreescolar","nuevaEscalaPreescolar","firmasBoletin","_e","idInstitucion","letrasCompor","descC1","descC2","descC3","idGrado","listaHabilitaciones","staticStyle","encabColumnas","enabled","selectionText","clearSelectionText","procesarBoletinesFinales","slot","staticRenderFns","generarPDF","_s","length","name","props","anio","periodoActual","String","data","escudo","asignatur","orden","conceptual","datosSeccion","colDesem","escala","methods","nombreDelArea","tieneNotasAsignatura","asig","periodos","Object","values","some","tieneNotasArea","asignaturas","ventana","document","write","contenido","close","focus","generarHTMLBoletines","html","renderBoletin","cuerpo","renderCuerpoTabla","areas","map","c1","c2","c3","prom","def","rec","final","notasArea","promArea","finalArea","estilosBoletin","descriptorAsignatura","datos","meta","pd","concep","inclusion","ordencito","notaFinal","parseFloat","est","area","asignatura","periodo","isNaN","conceptoValorativo","umbralBajo","desempeno","nota","valor","umbralBasico","umbralAlto","umbralSuperior","notaFinalArea","asigns","filter","forEach","total","porcentaje","redondear","toFixed","calcularPromedioGeneralPorAreasFinales","areasEvaluativas","cantidad","generarRankingCurso","entries","estudiantesNotas","promedio","ranking","push","sort","i","puesto","puestoEstudiante","definitivaPeriodo","findIndex","recuperacion","promedioAsignatura","cant","promedioLetras","promedioArea","promedioAreaPorPeriodo","sum","ausencias","ausenciasArea","reduce","intensidadHorariaAsignatura","intensidadHorariaArea","notaPeriodo","criterio1Periodo","criterio2Periodo","criterio3Periodo","observacionComportamiento","compo","estructurarNotasPorEstudiante","mapa","estudiante","documento","ausJ","ausS","intensidadHoraria","docente","definitivas","recuperaciones","definitiva","C1","C2","C3","definitivacompor","fechaR","observaciones","m","Math","abs","num","toPrecision","round","sign","computed","beforeMount","escudoInstitucion","daneInstitucion","datosSecciones","idSeccion","component","estConceptual","id_conceptual","generarHTMLBoletinPreescolar","valorNumericoDesdeLetra","letra","conceptoDesdeValor","siguiente","umbral","id_concepto_valorativo","actual","texto","letraDesdeValor","datosDesempenoPorLetra","desempe","emoji","color","index","mapaEmoji","descriptorDesdeLetraFlexible","concepto","pesoTotal","promedioAreaPorAsignaturas","valores","promedioAsignaturaPreescolar","notaFinalAreaPreescolar","promedioGeneralPreescolar","puestoEstudiantePreescolar","lista","getEmojiPromedio","promedioAreaPorPeriodoComportamiento","definitivapree","obsRetiro","motivo","fechaRetiro","obs_final","fechaReubica","fechaPromo","tipoArea","perdioPorHabilitacion","habilit","habilitacion","mostrarHabilitacion","desempenoArea","estadosFinalesEstudiante","idTipoEspecialidadArea","cantPerdidas","promedioAsignaturaDefinitivo","promedioFinalArea","idMatricula","idAsignaturaCurso","convenciones","letraNota","cantAreas","siHabilito","observaFinales","observacionComision","observacion","perdioPorFallas","runtime","exports","Op","prototype","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","method","AsyncIterator","PromiseImpl","invoke","record","result","__await","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function"],"mappings":"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","file":"js/chunk-5e4aa044.4595b340.js","sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-row',{staticClass:\"mt-2\"},[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('b-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h5',{staticClass:\"mb-0\"},[_c('b-icon',{attrs:{\"icon\":\"card-checklist\",\"aria-hidden\":\"true\"}}),_vm._v(\" BOLETINES DE EVALUACIN\")],1)]},proxy:true}])},[_c('b-card-text',[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('b-card',{attrs:{\"bg-variant\":\"light\",\"text-variant\":\"\"}},[_c('b-card-text',[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"4\"}},[_c('h6',[_vm._v(\"Por Periodo\")]),_c('b-form-group',{attrs:{\"label\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar ariaDescribedby = ref.ariaDescribedby;\nreturn [_c('b-form-radio',{attrs:{\"aria-describedby\":ariaDescribedby,\"name\":\"some-radios\",\"value\":\"1\"},on:{\"change\":function($event){_vm.idPeriodo=null,_vm.idSede=null,_vm.idCurso=null}},model:{value:(_vm.idBoletin),callback:function ($$v) {_vm.idBoletin=$$v},expression:\"idBoletin\"}},[_vm._v(\"Boletines por periodo\")]),_c('b-form-radio',{attrs:{\"aria-describedby\":ariaDescribedby,\"name\":\"some-radios\",\"value\":\"2\"},on:{\"change\":function($event){_vm.idPeriodo=null,_vm.idSede=null,_vm.idCurso=null}},model:{value:(_vm.idBoletin),callback:function ($$v) {_vm.idBoletin=$$v},expression:\"idBoletin\"}},[_vm._v(\"Boletines retirados\")]),_c('b-form-radio',{attrs:{\"aria-describedby\":ariaDescribedby,\"name\":\"some-radios\",\"value\":\"3\"},on:{\"change\":function($event){_vm.idPeriodo=null,_vm.idSede=null,_vm.idCurso=null}},model:{value:(_vm.idBoletin),callback:function ($$v) {_vm.idBoletin=$$v},expression:\"idBoletin\"}},[_vm._v(\"Boletines ubicados/reubicados\")]),_c('b-form-radio',{attrs:{\"aria-describedby\":ariaDescribedby,\"name\":\"some-radios\",\"value\":\"4\"},on:{\"change\":function($event){_vm.idPeriodo=null,_vm.idSede=null,_vm.idCurso=null}},model:{value:(_vm.idBoletin),callback:function ($$v) {_vm.idBoletin=$$v},expression:\"idBoletin\"}},[_vm._v(\"Boletines promocionados anticipadamente\")])]}}])})],1),_c('b-col',{attrs:{\"lg\":\"4\"}},[_c('h6',[_vm._v(\"Boletines Finales\")]),_c('b-form-group',{attrs:{\"label\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar ariaDescribedby = ref.ariaDescribedby;\nreturn [_c('b-form-radio',{attrs:{\"aria-describedby\":ariaDescribedby,\"name\":\"some-radios\",\"value\":\"10\"},model:{value:(_vm.idBoletin),callback:function ($$v) {_vm.idBoletin=$$v},expression:\"idBoletin\"}},[_vm._v(\"Boletines Finales\")])]}}])})],1)],1)],1)],1)],1)],1),(_vm.idBoletin==1)?_c('b-row',[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('b-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h5',{staticClass:\"mb-0\"},[_c('b-icon',{attrs:{\"icon\":\"card-checklist\",\"aria-hidden\":\"true\"}}),_vm._v(\" BOLETINES POR PERIODO\")],1)]},proxy:true}],null,false,1650966164)},[_c('b-card-text',[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"2\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Periodo:\",\"label-for\":\"periodo\"}},[_c('b-form-select',{ref:\"periodo\",attrs:{\"id\":\"periodo\",\"options\":_vm.comboPeriodos},on:{\"change\":function($event){_vm.idSede=null,_vm.idCurso=null,_vm.mostrarBoletines=null}},model:{value:(_vm.idPeriodo),callback:function ($$v) {_vm.idPeriodo=$$v},expression:\"idPeriodo\"}})],1)],1),_c('b-col',{attrs:{\"lg\":\"6\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione la Sede:\",\"label-for\":\"sedes\"}},[_c('b-form-select',{ref:\"sedes\",attrs:{\"id\":\"sedes\",\"options\":_vm.comboSedes,\"disabled\":_vm.idPeriodo!=null ? false : true},on:{\"change\":function($event){_vm.idCurso=null,_vm.ocuparComboCursosSede(),_vm.mostrarBoletines=null}},model:{value:(_vm.idSede),callback:function ($$v) {_vm.idSede=$$v},expression:\"idSede\"}})],1)],1),_c('b-col',{attrs:{\"lg\":\"4\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione el Curso:\",\"label-for\":\"cursos\"}},[_c('b-form-select',{ref:\"cursos\",attrs:{\"id\":\"cursos\",\"options\":_vm.comboCursosSede,\"disabled\":_vm.idSede!=null ? false : true},on:{\"change\":function($event){_vm.consultarEstudiantes(),_vm.mostrarBoletines=null}},model:{value:(_vm.idCurso),callback:function ($$v) {_vm.idCurso=$$v},expression:\"idCurso\"}})],1)],1)],1)],1)],1),(_vm.idNivel == 1)?_c('div',[(_vm.mostrarBoletines)?_c('BoletinPree',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"escalaPreescolar\":_vm.escalaPreescolar,\"nuevaEscalaPreescolar\":_vm.nuevaEscalaPreescolar,\"firmasBoletin\":_vm.firmasBoletin}}):_vm._e()],1):_c('div',[(_vm.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinPeriodoInem',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == '660fa760-fc83-11ec-a1d1-1dc2835404e5')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinPeriodoGranColombiano',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinPeriodoGustavoRojas',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinPeriodoJulius',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinPeriodoEmiliani',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):_c('span',[(_vm.mostrarBoletines)?_c('BoletinPeriodo',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3}}):_vm._e()],1)])],1)],1):_vm._e(),(_vm.idBoletin==2)?_c('b-row',[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('b-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h5',{staticClass:\"mb-0\"},[_c('b-icon',{attrs:{\"icon\":\"card-checklist\",\"aria-hidden\":\"true\"}}),_vm._v(\" BOLETINES POR PERIODO\")],1)]},proxy:true}],null,false,1650966164)},[_c('b-card-text',[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"2\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Periodo:\",\"label-for\":\"periodo\"}},[_c('b-form-select',{ref:\"periodo\",attrs:{\"id\":\"periodo\",\"options\":_vm.comboPeriodos},on:{\"change\":function($event){_vm.idSede=null,_vm.idCurso=null,_vm.mostrarBoletines=null}},model:{value:(_vm.idPeriodo),callback:function ($$v) {_vm.idPeriodo=$$v},expression:\"idPeriodo\"}})],1)],1),_c('b-col',{attrs:{\"lg\":\"6\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione la Sede:\",\"label-for\":\"sedes\"}},[_c('b-form-select',{ref:\"sedes\",attrs:{\"id\":\"sedes\",\"options\":_vm.comboSedes,\"disabled\":_vm.idPeriodo!=null ? false : true},on:{\"change\":function($event){_vm.idCurso=null,_vm.ocuparComboCursosSede(),_vm.mostrarBoletines=null}},model:{value:(_vm.idSede),callback:function ($$v) {_vm.idSede=$$v},expression:\"idSede\"}})],1)],1),_c('b-col',{attrs:{\"lg\":\"4\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione el Curso:\",\"label-for\":\"cursos\"}},[_c('b-form-select',{ref:\"cursos\",attrs:{\"id\":\"cursos\",\"options\":_vm.comboCursosSede,\"disabled\":_vm.idSede!=null ? false : true},on:{\"change\":function($event){_vm.consultarEstudiantes(),_vm.mostrarBoletines=null}},model:{value:(_vm.idCurso),callback:function ($$v) {_vm.idCurso=$$v},expression:\"idCurso\"}})],1)],1)],1)],1)],1),(_vm.idNivel == 1)?_c('div',[(_vm.mostrarBoletines)?_c('BoletinPreeRetirado',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"escalaPreescolar\":_vm.escalaPreescolar,\"nuevaEscalaPreescolar\":_vm.nuevaEscalaPreescolar,\"firmasBoletin\":_vm.firmasBoletin}}):_vm._e()],1):_c('div',[(_vm.mostrarBoletines)?_c('BoletinPeriodoRetirado',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin}}):_vm._e()],1)],1)],1):_vm._e(),(_vm.idBoletin==3)?_c('b-row',[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('b-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h5',{staticClass:\"mb-0\"},[_c('b-icon',{attrs:{\"icon\":\"card-checklist\",\"aria-hidden\":\"true\"}}),_vm._v(\" BOLETINES POR PERIODO\")],1)]},proxy:true}],null,false,1650966164)},[_c('b-card-text',[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"2\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Periodo:\",\"label-for\":\"periodo\"}},[_c('b-form-select',{ref:\"periodo\",attrs:{\"id\":\"periodo\",\"options\":_vm.comboPeriodos},on:{\"change\":function($event){_vm.idSede=null,_vm.idCurso=null,_vm.mostrarBoletines=null}},model:{value:(_vm.idPeriodo),callback:function ($$v) {_vm.idPeriodo=$$v},expression:\"idPeriodo\"}})],1)],1),_c('b-col',{attrs:{\"lg\":\"6\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione la Sede:\",\"label-for\":\"sedes\"}},[_c('b-form-select',{ref:\"sedes\",attrs:{\"id\":\"sedes\",\"options\":_vm.comboSedes,\"disabled\":_vm.idPeriodo!=null ? false : true},on:{\"change\":function($event){_vm.idCurso=null,_vm.ocuparComboCursosSede(),_vm.mostrarBoletines=null}},model:{value:(_vm.idSede),callback:function ($$v) {_vm.idSede=$$v},expression:\"idSede\"}})],1)],1),_c('b-col',{attrs:{\"lg\":\"4\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione el Curso:\",\"label-for\":\"cursos\"}},[_c('b-form-select',{ref:\"cursos\",attrs:{\"id\":\"cursos\",\"options\":_vm.comboCursosSede,\"disabled\":_vm.idSede!=null ? false : true},on:{\"change\":function($event){_vm.consultarEstudiantes(),_vm.mostrarBoletines=null}},model:{value:(_vm.idCurso),callback:function ($$v) {_vm.idCurso=$$v},expression:\"idCurso\"}})],1)],1)],1)],1)],1),(_vm.idNivel == 1)?_c('div',[(_vm.mostrarBoletines)?_c('BoletinPreeReubicado',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"escalaPreescolar\":_vm.escalaPreescolar,\"nuevaEscalaPreescolar\":_vm.nuevaEscalaPreescolar,\"firmasBoletin\":_vm.firmasBoletin}}):_vm._e()],1):_c('div',[(_vm.mostrarBoletines)?_c('BoletinPeriodoReubicado',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin}}):_vm._e()],1)],1)],1):_vm._e(),(_vm.idBoletin==4)?_c('b-row',[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('b-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h5',{staticClass:\"mb-0\"},[_c('b-icon',{attrs:{\"icon\":\"card-checklist\",\"aria-hidden\":\"true\"}}),_vm._v(\" BOLETINES POR PERIODO\")],1)]},proxy:true}],null,false,1650966164)},[_c('b-card-text',[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"2\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Periodo:\",\"label-for\":\"periodo\"}},[_c('b-form-select',{ref:\"periodo\",attrs:{\"id\":\"periodo\",\"options\":_vm.comboPeriodos},on:{\"change\":function($event){_vm.idSede=null,_vm.idCurso=null,_vm.mostrarBoletines=null}},model:{value:(_vm.idPeriodo),callback:function ($$v) {_vm.idPeriodo=$$v},expression:\"idPeriodo\"}})],1)],1),_c('b-col',{attrs:{\"lg\":\"6\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione la Sede:\",\"label-for\":\"sedes\"}},[_c('b-form-select',{ref:\"sedes\",attrs:{\"id\":\"sedes\",\"options\":_vm.comboSedes,\"disabled\":_vm.idPeriodo!=null ? false : true},on:{\"change\":function($event){_vm.idCurso=null,_vm.ocuparComboCursosSede(),_vm.mostrarBoletines=null}},model:{value:(_vm.idSede),callback:function ($$v) {_vm.idSede=$$v},expression:\"idSede\"}})],1)],1),_c('b-col',{attrs:{\"lg\":\"4\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione el Curso:\",\"label-for\":\"cursos\"}},[_c('b-form-select',{ref:\"cursos\",attrs:{\"id\":\"cursos\",\"options\":_vm.comboCursosSede,\"disabled\":_vm.idSede!=null ? false : true},on:{\"change\":function($event){_vm.consultarEstudiantes(),_vm.mostrarBoletines=null}},model:{value:(_vm.idCurso),callback:function ($$v) {_vm.idCurso=$$v},expression:\"idCurso\"}})],1)],1)],1)],1)],1),(_vm.idNivel == 1)?_c('div',[(_vm.mostrarBoletines)?_c('BoletinPreePromocionado',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"escalaPreescolar\":_vm.escalaPreescolar,\"nuevaEscalaPreescolar\":_vm.nuevaEscalaPreescolar,\"firmasBoletin\":_vm.firmasBoletin}}):_vm._e()],1):_c('div',[(_vm.mostrarBoletines)?_c('BoletinPeriodoPromocionado',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin}}):_vm._e()],1)],1)],1):_vm._e(),(_vm.idBoletin==10)?_c('b-row',[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('b-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h5',{staticClass:\"mb-0\"},[_c('b-icon',{attrs:{\"icon\":\"card-checklist\",\"aria-hidden\":\"true\"}}),_vm._v(\" BOLETINES DEFINITIVOS\")],1)]},proxy:true}],null,false,4181071821)},[_c('b-card-text',[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"6\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione la Sede:\",\"label-for\":\"sedes\"}},[_c('b-form-select',{ref:\"sedes\",attrs:{\"id\":\"sedes\",\"options\":_vm.comboSedes},on:{\"change\":function($event){_vm.idCurso=null,_vm.ocuparComboCursosSede(),_vm.mostrarBoletines=null}},model:{value:(_vm.idSede),callback:function ($$v) {_vm.idSede=$$v},expression:\"idSede\"}})],1)],1),_c('b-col',{attrs:{\"lg\":\"4\"}},[_c('b-form-group',{staticClass:\"etiqueta\",attrs:{\"label\":\"Seleccione el Curso:\",\"label-for\":\"cursos\"}},[_c('b-form-select',{ref:\"cursos\",attrs:{\"id\":\"cursos\",\"options\":_vm.comboCursosSede,\"disabled\":_vm.idSede!=null ? false : true},on:{\"change\":function($event){_vm.consultarEstudiantes(),_vm.mostrarBoletines=null}},model:{value:(_vm.idCurso),callback:function ($$v) {_vm.idCurso=$$v},expression:\"idCurso\"}})],1)],1)],1)],1)],1),(_vm.idNivel == 1)?_c('div',[(_vm.mostrarBoletines)?_c('BoletinPreeFinal',{attrs:{\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"escalaPreescolar\":_vm.escalaPreescolar,\"nuevaEscalaPreescolar\":_vm.nuevaEscalaPreescolar,\"firmasBoletin\":_vm.firmasBoletin}}):_vm._e()],1):_c('div',[(_vm.$store.state.idInstitucion == '097b7b10-fcaa-11ec-8267-536b07c743c4')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalRural',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3}}):_vm._e()],1):(_vm.$store.state.idInstitucion == '660fa760-fc83-11ec-a1d1-1dc2835404e5')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalGranColombiano',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == '54fd7440-fc81-11ec-a1d1-1dc2835404e5')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalSandoval',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalJulius',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalInem',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == '17ee4f30-fc80-11ec-a1d1-1dc2835404e5')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalEnslap',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalEmiliani',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == '7c63ed50-fcb0-11ec-8267-536b07c743c4')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalSantiago',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalGustavo',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalLibertador',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalSilvino',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):(_vm.$store.state.idInstitucion == 'f0491770-fca8-11ec-8267-536b07c743c4')?_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinalGonzalo',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3,\"idGrado\":_vm.idGrado}}):_vm._e()],1):_c('span',[(_vm.mostrarBoletines)?_c('BoletinFinal',{attrs:{\"listaHabilitaciones\":_vm.listaHabilitaciones,\"estudiantesSeleccionados\":_vm.estudiantesSeleccionados,\"listaAreasAsignaturas\":_vm.listaAreasAsignaturas,\"listaDescriptores\":_vm.listaDescriptores,\"notas\":_vm.notas,\"datosEstudiantes\":_vm.datosEstudiantes,\"anio\":Number(_vm.$store.state.aLectivo),\"periodoActual\":_vm.idPeriodo,\"periodosVisibles\":_vm.periodosVisibles,\"nombreSede\":_vm.nombreSede,\"nombreCurso\":_vm.nombreCurso,\"nombrePeriodo\":_vm.nombrePeriodo,\"nombreJornada\":_vm.nombreJornada,\"nombreDirector\":_vm.nombreDirector,\"idNivel\":_vm.idNivel,\"umbralesA\":_vm.umbralesA,\"umbralesT\":_vm.umbralesT,\"pesosPeriodos\":_vm.pesosPeriodos,\"tipoValComp\":_vm.tipoValComp,\"promCompor\":_vm.promCompor,\"letrasCompor\":_vm.letrasCompor,\"firmasBoletin\":_vm.firmasBoletin,\"descC1\":_vm.descC1,\"descC2\":_vm.descC2,\"descC3\":_vm.descC3}}):_vm._e()],1)])],1)],1):_vm._e(),(_vm.idCurso!=null)?_c('b-row',{staticClass:\"mt-2\"},[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('hr')]),_c('b-col',{attrs:{\"lg\":\"12\"}},[(_vm.btnCargando)?_c('div',[_c('div',{staticClass:\"text-center m-5 text-primary\"},[_c('b-spinner',{staticStyle:{\"width\":\"3rem\",\"height\":\"3rem\"},attrs:{\"label\":\"Spinner\"}}),_c('br'),_c('strong',[_vm._v(\"Cargando planilla...\")])],1)]):_c('div',[_c('vue-good-table',{ref:\"estudiantes\",attrs:{\"columns\":_vm.encabColumnas,\"rows\":_vm.datosEstudiantes,\"styleClass\":\"vgt-table condensed bordered striped\",\"line-numbers\":true,\"select-options\":{enabled: true,selectionText: 'estudiantes seleccionados',clearSelectionText: 'Limpiar',}},on:{\"on-row-click\":function($event){_vm.mostrarBoletines=false}},scopedSlots:_vm._u([{key:\"selected-row-actions\",fn:function(){return [_c('button',{staticClass:\"small btn btn-primary\",on:{\"click\":function($event){return _vm.procesarBoletinesFinales()}}},[_vm._v(\"Procesar Boletines para Impresin\")])]},proxy:true}],null,false,3065040917)},[_c('div',{attrs:{\"slot\":\"emptystate\"},slot:\"emptystate\"},[_c('h5',{staticClass:\"text-danger ml-5\"},[_vm._v(\"No existen estudiantes matriculados\")])])])],1)])],1):_vm._e()],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF - \"+_vm._s(_vm.idGrado))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF - {{idGrado}}</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    idGrado: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo en el Periodo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>${this.descC1}</th>\n                  <th>${this.descC2}</th>\n                  <th>${this.descC3}</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:20%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          let final = ''\n          let notas = ''\n          let c1 = ''\n          let c2 = ''\n          let c3 = ''\n          let prom = ''\n          let def = ''\n          let rec = ''\n          if (this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03') {\n            notas = this.periodosVisibles.map(p => `<td></td>`).join('')\n            c1 = ''\n            c2 = ''\n            c3 = ''\n            prom = ''\n            def = ''\n            rec = ''\n          } else {\n            notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n            c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n            c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n            c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n            prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n            def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n            rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          }\n          final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const des = this.orden !== 98 ? this.desempeno(final, area, a) : '' //this.desempeo(final)\n          if (this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03') final = ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          \n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${c1}</td>\n                <td>${c2}</td>\n                <td>${c3}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"11\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${def}</td>\n                <td>${rec}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        let notasArea = ''\n        let promArea = ''\n        let finalArea = ''\n        if (this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03') {\n          notasArea = this.periodosVisibles.map(p => `<td></td>`).join('')\n          promArea = ''\n        } else {\n          notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n          promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        }\n        finalArea = this.orden !== 98 && this.orden != 99 ? this.notaFinalArea(data, area) : this.orden === 99 ? this.definitivaPeriodo(data, area, this.asignatur, this.periodoActual) : ''\n        const desArea = this.orden !== 98 ? this.desempeno(finalArea, area, this.asignatur) : '' //this.desempeo(finalArea)\n        if (this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03') finalArea = ''\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, asignatura) {\n      if (this.orden == 99) {\n        if (nota == 'I') return 'INSUFICIENTE'\n        if (nota == 'A') return 'ACEPTABLE'\n        if (nota == 'S') return 'SOBRESALIENTE'\n        if (nota == 'E') return 'EXCELENTE'\n        return ''\n      } else {\n        const meta = this.listaAreasAsignaturas.find(\n          a => a.area === area && a.asignatura === asignatura\n        )\n        const tipo = meta?.idTipoEspecialidad || 1\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total / cant).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) || ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    if (this.$store.state.daneInstitucion === '115001002807' || this.$store.state.daneInstitucion === '315001001893' || this.$store.state.daneInstitucion === '115001000430' || this.$store.state.daneInstitucion === '315001001613' || this.$store.state.daneInstitucion === '115001002751' || this.$store.state.daneInstitucion === '115001000367') this.colDesem = 7\n    else this.colDesem = 6\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n    //console.log(JSON.stringify(this.listaAreasAsignaturas))\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoInem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoInem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPeriodoInem.vue?vue&type=template&id=8edef366&scoped=true&\"\nimport script from \"./BoletinPeriodoInem.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPeriodoInem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8edef366\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo en el Periodo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>${this.descC1}</th>\n                  <th>${this.descC2}</th>\n                  <th>${this.descC3}</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:20%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const des = this.orden !== 98 ? this.desempeno(final, area, a) : '' //this.desempeo(final)\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${c1}</td>\n                <td>${c2}</td>\n                <td>${c3}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"11\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${def}</td>\n                <td>${rec}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.notaFinalArea(data, area) : this.orden === 99 ? this.definitivaPeriodo(data, area, this.asignatur, this.periodoActual) : ''\n        const desArea = this.orden !== 98 ? this.desempeno(finalArea, area, this.asignatur) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.9rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const tipo = meta?.idTipoEspecialidad || 1\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total / cant).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) || ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 6\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoGranColombiano.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoGranColombiano.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPeriodoGranColombiano.vue?vue&type=template&id=4deb8693&scoped=true&\"\nimport script from \"./BoletinPeriodoGranColombiano.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPeriodoGranColombiano.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4deb8693\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      estConceptual: null,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      this.estConceptual = estudiante.id_conceptual\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo en el Periodo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>${this.descC1}</th>\n                  <th>${this.descC2}</th>\n                  <th>${this.descC3}</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:20%; text-align: left\">Promedio: <strong>${this.estConceptual == 'N' ? this.calcularPromedioGeneralPorAreasFinales(data) : ''}</strong></th>\n                <th style=\"width:20%; text-align: left\">Puesto: <strong>${this.estConceptual == 'N' ? this.puestoEstudiante(estudiante.nombre) : ''}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const des = this.orden !== 98 ? this.desempeno(final, area, a) : '' //this.desempeo(final)\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${c1}</td>\n                <td>${c2}</td>\n                <td>${c3}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${def}</td>\n                <td>${rec}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.notaFinalArea(data, area) : this.orden === 99 ? this.definitivaPeriodo(data, area, this.asignatur, this.periodoActual) : ''\n        const desArea = this.orden !== 98 ? this.desempeno(finalArea, area, this.asignatur) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (ordencito != 99 && (datos.pd === 'S' || datos.concep === 'S') ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, asignatura) {\n      if (this.orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        if (nota == 'A') return 'Aceptable'\n        if (nota == 'S') return 'Sobresaliente'\n        if (nota == 'E') return 'Excelente'\n        return ''\n      } else {\n        const meta = this.listaAreasAsignaturas.find(\n          a => a.area === area && a.asignatura === asignatura\n        )\n        const tipo = meta?.idTipoEspecialidad || 1\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total / cant).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (this.estConceptual === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) || ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    if (this.$store.state.daneInstitucion === '115001002807' || this.$store.state.daneInstitucion === '315001001893' || this.$store.state.daneInstitucion === '115001000430' || this.$store.state.daneInstitucion === '315001001613' || this.$store.state.daneInstitucion === '115001002751' || this.$store.state.daneInstitucion === '115001000367') this.colDesem = 7\n    else this.colDesem = 6\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoGustavoRojas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoGustavoRojas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPeriodoGustavoRojas.vue?vue&type=template&id=7b3059ce&scoped=true&\"\nimport script from \"./BoletinPeriodoGustavoRojas.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPeriodoGustavoRojas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b3059ce\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF Julius\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF Julius</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo en el Periodo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>${this.descC1}</th>\n                  <th>${this.descC2}</th>\n                  <th>${this.descC3}</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:20%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const des = this.orden !== 98 ? this.desempeno(final, area, a) : '' //this.desempeo(final)\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${c1}</td>\n                <td>${c2}</td>\n                <td>${c3}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"13\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${def}</td>\n                <td>${rec}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.notaFinalArea(data, area) : this.orden === 99 ? this.definitivaPeriodo(data, area, this.asignatur, this.periodoActual) : ''\n        const desArea = this.orden !== 98 ? this.desempeno(finalArea, area, this.asignatur) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, asignatura) {\n      if (this.orden == 99) {\n        if (nota == 'J') return 'Bajo'\n        if (nota == 'B') return 'Bsico'\n        if (nota == 'S') return 'Sobresaliente'\n        if (nota == 'E') return 'Excelente'\n        return ''\n      } else {\n        const meta = this.listaAreasAsignaturas.find(\n          a => a.area === area && a.asignatura === asignatura\n        )\n        const tipo = meta?.idTipoEspecialidad || 1\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total / cant).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) || ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    if (this.$store.state.daneInstitucion === '115001002807' || this.$store.state.daneInstitucion === '315001001893' || this.$store.state.daneInstitucion === '115001000430' || this.$store.state.daneInstitucion === '315001001613' || this.$store.state.daneInstitucion === '115001002751' || this.$store.state.daneInstitucion === '115001000367') this.colDesem = 7\n    else this.colDesem = 6\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoJulius.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoJulius.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPeriodoJulius.vue?vue&type=template&id=2ce64295&scoped=true&\"\nimport script from \"./BoletinPeriodoJulius.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPeriodoJulius.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ce64295\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF Emiliani\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF Emiliani</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo en el Periodo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th style=\"font-size: 8px\">P${p}[${this.pesosPeriodos[p-1]}%]</th>`).join('')}\n                <th>ACUM</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>${this.descC1}</th>\n                  <th>${this.descC2}</th>\n                  <th>${this.descC3}</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:20%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const des = this.orden !== 98 ? this.desempeno(final, area, a) : '' //this.desempeo(final)\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${c1}</td>\n                <td>${c2}</td>\n                <td>${c3}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"13\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${def}</td>\n                <td>${rec}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.notaFinalArea(data, area) : this.orden === 99 ? this.definitivaPeriodo(data, area, this.asignatur, this.periodoActual) : ''\n        const desArea = this.orden !== 98 ? this.desempeno(finalArea, area, this.asignatur) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, asignatura) {\n      if (this.orden == 99) {\n        if (nota == 'A') return 'Anormativo'\n        if (nota == 'P') return 'Persistente'\n        if (nota == 'E') return 'Emptico'\n        if (nota == 'I') return 'Integro'\n        return ''\n      } else {\n        const meta = this.listaAreasAsignaturas.find(\n          a => a.area === area && a.asignatura === asignatura\n        )\n        const tipo = meta?.idTipoEspecialidad || 1\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            //total += nota\n            //cant++\n            total += (nota * this.pesosPeriodos[p-1]) / 100\n          }\n        }\n        //return cant > 0 ? this.redondear(total / cant).toFixed(1) : ''\n        return total > 0 ? this.redondear(total).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) || ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    if (this.$store.state.daneInstitucion === '115001002807' || this.$store.state.daneInstitucion === '315001001893' || this.$store.state.daneInstitucion === '115001000430' || this.$store.state.daneInstitucion === '315001001613' || this.$store.state.daneInstitucion === '115001002751' || this.$store.state.daneInstitucion === '115001000367') this.colDesem = 7\n    else this.colDesem = 6\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoEmiliani.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoEmiliani.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPeriodoEmiliani.vue?vue&type=template&id=64407966&scoped=true&\"\nimport script from \"./BoletinPeriodoEmiliani.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPeriodoEmiliani.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"64407966\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo en el Periodo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>${this.descC1}</th>\n                  <th>${this.descC2}</th>\n                  <th>${this.descC3}</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:20%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const des = this.orden !== 98 ? this.desempeno(final, area, a) : '' //this.desempeo(final)\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${c1}</td>\n                <td>${c2}</td>\n                <td>${c3}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"11\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${def}</td>\n                <td>${rec}</td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.notaFinalArea(data, area) : this.orden === 99 ? this.definitivaPeriodo(data, area, this.asignatur, this.periodoActual) : ''\n        const desArea = this.orden !== 98 ? this.desempeno(finalArea, area, this.asignatur) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const tipo = meta?.idTipoEspecialidad || 1\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total / cant).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) || ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    if (this.$store.state.daneInstitucion === '115001002807' || this.$store.state.daneInstitucion === '315001001893' || this.$store.state.daneInstitucion === '115001000430' || this.$store.state.daneInstitucion === '315001001613' || this.$store.state.daneInstitucion === '115001002751' || this.$store.state.daneInstitucion === '115001000367') this.colDesem = 7\n    else this.colDesem = 6\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPeriodo.vue?vue&type=template&id=2d618e86&scoped=true&\"\nimport script from \"./BoletinPeriodo.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPeriodo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d618e86\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    escalaPreescolar: Object,\n    nuevaEscalaPreescolar: Array,\n    firmasBoletin: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: null\n    }\n  },\n  methods: {\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          ${this.generarHTMLBoletinPreescolar(data)}\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    generarHTMLBoletinPreescolar(est) {\n      const periodos = this.periodosVisibles\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      const nombreArea = area => {\n        const meta = this.listaAreasAsignaturas.find(a => a.area === area)\n        return meta?.nombreArea || area\n      }\n      let html = `\n        <style>\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n          .fila-insuficiente { background-color: #fdecea; }\n          .fila-bueno        { background-color: #fff9db; }\n          .fila-aceptable    { background-color: #eaf4fc; }\n          .fila-sobresaliente{ background-color: #eafaf1; }\n          .resumen-final     { margin-top: 2rem; font-size: 15px; }\n        </style>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th rowspan=\"2\">rea / Asignatura</th>\n              <th rowspan=\"2\">IH</th>\n              <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n              <th colspan=\"4\">Desempeo en el Periodo</th>\n            </tr>\n            <tr>\n              ${periodos.map(p => `<th>P${p}</th>`).join('')}\n              <th>Prom</th>\n              <th>EvalPer</th>\n              <th>Desempeo</th>\n              <th>AusJ</th>\n              <th>AusS</th>\n            </tr>\n          </thead>\n          <tbody>\n      `\n\n      areas.forEach(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area)\n        const notasArea = this.periodosVisibles.map(p => `<td></td>`).join('') //this.periodosVisibles.map(p => `<td>${this.orden !== 99 ? this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, p)) : this.promedioAreaPorPeriodoComportamiento(est, area, p)}</td>`).join('')\n        const desempeo = '' //this.datosDesempenoPorLetra(this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, this.periodoActual)))\n        html += `\n          <tr class=\"fila-area\">\n            <td style=\"text-align: left\"><strong>${nombreArea(area)}</strong></td>\n            <td></td>\n            ${ notasArea }\n            <td></td>\n            <td></td>\n            <td></td> \n            <td></td>\n            <td></td>\n          </tr>\n        `\n        asigns.forEach(({ asignatura, ih, orden, nombreAsignatura, docente }) => {\n          this.orden = orden\n          const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n          if (!datos) return\n          const promedio = this.letraDesdeValor(this.promedioAsignaturaPreescolar(datos))\n          const notaActual = datos.periodos?.[this.periodoActual] || ''\n          const desempeo = this.datosDesempenoPorLetra(notaActual,orden)\n          html += `\n            <tr>\n              <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n              <td>${ih}</td>\n              ${periodos.map(p => `<td>${orden === 98 ? '' : datos.periodos?.[p] || ''}</td>`).join('')}\n              <td>${orden === 98 ? '' : promedio}</td>\n              <td>${orden === 98 ? '' : notaActual}</td>\n              <td>${orden === 98 ? '' : desempeo.texto} </td>\n              <td>${datos.ausJ || 0}</td>\n              <td>${datos.ausS || 0}</td>\n            </tr>\n          `\n          html += `<tr><td colspan=\"10\" class=\"descriptor\" style=\"text-align: left\">${ this.descriptorDesdeLetraFlexible(est, area, asignatura, this.periodoActual, orden)}</td></tr>`\n        })\n      })\n      html += `\n          </tbody>\n        </table>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${est.ausJ}</strong></th>\n              <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${est.ausJ}</strong></th>\n            </tr>\n          </thead>\n        </table>\n      `\n      return html\n    },\n    valorNumericoDesdeLetra(letra,orden) {\n      if (orden==99) {\n        if (this.$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5') { // Julius\n          if (letra == 'J') return 1\n          else if (letra == 'B') return 2\n          else if (letra == 'S') return 3\n          else if (letra == 'E') return 4\n        } else if (this.$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4') { // Gustavo Rojas\n          if (letra == 'I') return 1\n          else if (letra == 'A') return 2\n          else if (letra == 'S') return 3\n          else if (letra == 'E') return 4\n        } else {\n          if (letra == 'J') return 1\n          else if (letra == 'B') return 2\n          else if (letra == 'A') return 3\n          else if (letra == 'S') return 4\n        }\n      } else {\n        const escala = this.nuevaEscalaPreescolar.find(e => e.letra === letra)\n        return escala?.umbral || null\n      }\n    },\n    //ok\n    conceptoDesdeValor(valor) {\n      for (let i = 0; i < this.nuevaEscalaPreescolar.length; i++) {\n        const actual = this.nuevaEscalaPreescolar[i]\n        const siguiente = this.nuevaEscalaPreescolar[i + 1]\n\n        // Valor menor al siguiente umbral, cae en el rango actual\n        if (!siguiente || valor < siguiente.umbral) {\n          return {\n            id_concepto_valorativo: i + 1, // 1=Bajo, 2=Bsico, etc.\n            letra: actual.letra,\n            texto: actual.desempeno\n          }\n        }\n      }\n      return null\n    },\n    letraDesdeValor(valor) {\n      const concepto = this.conceptoDesdeValor(valor)\n      return concepto?.letra || ''\n    },\n    datosDesempenoPorLetra(letra,orden) {\n      let desempe = ''\n      if(orden == 99) {\n        if (this.$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5') { // Julius\n          if (letra == 'J') desempe = 'BAJO'\n          else if (letra == 'B') desempe = 'BSICO'\n          else if (letra == 'S') desempe = 'SOBRESALIENTE'\n          else if (letra == 'E') desempe = 'EXCELENTE'\n        } else if (this.$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4') { // Gustavo Rojas\n          if (letra == 'I') desempe = 'INSUFICIENTE'\n          else if (letra == 'A') desempe = 'ACEPTABLE'\n          else if (letra == 'S') desempe = 'SOBRESALIENTE'\n          else if (letra == 'E') desempe = 'EXCELENTE'\n        } else {\n          desempe = ''\n        }\n        return {\n          emoji: '',\n          texto: desempe,\n          color: '#555' // opcional\n        }\n      } else {\n        const mapaEmoji = ['', '', '', '']\n        const index = this.nuevaEscalaPreescolar.findIndex(e => e.letra === letra)\n        if (index === -1) {\n          return { emoji: '', texto: '', color: '#aaa' }\n        }\n        const escala = this.nuevaEscalaPreescolar[index]\n        return {\n          emoji: mapaEmoji[index],\n          texto: escala.desempeno || 'Sin descripcin',\n          color: this.colorPorIndice?.[index] || '#555' // opcional\n        }\n      }\n    },\n    descriptorDesdeLetraFlexible(est, area, asignatura, periodo, orden) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!meta || !datos) return ''\n\n      if (datos.pd === 'S' || datos.concep === 'S') {\n        return datos.inclusion || ''\n      }\n      const letra = datos.periodos?.[periodo] || ''\n      const valor = this.valorNumericoDesdeLetra(letra,orden)\n      if (valor === null) return ''\n      const concepto = this.conceptoDesdeValor(valor)\n      if (!concepto) return ''\n\n      const descriptorObj = this.listaDescriptores.find(\n        d =>\n          d.idAsignaturaCurso === meta.idAsignaturaCurso &&\n          d.id_concepto_valorativo === concepto.id_concepto_valorativo\n      )\n      return descriptorObj?.descriptor || ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        const letra = datos?.periodos?.[periodo] || ''\n        const valor = this.escalaPreescolar?.[letra]\n\n        if (valor !== undefined) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorAsignaturas(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n\n        const periodos = Object.values(datos.periodos || {})\n        const valores = periodos\n          .map(letra => this.escalaPreescolar?.[letra])\n          .filter(v => v !== undefined)\n\n        if (valores.length > 0) {\n          const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n          total += prom * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioAsignaturaPreescolar(asig) {\n      const periodos = Object.values(asig.periodos || {})\n      const valores = periodos.map(p => this.valorNumericoDesdeLetra(p)).filter(v => v !== null)\n\n      if (!valores.length) return ''\n      const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n      return prom.toFixed(2)\n    },\n    notaFinalAreaPreescolar(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(\n        a => a.area === area && a.orden !== 99\n      )\n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaLetra = datos.periodos?.[this.periodoActual] || ''\n        const valor = this.valorNumericoDesdeLetra(notaLetra)\n        if (valor !== null) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioGeneralPreescolar(est) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      let total = 0, cantidad = 0\n      areas.forEach(area => {\n        const valor = parseFloat(this.notaFinalAreaPreescolar(est, area))\n        if (!isNaN(valor)) {\n          total += valor\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(2) : ''\n    },\n    puestoEstudiantePreescolar(nombre) {\n      const lista = Object.entries(this.estudiantesNotas).map(([n, est]) => ({\n        nombre: n,\n        promedio: parseFloat(this.promedioGeneralPreescolar(est))\n      })).sort((a, b) => b.promedio - a.promedio)\n      let puesto = 1\n      for (let i = 0; i < lista.length; i++) {\n        if (i > 0 && lista[i].promedio === lista[i - 1].promedio) {\n          lista[i].puesto = lista[i - 1].puesto\n        } else {\n          lista[i].puesto = puesto\n        }\n        puesto++\n      }\n      const encontrado = lista.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    getEmojiPromedio(promedio) {\n      if (promedio < 3.5) return ''\n      if (promedio < 4.0) return ''\n      if (promedio < 4.6) return ''\n      return ''\n    },\n\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig || !asig.periodos) return false\n      return true //Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n))\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    desempeno(nota, area, asignatura) {\n      if (this.orden == 99) {\n        if (this.$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5') {\n          if (nota == 'J') return 'BAJO'\n          if (nota == 'B') return 'BSICO'\n          if (nota == 'S') return 'SOBRESALIENTE'\n          if (nota == 'E') return 'EXCELENTE'\n          return ''\n        } else {\n          if (nota == 'J') return 'Bajo'\n          if (nota == 'B') return 'Bsico'\n          if (nota == 'S') return 'Sobresaliente'\n          if (nota == 'E') return 'Excelente'\n          return ''\n        }\n      } else {\n        const meta = this.listaAreasAsignaturas.find(\n          a => a.area === area && a.asignatura === asignatura\n        )\n        const tipo = meta?.idTipoEspecialidad || 1\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return ''       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo] || ''\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.ausencias(est, area, asig, tipo), '')\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0)\n        return nota\n      else\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      const letrasCompor = ['J','B','A','S']\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodoComportamiento(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    intensidadHorariaAsignatura(area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n      return meta?.intensidadHoraria || 0\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(area, asig), 0)\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          definitivacompor,\n          definitivapree,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            definitiva: null,\n            recuperacion: null,\n            definitivacompor: null,\n            definitivapree: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = definitivapree\n          asig.definitivas[periodo] = definitivapree\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivapree\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPree.vue?vue&type=template&id=7c9af53e&scoped=true&\"\nimport script from \"./BoletinPree.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPree.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c9af53e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      datosSeccion: {},\n      orden: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"6\">Desempeo en el Periodo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n                <th>EvP</th>\n                <th>Rec</th>\n                <th>Def</th>\n                <th>Desemp</th>\n                <th>AJ</th>\n                <th>AS</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:20%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const des = this.orden !== 98 ? this.desempeno(final, area, a) : '' //this.desempeo(final)\n          const ausJ = this.orden !== 98 ? this.ausencias(data, area, a, 'ausJ') : ''\n          const ausS = this.orden !== 98 ? this.ausencias(data, area, a, 'ausS') : ''\n          const docente = asig.docente != null ? asig.docente : ''\n\n          return `\n            <tr>\n              <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n              <td>${ih}</td>\n              ${notas}\n              <td>${prom}</td>\n              <td>${def}</td>\n              <td>${rec}</td>\n              <td>${final > 0 ? final : final}</td>\n              <td>${des}</td>\n              <td>${ausJ}</td>\n              <td>${ausS}</td>\n            </tr>\n            <tr><td colspan=\"11\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual)}</td></tr>\n          `\n        }).join('')\n\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.notaFinalArea(data, area) : this.orden === 99 ? this.definitivaPeriodo(data, area, this.asignatur, this.periodoActual) : ''\n        const desArea = this.orden !== 98 ? this.desempeno(finalArea, area, this.asignatur) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden !== 98 ? this.ausenciasArea(data, area, 'ausJ') : ''\n        const ausSArea = this.orden !== 98 ? this.ausenciasArea(data, area, 'ausS') : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n\n        return `\n          <tr class=\"fila-area\">\n            <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n            <td>${ihArea}</td>\n            ${notasArea}\n            <td>${promArea}</td>\n            <td></td><td></td>\n            <td>${finalArea > 0 ? finalArea : finalArea}</td>\n            <td>${desArea}</td>\n            <td>${ausJArea}</td>\n            <td>${ausSArea}</td>\n          </tr>\n          ${filasAsignaturas}\n        `\n      }).join('')\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n\n      if (!datos || !meta) return ''\n\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S') {\n        return datos.inclusion || ''\n      }\n\n\n      /*\n      // Buscar metadatos de la asignatura\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!meta) return ''\n      */\n      // Obtener la nota final del estudiante\n      const notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const tipo = meta?.idTipoEspecialidad || 1\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0)\n        return nota\n      else\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total / cant).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo] || ''\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.ausencias(est, area, asig, tipo), '')\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return 'ESTUDIANTE RETIRADO. | Motivo del Retiro: ' + datos?.motivo + ' - ' + datos?.obsRetiro + ' | Fecha de Retiro: ' + datos?.fechaRetiro || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          ausJ,\n          ausS,\n          obsRetiro,\n          motivo,\n          fechaRetiro\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            definitiva: null,\n            recuperacion: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            ausJ: 0,\n            ausS: 0,\n            obsRetiro: '',\n            motivo: '',\n            fechaRetiro: ''\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.obsRetiro = obsRetiro\n          asig.motivo = motivo\n          asig.fechaRetiro = fechaRetiro\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.obsRetiro = obsRetiro\n          asig.motivo = motivo\n          asig.fechaRetiro = fechaRetiro\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoRetirado.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoRetirado.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPeriodoRetirado.vue?vue&type=template&id=b21d1ad8&scoped=true&\"\nimport script from \"./BoletinPeriodoRetirado.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPeriodoRetirado.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b21d1ad8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    escalaPreescolar: Object,\n    nuevaEscalaPreescolar: Array,\n    firmasBoletin: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n    }\n  },\n  methods: {\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          ${this.generarHTMLBoletinPreescolar(data)}\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    generarHTMLBoletinPreescolar(est) {\n      const periodos = this.periodosVisibles\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      const nombreArea = area => {\n        const meta = this.listaAreasAsignaturas.find(a => a.area === area)\n        return meta?.nombreArea || area\n      }\n      let html = `\n        <style>\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n          .fila-insuficiente { background-color: #fdecea; }\n          .fila-bueno        { background-color: #fff9db; }\n          .fila-aceptable    { background-color: #eaf4fc; }\n          .fila-sobresaliente{ background-color: #eafaf1; }\n          .resumen-final     { margin-top: 2rem; font-size: 15px; }\n        </style>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th rowspan=\"2\">rea / Asignatura</th>\n              <th rowspan=\"2\">IH</th>\n              <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n              <th colspan=\"4\">Desempeo en el Periodo</th>\n            </tr>\n            <tr>\n              ${periodos.map(p => `<th>P${p}</th>`).join('')}\n              <th>Prom</th>\n              <th>EvalPer</th>\n              <th>Desempeo</th>\n              <th>AusJ</th>\n              <th>AusS</th>\n            </tr>\n          </thead>\n          <tbody>\n      `\n\n      areas.forEach(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area)\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 99 ? this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, p)) : this.promedioAreaPorPeriodoComportamiento(est, area, p)}</td>`).join('')\n        const desempeo = this.datosDesempenoPorLetra(this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, this.periodoActual)))\n        html += `\n          <tr class=\"fila-area\">\n            <td style=\"text-align: left\"><strong>${nombreArea(area)}</strong></td>\n            <td></td>\n            ${ notasArea }\n            <td>${this.letraDesdeValor(this.promedioAreaPorAsignaturas(est, area))}</td>\n            <td></td>\n            <td>${desempeo.texto} ${desempeo.emoji}</td>\n            <td></td>\n            <td></td>\n          </tr>\n        `\n        asigns.forEach(({ asignatura, ih, orden, nombreAsignatura, docente }) => {\n          const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n          if (!datos) return\n          const promedio = this.letraDesdeValor(this.promedioAsignaturaPreescolar(datos))\n          const notaActual = datos.periodos?.[this.periodoActual] || ''\n          const desempeo = this.datosDesempenoPorLetra(notaActual)\n          html += `\n            <tr>\n              <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n              <td>${ih}</td>\n              ${periodos.map(p => `<td>${datos.periodos?.[p] || ''}</td>`).join('')}\n              <td>${promedio}</td>\n              <td>${notaActual}</td>\n              <td>${desempeo.texto} </td>\n              <td>${datos.ausJ || 0}</td>\n              <td>${datos.ausS || 0}</td>\n            </tr>\n          `\n          html += `<tr><td colspan=\"9\" class=\"descriptor\" style=\"text-align: left\">${ this.descriptorDesdeLetraFlexible(est, area, asignatura, this.periodoActual)}</td></tr>`\n        })\n      })\n      html += `\n          </tbody>\n        </table>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${est.ausJ}</strong></th>\n              <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${est.ausJ}</strong></th>\n            </tr>\n          </thead>\n        </table>\n      `\n      return html\n    },\n    valorNumericoDesdeLetra(letra) {\n      const escala = this.nuevaEscalaPreescolar.find(e => e.letra === letra)\n      return escala?.umbral || null\n    },\n    //ok\n    conceptoDesdeValor(valor) {\n      for (let i = 0; i < this.nuevaEscalaPreescolar.length; i++) {\n        const actual = this.nuevaEscalaPreescolar[i]\n        const siguiente = this.nuevaEscalaPreescolar[i + 1]\n\n        // Valor menor al siguiente umbral, cae en el rango actual\n        if (!siguiente || valor < siguiente.umbral) {\n          return {\n            id_concepto_valorativo: i + 1, // 1=Bajo, 2=Bsico, etc.\n            letra: actual.letra,\n            texto: actual.desempeno\n          }\n        }\n      }\n      return null\n    },\n    letraDesdeValor(valor) {\n      const concepto = this.conceptoDesdeValor(valor)\n      return concepto?.letra || ''\n    },\n    datosDesempenoPorLetra(letra) {\n      const mapaEmoji = ['', '', '', '']\n      \n      const index = this.nuevaEscalaPreescolar.findIndex(e => e.letra === letra)\n      if (index === -1) {\n        return { emoji: '', texto: '', color: '#aaa' }\n      }\n\n      const escala = this.nuevaEscalaPreescolar[index]\n      return {\n        emoji: mapaEmoji[index],\n        texto: escala.desempeno || 'Sin descripcin',\n        color: this.colorPorIndice?.[index] || '#555' // opcional\n      }\n    },\n    descriptorDesdeLetraFlexible(est, area, asignatura, periodo) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!meta || !datos) return ''\n\n      if (datos.pd === 'S') {\n        return datos.inclusion || ''\n      }\n      const letra = datos.periodos?.[periodo] || ''\n      const valor = this.valorNumericoDesdeLetra(letra)\n      if (valor === null) return ''\n      const concepto = this.conceptoDesdeValor(valor)\n      if (!concepto) return ''\n\n      const descriptorObj = this.listaDescriptores.find(\n        d =>\n          d.idAsignaturaCurso === meta.idAsignaturaCurso &&\n          d.id_concepto_valorativo === concepto.id_concepto_valorativo\n      )\n      return descriptorObj?.descriptor || ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        const letra = datos?.periodos?.[periodo] || ''\n        const valor = this.escalaPreescolar?.[letra]\n\n        if (valor !== undefined) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorAsignaturas(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n\n        const periodos = Object.values(datos.periodos || {})\n        const valores = periodos\n          .map(letra => this.escalaPreescolar?.[letra])\n          .filter(v => v !== undefined)\n\n        if (valores.length > 0) {\n          const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n          total += prom * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioAsignaturaPreescolar(asig) {\n      const periodos = Object.values(asig.periodos || {})\n      const valores = periodos.map(p => this.valorNumericoDesdeLetra(p)).filter(v => v !== null)\n\n      if (!valores.length) return ''\n      const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n      return prom.toFixed(2)\n    },\n    notaFinalAreaPreescolar(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(\n        a => a.area === area && a.orden !== 99\n      )\n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaLetra = datos.periodos?.[this.periodoActual] || ''\n        const valor = this.valorNumericoDesdeLetra(notaLetra)\n        if (valor !== null) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioGeneralPreescolar(est) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      let total = 0, cantidad = 0\n      areas.forEach(area => {\n        const valor = parseFloat(this.notaFinalAreaPreescolar(est, area))\n        if (!isNaN(valor)) {\n          total += valor\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(2) : ''\n    },\n    puestoEstudiantePreescolar(nombre) {\n      const lista = Object.entries(this.estudiantesNotas).map(([n, est]) => ({\n        nombre: n,\n        promedio: parseFloat(this.promedioGeneralPreescolar(est))\n      })).sort((a, b) => b.promedio - a.promedio)\n      let puesto = 1\n      for (let i = 0; i < lista.length; i++) {\n        if (i > 0 && lista[i].promedio === lista[i - 1].promedio) {\n          lista[i].puesto = lista[i - 1].puesto\n        } else {\n          lista[i].puesto = puesto\n        }\n        puesto++\n      }\n      const encontrado = lista.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    getEmojiPromedio(promedio) {\n      if (promedio < 3.5) return ''\n      if (promedio < 4.0) return ''\n      if (promedio < 4.6) return ''\n      return ''\n    },\n\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig || !asig.periodos) return false\n      return true //Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n))\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    desempeno(nota, area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const tipo = meta?.idTipoEspecialidad || 1\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return ''       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo] || ''\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.ausencias(est, area, asig, tipo), '')\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0)\n        return nota\n      else\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      const letrasCompor = ['J','B','A','S']\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodoComportamiento(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    intensidadHorariaAsignatura(area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n      return meta?.intensidadHoraria || 0\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(area, asig), 0)\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          definitivacompor,\n          definitivapree,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            definitiva: null,\n            recuperacion: null,\n            definitivacompor: null,\n            definitivapree: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n        } else {\n          asig.periodos[periodo] = definitivapree\n          asig.definitivas[periodo] = definitivapree\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivapree\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPreeRetirado.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPreeRetirado.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPreeRetirado.vue?vue&type=template&id=e395aefa&scoped=true&\"\nimport script from \"./BoletinPreeRetirado.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPreeRetirado.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e395aefa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      datosSeccion: {},\n      orden: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"6\">Desempeo en el Periodo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n                <th>EvP</th>\n                <th>Rec</th>\n                <th>Def</th>\n                <th>Desemp</th>\n                <th>AJ</th>\n                <th>AS</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:20%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const des = this.orden !== 98 ? this.desempeno(final, area, a) : '' //this.desempeo(final)\n          const ausJ = this.orden !== 98 ? this.ausencias(data, area, a, 'ausJ') : ''\n          const ausS = this.orden !== 98 ? this.ausencias(data, area, a, 'ausS') : ''\n          const docente = asig.docente != null ? asig.docente : ''\n\n          return `\n            <tr>\n              <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n              <td>${ih}</td>\n              ${notas}\n              <td>${prom}</td>\n              <td>${def}</td>\n              <td>${rec}</td>\n              <td>${final > 0 ? final : final}</td>\n              <td>${des}</td>\n              <td>${ausJ}</td>\n              <td>${ausS}</td>\n            </tr>\n            <tr><td colspan=\"11\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual)}</td></tr>\n          `\n        }).join('')\n\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.notaFinalArea(data, area) : this.orden === 99 ? this.definitivaPeriodo(data, area, this.asignatur, this.periodoActual) : ''\n        const desArea = this.orden !== 98 ? this.desempeno(finalArea, area, this.asignatur) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden !== 98 ? this.ausenciasArea(data, area, 'ausJ') : ''\n        const ausSArea = this.orden !== 98 ? this.ausenciasArea(data, area, 'ausS') : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n\n        return `\n          <tr class=\"fila-area\">\n            <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n            <td>${ihArea}</td>\n            ${notasArea}\n            <td>${promArea}</td>\n            <td></td><td></td>\n            <td>${finalArea > 0 ? finalArea : finalArea}</td>\n            <td>${desArea}</td>\n            <td>${ausJArea}</td>\n            <td>${ausSArea}</td>\n          </tr>\n          ${filasAsignaturas}\n        `\n      }).join('')\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n\n      if (!datos || !meta) return ''\n\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S') {\n        return datos.inclusion || ''\n      }\n\n\n      /*\n      // Buscar metadatos de la asignatura\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!meta) return ''\n      */\n      // Obtener la nota final del estudiante\n      const notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const tipo = meta?.idTipoEspecialidad || 1\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0)\n        return nota\n      else\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total / cant).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo] || ''\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.ausencias(est, area, asig, tipo), '')\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return 'ESTUDIANTE UBICADO/REUBICADO. | Acto Administrativo: ' + datos?.obs_final + ' | Fecha Registro: ' + datos?.fechaReubica || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          ausJ,\n          ausS,\n          obs_final,\n          fechaReubica\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            definitiva: null,\n            recuperacion: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            ausJ: 0,\n            ausS: 0,\n            obs_final: '',\n            fechaReubica: ''\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.obsRetiro = obsRetiro\n          asig.motivo = motivo\n          asig.fechaRetiro = fechaRetiro\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.obs_final = obs_final\n          asig.fechaReubica = fechaReubica\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoReubicado.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoReubicado.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPeriodoReubicado.vue?vue&type=template&id=beba74f0&scoped=true&\"\nimport script from \"./BoletinPeriodoReubicado.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPeriodoReubicado.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"beba74f0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    escalaPreescolar: Object,\n    nuevaEscalaPreescolar: Array,\n    firmasBoletin: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n    }\n  },\n  methods: {\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          ${this.generarHTMLBoletinPreescolar(data)}\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    generarHTMLBoletinPreescolar(est) {\n      const periodos = this.periodosVisibles\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      const nombreArea = area => {\n        const meta = this.listaAreasAsignaturas.find(a => a.area === area)\n        return meta?.nombreArea || area\n      }\n      let html = `\n        <style>\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n          .fila-insuficiente { background-color: #fdecea; }\n          .fila-bueno        { background-color: #fff9db; }\n          .fila-aceptable    { background-color: #eaf4fc; }\n          .fila-sobresaliente{ background-color: #eafaf1; }\n          .resumen-final     { margin-top: 2rem; font-size: 15px; }\n        </style>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th rowspan=\"2\">rea / Asignatura</th>\n              <th rowspan=\"2\">IH</th>\n              <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n              <th colspan=\"4\">Desempeo en el Periodo</th>\n            </tr>\n            <tr>\n              ${periodos.map(p => `<th>P${p}</th>`).join('')}\n              <th>Prom</th>\n              <th>EvalPer</th>\n              <th>Desempeo</th>\n              <th>AusJ</th>\n              <th>AusS</th>\n            </tr>\n          </thead>\n          <tbody>\n      `\n\n      areas.forEach(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area)\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 99 ? this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, p)) : this.promedioAreaPorPeriodoComportamiento(est, area, p)}</td>`).join('')\n        const desempeo = this.datosDesempenoPorLetra(this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, this.periodoActual)))\n        html += `\n          <tr class=\"fila-area\">\n            <td style=\"text-align: left\"><strong>${nombreArea(area)}</strong></td>\n            <td></td>\n            ${ notasArea }\n            <td>${this.letraDesdeValor(this.promedioAreaPorAsignaturas(est, area))}</td>\n            <td></td>\n            <td>${desempeo.texto} ${desempeo.emoji}</td>\n            <td></td>\n            <td></td>\n          </tr>\n        `\n        asigns.forEach(({ asignatura, ih, orden, nombreAsignatura, docente }) => {\n          const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n          if (!datos) return\n          const promedio = this.letraDesdeValor(this.promedioAsignaturaPreescolar(datos))\n          const notaActual = datos.periodos?.[this.periodoActual] || ''\n          const desempeo = this.datosDesempenoPorLetra(notaActual)\n          html += `\n            <tr>\n              <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n              <td>${ih}</td>\n              ${periodos.map(p => `<td>${datos.periodos?.[p] || ''}</td>`).join('')}\n              <td>${promedio}</td>\n              <td>${notaActual}</td>\n              <td>${desempeo.texto} </td>\n              <td>${datos.ausJ || 0}</td>\n              <td>${datos.ausS || 0}</td>\n            </tr>\n          `\n          html += `<tr><td colspan=\"9\" class=\"descriptor\" style=\"text-align: left\">${ this.descriptorDesdeLetraFlexible(est, area, asignatura, this.periodoActual)}</td></tr>`\n        })\n      })\n      html += `\n          </tbody>\n        </table>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${est.ausJ}</strong></th>\n              <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${est.ausJ}</strong></th>\n            </tr>\n          </thead>\n        </table>\n      `\n      return html\n    },\n    valorNumericoDesdeLetra(letra) {\n      const escala = this.nuevaEscalaPreescolar.find(e => e.letra === letra)\n      return escala?.umbral || null\n    },\n    //ok\n    conceptoDesdeValor(valor) {\n      for (let i = 0; i < this.nuevaEscalaPreescolar.length; i++) {\n        const actual = this.nuevaEscalaPreescolar[i]\n        const siguiente = this.nuevaEscalaPreescolar[i + 1]\n\n        // Valor menor al siguiente umbral, cae en el rango actual\n        if (!siguiente || valor < siguiente.umbral) {\n          return {\n            id_concepto_valorativo: i + 1, // 1=Bajo, 2=Bsico, etc.\n            letra: actual.letra,\n            texto: actual.desempeno\n          }\n        }\n      }\n      return null\n    },\n    letraDesdeValor(valor) {\n      const concepto = this.conceptoDesdeValor(valor)\n      return concepto?.letra || ''\n    },\n    datosDesempenoPorLetra(letra) {\n      const mapaEmoji = ['', '', '', '']\n      \n      const index = this.nuevaEscalaPreescolar.findIndex(e => e.letra === letra)\n      if (index === -1) {\n        return { emoji: '', texto: '', color: '#aaa' }\n      }\n\n      const escala = this.nuevaEscalaPreescolar[index]\n      return {\n        emoji: mapaEmoji[index],\n        texto: escala.desempeno || 'Sin descripcin',\n        color: this.colorPorIndice?.[index] || '#555' // opcional\n      }\n    },\n    descriptorDesdeLetraFlexible(est, area, asignatura, periodo) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!meta || !datos) return ''\n\n      if (datos.pd === 'S') {\n        return datos.inclusion || ''\n      }\n      const letra = datos.periodos?.[periodo] || ''\n      const valor = this.valorNumericoDesdeLetra(letra)\n      if (valor === null) return ''\n      const concepto = this.conceptoDesdeValor(valor)\n      if (!concepto) return ''\n\n      const descriptorObj = this.listaDescriptores.find(\n        d =>\n          d.idAsignaturaCurso === meta.idAsignaturaCurso &&\n          d.id_concepto_valorativo === concepto.id_concepto_valorativo\n      )\n      return descriptorObj?.descriptor || ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        const letra = datos?.periodos?.[periodo] || ''\n        const valor = this.escalaPreescolar?.[letra]\n\n        if (valor !== undefined) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorAsignaturas(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n\n        const periodos = Object.values(datos.periodos || {})\n        const valores = periodos\n          .map(letra => this.escalaPreescolar?.[letra])\n          .filter(v => v !== undefined)\n\n        if (valores.length > 0) {\n          const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n          total += prom * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioAsignaturaPreescolar(asig) {\n      const periodos = Object.values(asig.periodos || {})\n      const valores = periodos.map(p => this.valorNumericoDesdeLetra(p)).filter(v => v !== null)\n\n      if (!valores.length) return ''\n      const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n      return prom.toFixed(2)\n    },\n    notaFinalAreaPreescolar(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(\n        a => a.area === area && a.orden !== 99\n      )\n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaLetra = datos.periodos?.[this.periodoActual] || ''\n        const valor = this.valorNumericoDesdeLetra(notaLetra)\n        if (valor !== null) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioGeneralPreescolar(est) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      let total = 0, cantidad = 0\n      areas.forEach(area => {\n        const valor = parseFloat(this.notaFinalAreaPreescolar(est, area))\n        if (!isNaN(valor)) {\n          total += valor\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(2) : ''\n    },\n    puestoEstudiantePreescolar(nombre) {\n      const lista = Object.entries(this.estudiantesNotas).map(([n, est]) => ({\n        nombre: n,\n        promedio: parseFloat(this.promedioGeneralPreescolar(est))\n      })).sort((a, b) => b.promedio - a.promedio)\n      let puesto = 1\n      for (let i = 0; i < lista.length; i++) {\n        if (i > 0 && lista[i].promedio === lista[i - 1].promedio) {\n          lista[i].puesto = lista[i - 1].puesto\n        } else {\n          lista[i].puesto = puesto\n        }\n        puesto++\n      }\n      const encontrado = lista.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    getEmojiPromedio(promedio) {\n      if (promedio < 3.5) return ''\n      if (promedio < 4.0) return ''\n      if (promedio < 4.6) return ''\n      return ''\n    },\n\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig || !asig.periodos) return false\n      return true //Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n))\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    desempeno(nota, area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const tipo = meta?.idTipoEspecialidad || 1\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return ''       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo] || ''\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.ausencias(est, area, asig, tipo), '')\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0)\n        return nota\n      else\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      const letrasCompor = ['J','B','A','S']\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodoComportamiento(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    intensidadHorariaAsignatura(area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n      return meta?.intensidadHoraria || 0\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(area, asig), 0)\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          definitivacompor,\n          definitivapree,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            definitiva: null,\n            recuperacion: null,\n            definitivacompor: null,\n            definitivapree: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n        } else {\n          asig.periodos[periodo] = definitivapree\n          asig.definitivas[periodo] = definitivapree\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivapree\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPreeReubicado.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPreeReubicado.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPreeReubicado.vue?vue&type=template&id=1de50f4b&scoped=true&\"\nimport script from \"./BoletinPreeReubicado.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPreeReubicado.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1de50f4b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF - Promocionados\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF - Promocionados</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      datosSeccion: {},\n      orden: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"6\">Desempeo en el Periodo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n                <th>EvP</th>\n                <th>Rec</th>\n                <th>Def</th>\n                <th>Desemp</th>\n                <th>AJ</th>\n                <th>AS</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:20%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const des = this.orden !== 98 ? this.desempeno(final, area, a) : '' //this.desempeo(final)\n          const ausJ = this.orden !== 98 ? this.ausencias(data, area, a, 'ausJ') : ''\n          const ausS = this.orden !== 98 ? this.ausencias(data, area, a, 'ausS') : ''\n          const docente = asig.docente != null ? asig.docente : ''\n\n          return `\n            <tr>\n              <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n              <td>${ih}</td>\n              ${notas}\n              <td>${prom}</td>\n              <td>${def}</td>\n              <td>${rec}</td>\n              <td>${final > 0 ? final : final}</td>\n              <td>${des}</td>\n              <td>${ausJ}</td>\n              <td>${ausS}</td>\n            </tr>\n            <tr><td colspan=\"11\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, this.periodoActual)}</td></tr>\n          `\n        }).join('')\n\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.notaFinalArea(data, area) : this.orden === 99 ? this.definitivaPeriodo(data, area, this.asignatur, this.periodoActual) : ''\n        const desArea = this.orden !== 98 ? this.desempeno(finalArea, area, this.asignatur) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden !== 98 ? this.ausenciasArea(data, area, 'ausJ') : ''\n        const ausSArea = this.orden !== 98 ? this.ausenciasArea(data, area, 'ausS') : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n\n        return `\n          <tr class=\"fila-area\">\n            <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n            <td>${ihArea}</td>\n            ${notasArea}\n            <td>${promArea}</td>\n            <td></td><td></td>\n            <td>${finalArea > 0 ? finalArea : finalArea}</td>\n            <td>${desArea}</td>\n            <td>${ausJArea}</td>\n            <td>${ausSArea}</td>\n          </tr>\n          ${filasAsignaturas}\n        `\n      }).join('')\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n\n      if (!datos || !meta) return ''\n\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S') {\n        return datos.inclusion || ''\n      }\n\n\n      /*\n      // Buscar metadatos de la asignatura\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!meta) return ''\n      */\n      // Obtener la nota final del estudiante\n      const notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const tipo = meta?.idTipoEspecialidad || 1\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0)\n        return nota\n      else\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total / cant).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo] || ''\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.ausencias(est, area, asig, tipo), '')\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return 'ESTUDIANTE PROMOCIONADO ANTICIPADAMENTE. | Acto Administrativo: ' + datos?.obs_final || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          ausJ,\n          ausS,\n          obs_final,\n          fechaPromo,\n          obsRetiro,\n          motivo,\n          fechaRetiro,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            definitiva: null,\n            recuperacion: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            ausJ: 0,\n            ausS: 0,\n            obs_final: '',\n            fechaPromo: '',\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.obsRetiro = obsRetiro\n          asig.motivo = motivo\n          asig.fechaRetiro = fechaRetiro\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.obs_final = obs_final\n          asig.fechaPromo = fechaPromo\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoPromocionado.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPeriodoPromocionado.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPeriodoPromocionado.vue?vue&type=template&id=34cf500e&scoped=true&\"\nimport script from \"./BoletinPeriodoPromocionado.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPeriodoPromocionado.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34cf500e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    escalaPreescolar: Object,\n    nuevaEscalaPreescolar: Array,\n    firmasBoletin: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n    }\n  },\n  methods: {\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>BOLETIN DE EVALUACIONES POR PERIODO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          ${this.generarHTMLBoletinPreescolar(data)}\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    generarHTMLBoletinPreescolar(est) {\n      const periodos = this.periodosVisibles\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      const nombreArea = area => {\n        const meta = this.listaAreasAsignaturas.find(a => a.area === area)\n        return meta?.nombreArea || area\n      }\n      let html = `\n        <style>\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n          .fila-insuficiente { background-color: #fdecea; }\n          .fila-bueno        { background-color: #fff9db; }\n          .fila-aceptable    { background-color: #eaf4fc; }\n          .fila-sobresaliente{ background-color: #eafaf1; }\n          .resumen-final     { margin-top: 2rem; font-size: 15px; }\n        </style>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th rowspan=\"2\">rea / Asignatura</th>\n              <th rowspan=\"2\">IH</th>\n              <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n              <th colspan=\"4\">Desempeo en el Periodo</th>\n            </tr>\n            <tr>\n              ${periodos.map(p => `<th>P${p}</th>`).join('')}\n              <th>Prom</th>\n              <th>EvalPer</th>\n              <th>Desempeo</th>\n              <th>AusJ</th>\n              <th>AusS</th>\n            </tr>\n          </thead>\n          <tbody>\n      `\n\n      areas.forEach(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area)\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 99 ? this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, p)) : this.promedioAreaPorPeriodoComportamiento(est, area, p)}</td>`).join('')\n        const desempeo = this.datosDesempenoPorLetra(this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, this.periodoActual)))\n        html += `\n          <tr class=\"fila-area\">\n            <td style=\"text-align: left\"><strong>${nombreArea(area)}</strong></td>\n            <td></td>\n            ${ notasArea }\n            <td>${this.letraDesdeValor(this.promedioAreaPorAsignaturas(est, area))}</td>\n            <td></td>\n            <td>${desempeo.texto} ${desempeo.emoji}</td>\n            <td></td>\n            <td></td>\n          </tr>\n        `\n        asigns.forEach(({ asignatura, ih, orden, nombreAsignatura, docente }) => {\n          const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n          if (!datos) return\n          const promedio = this.letraDesdeValor(this.promedioAsignaturaPreescolar(datos))\n          const notaActual = datos.periodos?.[this.periodoActual] || ''\n          const desempeo = this.datosDesempenoPorLetra(notaActual)\n          html += `\n            <tr>\n              <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n              <td>${ih}</td>\n              ${periodos.map(p => `<td>${datos.periodos?.[p] || ''}</td>`).join('')}\n              <td>${promedio}</td>\n              <td>${notaActual}</td>\n              <td>${desempeo.texto} </td>\n              <td>${datos.ausJ || 0}</td>\n              <td>${datos.ausS || 0}</td>\n            </tr>\n          `\n          html += `<tr><td colspan=\"9\" class=\"descriptor\" style=\"text-align: left\">${ this.descriptorDesdeLetraFlexible(est, area, asignatura, this.periodoActual)}</td></tr>`\n        })\n      })\n      html += `\n          </tbody>\n        </table>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${est.ausJ}</strong></th>\n              <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${est.ausJ}</strong></th>\n            </tr>\n          </thead>\n        </table>\n      `\n      return html\n    },\n    valorNumericoDesdeLetra(letra) {\n      const escala = this.nuevaEscalaPreescolar.find(e => e.letra === letra)\n      return escala?.umbral || null\n    },\n    //ok\n    conceptoDesdeValor(valor) {\n      for (let i = 0; i < this.nuevaEscalaPreescolar.length; i++) {\n        const actual = this.nuevaEscalaPreescolar[i]\n        const siguiente = this.nuevaEscalaPreescolar[i + 1]\n\n        // Valor menor al siguiente umbral, cae en el rango actual\n        if (!siguiente || valor < siguiente.umbral) {\n          return {\n            id_concepto_valorativo: i + 1, // 1=Bajo, 2=Bsico, etc.\n            letra: actual.letra,\n            texto: actual.desempeno\n          }\n        }\n      }\n      return null\n    },\n    letraDesdeValor(valor) {\n      const concepto = this.conceptoDesdeValor(valor)\n      return concepto?.letra || ''\n    },\n    datosDesempenoPorLetra(letra) {\n      const mapaEmoji = ['', '', '', '']\n      \n      const index = this.nuevaEscalaPreescolar.findIndex(e => e.letra === letra)\n      if (index === -1) {\n        return { emoji: '', texto: '', color: '#aaa' }\n      }\n\n      const escala = this.nuevaEscalaPreescolar[index]\n      return {\n        emoji: mapaEmoji[index],\n        texto: escala.desempeno || 'Sin descripcin',\n        color: this.colorPorIndice?.[index] || '#555' // opcional\n      }\n    },\n    descriptorDesdeLetraFlexible(est, area, asignatura, periodo) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!meta || !datos) return ''\n\n      if (datos.pd === 'S') {\n        return datos.inclusion || ''\n      }\n      const letra = datos.periodos?.[periodo] || ''\n      const valor = this.valorNumericoDesdeLetra(letra)\n      if (valor === null) return ''\n      const concepto = this.conceptoDesdeValor(valor)\n      if (!concepto) return ''\n\n      const descriptorObj = this.listaDescriptores.find(\n        d =>\n          d.idAsignaturaCurso === meta.idAsignaturaCurso &&\n          d.id_concepto_valorativo === concepto.id_concepto_valorativo\n      )\n      return descriptorObj?.descriptor || ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        const letra = datos?.periodos?.[periodo] || ''\n        const valor = this.escalaPreescolar?.[letra]\n\n        if (valor !== undefined) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorAsignaturas(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n\n        const periodos = Object.values(datos.periodos || {})\n        const valores = periodos\n          .map(letra => this.escalaPreescolar?.[letra])\n          .filter(v => v !== undefined)\n\n        if (valores.length > 0) {\n          const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n          total += prom * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioAsignaturaPreescolar(asig) {\n      const periodos = Object.values(asig.periodos || {})\n      const valores = periodos.map(p => this.valorNumericoDesdeLetra(p)).filter(v => v !== null)\n\n      if (!valores.length) return ''\n      const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n      return prom.toFixed(2)\n    },\n    notaFinalAreaPreescolar(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(\n        a => a.area === area && a.orden !== 99\n      )\n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaLetra = datos.periodos?.[this.periodoActual] || ''\n        const valor = this.valorNumericoDesdeLetra(notaLetra)\n        if (valor !== null) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioGeneralPreescolar(est) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      let total = 0, cantidad = 0\n      areas.forEach(area => {\n        const valor = parseFloat(this.notaFinalAreaPreescolar(est, area))\n        if (!isNaN(valor)) {\n          total += valor\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(2) : ''\n    },\n    puestoEstudiantePreescolar(nombre) {\n      const lista = Object.entries(this.estudiantesNotas).map(([n, est]) => ({\n        nombre: n,\n        promedio: parseFloat(this.promedioGeneralPreescolar(est))\n      })).sort((a, b) => b.promedio - a.promedio)\n      let puesto = 1\n      for (let i = 0; i < lista.length; i++) {\n        if (i > 0 && lista[i].promedio === lista[i - 1].promedio) {\n          lista[i].puesto = lista[i - 1].puesto\n        } else {\n          lista[i].puesto = puesto\n        }\n        puesto++\n      }\n      const encontrado = lista.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    getEmojiPromedio(promedio) {\n      if (promedio < 3.5) return ''\n      if (promedio < 4.0) return ''\n      if (promedio < 4.6) return ''\n      return ''\n    },\n\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig || !asig.periodos) return false\n      return true //Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n))\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    desempeno(nota, area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const tipo = meta?.idTipoEspecialidad || 1\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return ''       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo] || ''\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.ausencias(est, area, asig, tipo), '')\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0)\n        return nota\n      else\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      const letrasCompor = ['J','B','A','S']\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodoComportamiento(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    intensidadHorariaAsignatura(area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n      return meta?.intensidadHoraria || 0\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(area, asig), 0)\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          definitivacompor,\n          definitivapree,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            definitiva: null,\n            recuperacion: null,\n            definitivacompor: null,\n            definitivapree: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n        } else {\n          asig.periodos[periodo] = definitivapree\n          asig.definitivas[periodo] = definitivapree\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivapree\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPreePromocionado.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPreePromocionado.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPreePromocionado.vue?vue&type=template&id=48acbfcd&scoped=true&\"\nimport script from \"./BoletinPreePromocionado.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPreePromocionado.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48acbfcd\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    escalaPreescolar: Object,\n    nuevaEscalaPreescolar: Array,\n    firmasBoletin: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: null\n    }\n  },\n  methods: {\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          ${this.generarHTMLBoletinPreescolar(data)}\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    generarHTMLBoletinPreescolar(est) {\n      const periodos = this.periodosVisibles\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      const nombreArea = area => {\n        const meta = this.listaAreasAsignaturas.find(a => a.area === area)\n        return meta?.nombreArea || area\n      }\n      let html = `\n        <style>\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n          .fila-insuficiente { background-color: #fdecea; }\n          .fila-bueno        { background-color: #fff9db; }\n          .fila-aceptable    { background-color: #eaf4fc; }\n          .fila-sobresaliente{ background-color: #eafaf1; }\n          .resumen-final     { margin-top: 2rem; font-size: 15px; }\n        </style>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th rowspan=\"2\">rea / Asignatura</th>\n              <th rowspan=\"2\">IH</th>\n              <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n              <th colspan=\"4\">Desempeo Definitivo</th>\n            </tr>\n            <tr>\n              ${periodos.map(p => `<th>P${p}</th>`).join('')}\n              <th>Definitiva</th>\n              <th>Desempeo</th>\n              <th>AusJ</th>\n              <th>AusS</th>\n            </tr>\n          </thead>\n          <tbody>\n      `\n\n      areas.forEach(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area)\n        const notasArea = this.periodosVisibles.map(p => `<td></td>`).join('') //this.periodosVisibles.map(p => `<td>${this.orden !== 99 ? this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, p)) : this.promedioAreaPorPeriodoComportamiento(est, area, p)}</td>`).join('')\n        const desempeo = '' //this.datosDesempenoPorLetra(this.letraDesdeValor(this.promedioAreaPorPeriodo(est, area, this.periodoActual)))\n        html += `\n          <tr class=\"fila-area\">\n            <td style=\"text-align: left\"><strong>${nombreArea(area)}</strong></td>\n            <td></td>\n            ${ notasArea }\n            <td></td>\n            <td></td> \n            <td></td>\n            <td></td>\n          </tr>\n        `\n        asigns.forEach(({ asignatura, ih, orden, nombreAsignatura, docente }) => {\n          this.orden = orden\n          const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n          if (!datos) return\n          const promedio = this.letraDesdeValor(this.promedioAsignaturaPreescolar(datos,orden),orden)\n          const notaActual = datos.periodos?.[this.periodoActual] || ''\n          const desempeo = this.datosDesempenoPorLetra(promedio,orden)\n          html += `\n            <tr>\n              <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n              <td>${ih}</td>\n              ${periodos.map(p => `<td>${orden === 98 ? '' : datos.periodos?.[p] != 0 ? datos.periodos?.[p] : '' || ''}</td>`).join('')}\n              <td>${orden === 98 ? '' : promedio}</td>\n              <td>${orden === 98 ? '' : desempeo.texto} </td>\n              <td>${datos.ausJ || 0}</td>\n              <td>${datos.ausS || 0}</td>\n            </tr>\n          `\n          html += `<tr><td colspan=\"10\" class=\"descriptor\" style=\"text-align: left\">${ this.descriptorDesdeLetraFlexible(est, area, asignatura, this.periodoActual, orden)}</td></tr>`\n        })\n      })\n      html += `\n          </tbody>\n        </table>\n        <table class=\"tabla-boletin\">\n          <thead>\n            <tr>\n              <th style=\"width:40%; text-align: left\"><strong>APROB EL GRADO</strong></th>\n              <th style=\"width:30%; text-align: left\">Aus.Justificadas: <strong>${est.ausJ}</strong></th>\n              <th style=\"width:30%; text-align: left\">Aus.SinJustificar: <strong>${est.ausJ}</strong></th>\n            </tr>\n          </thead>\n        </table>\n      `\n      return html\n    },\n    valorNumericoDesdeLetra(letra,orden) {\n      if (orden==99) {\n        if (this.$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5') { // Julius\n          if (letra == 'J') return 2\n          else if (letra == 'B') return 3\n          else if (letra == 'S') return 4\n          else if (letra == 'E') return 5\n          \n        } else if (this.$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4') { // Gustavo Rojas\n          if (letra == 'I') return 2\n          else if (letra == 'A') return 3\n          else if (letra == 'S') return 4\n          else if (letra == 'E') return 5\n        } else {\n          if (letra == 'J') return 2\n          else if (letra == 'B') return 3\n          else if (letra == 'A') return 4\n          else if (letra == 'S') return 5\n        }\n      } else {\n        const escala = this.nuevaEscalaPreescolar.find(e => e.letra === letra)\n        return escala?.umbral || null\n      }\n    },\n    //ok\n    conceptoDesdeValor(valor,orden) {\n      if (orden == 99) {\n        if (this.$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5') { // JULIUS\n          //console.log('* ' + valor)\n          if (valor < 3) {\n            return { id_concepto_valorativo: 1, letra: 'J', texto: 'BAJO' }\n          } else if (valor < 4) {\n            return { id_concepto_valorativo: 2, letra: 'B', texto: 'BSICO' }\n          } else if (valor < 5) {\n            return { id_concepto_valorativo: 3, letra: 'S', texto: 'SOBRESALIENTE' }\n          } else if (valor == 5) {\n            return { id_concepto_valorativo: 4, letra: 'E', texto: 'EXCELENTE' }\n          } else {\n            return ''\n          }\n        } else if (this.$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4') { // GUSTAVO\n          //console.log('* ' + valor)\n          if (valor < 3) {\n            return { id_concepto_valorativo: 1, letra: 'I', texto: 'INSUFICIENTE' }\n          } else if (valor < 4) {\n            return { id_concepto_valorativo: 2, letra: 'A', texto: 'ACEPTABLE' }\n          } else if (valor < 5) {\n            return { id_concepto_valorativo: 3, letra: 'S', texto: 'SOBRESALIENTE' }\n          } else if (valor == 5) {\n            return { id_concepto_valorativo: 4, letra: 'E', texto: 'EXCELENTE' }\n          } else {\n            return ''\n          }\n        } else {\n          if (valor < 3) {\n            return { id_concepto_valorativo: 1, letra: 'J', texto: 'BAJO' }\n          } else if (valor < 4) {\n            return { id_concepto_valorativo: 2, letra: 'B', texto: 'BSICO' }\n          } else if (valor < 5) {\n            return { id_concepto_valorativo: 3, letra: 'S', texto: 'SOBRESALIENTE' }\n          } else if (valor == 5) {\n            return { id_concepto_valorativo: 4, letra: 'E', texto: 'EXCELENTE' }\n          } else {\n            return ''\n          }\n        }\n      } else {\n        for (let i = 0; i < this.nuevaEscalaPreescolar.length; i++) {\n          const actual = this.nuevaEscalaPreescolar[i]\n          const siguiente = this.nuevaEscalaPreescolar[i + 1]\n\n          // Valor menor al siguiente umbral, cae en el rango actual\n          if (!siguiente || valor < siguiente.umbral) {\n            return {\n              id_concepto_valorativo: i + 1, // 1=Bajo, 2=Bsico, etc.\n              letra: actual.letra,\n              texto: actual.desempeno\n            }\n          }\n        }\n      }\n      return null\n    },\n    letraDesdeValor(valor,orden) {\n      const concepto = this.conceptoDesdeValor(valor,orden)\n      if (orden == 99) {\n        //console.log(valor + '-' + concepto?.letra || '')\n      }\n      return concepto?.letra || ''\n    },\n    datosDesempenoPorLetra(letra,orden) {\n      let desempe = ''\n      if(orden == 99) {\n        if (this.$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5') { // Julius\n          if (letra == 'J') desempe = 'BAJO'\n          else if (letra == 'B') desempe = 'BSICO'\n          else if (letra == 'S') desempe = 'SOBRESALIENTE'\n          else if (letra == 'E') desempe = 'EXCELENTE'\n        } else if (this.$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4') { // Gustavo Rojas\n          if (letra == 'I') desempe = 'INSUFICIENTE'\n          else if (letra == 'A') desempe = 'ACEPTABLE'\n          else if (letra == 'S') desempe = 'SOBRESALIENTE'\n          else if (letra == 'E') desempe = 'EXCELENTE'\n        } else {\n          desempe = ''\n        }\n        return {\n          emoji: '',\n          texto: desempe,\n          color: '#555' // opcional\n        }\n      } else {\n        const mapaEmoji = ['', '', '', '']\n        const index = this.nuevaEscalaPreescolar.findIndex(e => e.letra === letra)\n        if (index === -1) {\n          return { emoji: '', texto: '', color: '#aaa' }\n        }\n        const escala = this.nuevaEscalaPreescolar[index]\n        return {\n          emoji: mapaEmoji[index],\n          texto: escala.desempeno || 'Sin descripcin',\n          color: this.colorPorIndice?.[index] || '#555' // opcional\n        }\n      }\n    },\n    descriptorDesdeLetraFlexible(est, area, asignatura, periodo, orden) {\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!meta || !datos) return ''\n\n      if (datos.pd === 'S' || datos.concep === 'S') {\n        return datos.inclusion || ''\n      }\n      const letra = datos.periodos?.[periodo] || ''\n      const valor = this.valorNumericoDesdeLetra(letra,orden)\n      if (valor === null) return ''\n      const concepto = this.conceptoDesdeValor(valor,orden)\n      if (!concepto) return ''\n\n      const descriptorObj = this.listaDescriptores.find(\n        d =>\n          d.idAsignaturaCurso === meta.idAsignaturaCurso &&\n          d.id_concepto_valorativo === concepto.id_concepto_valorativo\n      )\n      return descriptorObj?.descriptor || '*'\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        const letra = datos?.periodos?.[periodo] || ''\n        const valor = this.escalaPreescolar?.[letra]\n\n        if (valor !== undefined) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorAsignaturas(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99)\n      let total = 0\n      let pesoTotal = 0\n\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n\n        const periodos = Object.values(datos.periodos || {})\n        const valores = periodos\n          .map(letra => this.escalaPreescolar?.[letra])\n          .filter(v => v !== undefined)\n\n        if (valores.length > 0) {\n          const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n          total += prom * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioAsignaturaPreescolar(asig,orden) {\n      const periodos = Object.values(asig.periodos || {})\n      //const valores = periodos.map(p => this.valorNumericoDesdeLetra(p,orden)).filter(v => v !== null)\n      const valores = this.valorNumericoDesdeLetra(periodos[4],orden)\n      //if (!valores.length) return ''\n      //const prom = valores.reduce((a, b) => a + b, 0) / valores.length\n      //return prom.toFixed(2)\n      return valores\n    },\n    notaFinalAreaPreescolar(est, area) {\n      const asigns = this.listaAreasAsignaturas.filter(\n        a => a.area === area && a.orden !== 99\n      )\n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(({ asignatura, porcentaje }) => {\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaLetra = datos.periodos?.[this.periodoActual] || ''\n        const valor = this.valorNumericoDesdeLetra(notaLetra)\n        if (valor !== null) {\n          total += valor * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      return pesoTotal > 0 ? total.toFixed(2) : ''\n    },\n    promedioGeneralPreescolar(est) {\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      let total = 0, cantidad = 0\n      areas.forEach(area => {\n        const valor = parseFloat(this.notaFinalAreaPreescolar(est, area))\n        if (!isNaN(valor)) {\n          total += valor\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(2) : ''\n    },\n    puestoEstudiantePreescolar(nombre) {\n      const lista = Object.entries(this.estudiantesNotas).map(([n, est]) => ({\n        nombre: n,\n        promedio: parseFloat(this.promedioGeneralPreescolar(est))\n      })).sort((a, b) => b.promedio - a.promedio)\n      let puesto = 1\n      for (let i = 0; i < lista.length; i++) {\n        if (i > 0 && lista[i].promedio === lista[i - 1].promedio) {\n          lista[i].puesto = lista[i - 1].puesto\n        } else {\n          lista[i].puesto = puesto\n        }\n        puesto++\n      }\n      const encontrado = lista.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    getEmojiPromedio(promedio) {\n      if (promedio < 3.5) return ''\n      if (promedio < 4.0) return ''\n      if (promedio < 4.6) return ''\n      return ''\n    },\n\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig || !asig.periodos) return false\n      return true //Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n))\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    desempeno(nota, area, asignatura) {\n      if (this.orden == 99) {\n        if (this.$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5') { // JULIUS\n          if (nota == 'J') return 'BAJO'\n          if (nota == 'B') return 'BSICO'\n          if (nota == 'S') return 'SOBRESALIENTE'\n          if (nota == 'E') return 'EXCELENTE'\n          return ''\n        } else {\n          if (nota == 'J') return 'Bajo'\n          if (nota == 'B') return 'Bsico'\n          if (nota == 'S') return 'Sobresaliente'\n          if (nota == 'E') return 'Excelente'\n          return ''\n        }\n      } else {\n        const meta = this.listaAreasAsignaturas.find(\n          a => a.area === area && a.asignatura === asignatura\n        )\n        const tipo = meta?.idTipoEspecialidad || 1\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    notaFinalArea(est, area) {\n      /*\n      const asignsx = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asignsx.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignsx]?.orden\n      const asignatura = asignsx.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 1) return this.promedioAreaPorPeriodo(est, area, this.periodoActual) //this.promedioAsignatura(est, area, asignatura)\n*/\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return ''       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    generarRankingCurso() {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n        }\n        puesto++\n      }\n      return ranking\n    },\n    puestoEstudiante(nombre) {\n      const ranking = this.generarRankingCurso()\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo] || ''\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.ausencias(est, area, asig, tipo), '')\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0)\n        return nota\n      else\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      const letrasCompor = ['J','B','A','S']\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return letrasCompor[3]\n        else return promedioLetras\n      } else {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          if (typeof nota === 'number') {\n            total += nota\n            cant++\n          }\n        }\n        return cant > 0 ? this.redondear(total).toFixed(1) : ''\n      }\n      /*   PONDERADO PARA EMILIANI\n      for (const p in asig.periodos) {\n        const nota = asig.periodos[p]\n        if (typeof nota === 'number') {\n          total += (nota * this.pesosPeriodos[p-1]) / 100\n        }\n      }\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      //return this.redondear(total / asigns.length).toFixed(1)\n      /*\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return '0.00'\n      let total = 0\n      asigns.forEach(asig => {\n        if (asig.orden === 99) return '-'\n        total += parseFloat((this.promedioAsignatura(est, area, asig) * asig.porcentaje) / 100)\n      })\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      */\n    },\n    promedioAreaPorPeriodoComportamiento(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n      // return this.redondear(total / asigns.length).toFixed(1)\n    },\n    intensidadHorariaAsignatura(area, asignatura) {\n      const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n      return meta?.intensidadHoraria || 0\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(area, asig), 0)\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          definitivacompor,\n          definitivapree,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            definitiva: null,\n            recuperacion: null,\n            definitivacompor: null,\n            definitivapree: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = definitivapree\n          asig.definitivas[periodo] = definitivapree\n          asig.recuperaciones[periodo] = ''\n          asig.definitiva = definitivapree\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPreeFinal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinPreeFinal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinPreeFinal.vue?vue&type=template&id=136a4ad6&scoped=true&\"\nimport script from \"./BoletinPreeFinal.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinPreeFinal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"136a4ad6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return cantPerdidas == 0 ? 'EL ESTUDIANTE APROB EL GRADO' : 'ESTUDIANTE REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalRural.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalRural.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalRural.vue?vue&type=template&id=feef22a6&scoped=true&\"\nimport script from \"./BoletinFinalRural.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalRural.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"feef22a6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'J') return 'Bajo'\n        else if (nota == 'B') return 'Bsico'\n        else if (nota == 'A') return 'Alto'\n        else if (nota == 'S') return 'Superior'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'J') return 'Bajo'\n        else if (nota == 'B') return 'Bsico'\n        else if (nota == 'A') return 'Alto'\n        else if (nota == 'S') return 'Superior'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return cantPerdidas == 0 ? 'PROMOVIDO AL SIGUIENTE GRADO' : 'REPROBADO, NO PROMOVIDO AL SIGUIENTE GRADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalGranColombiano.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalGranColombiano.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalGranColombiano.vue?vue&type=template&id=32c02d21&scoped=true&\"\nimport script from \"./BoletinFinalGranColombiano.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalGranColombiano.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32c02d21\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      const valor = parseFloat(nota)\n      if (isNaN(valor)) return ''\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      if (valor < umbralBajo) return 'Bajo'\n      if (valor < umbralBasico) return 'Bsico'\n      if (valor < umbralAlto) return 'Alto'\n      if (valor <= umbralSuperior) return 'Superior'\n      return ''\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return cantPerdidas == 0 ? 'APROB EL GRADO' : 'ESTUDIANTE REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / 4\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / 4\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalSandoval.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalSandoval.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalSandoval.vue?vue&type=template&id=4689ee92&scoped=true&\"\nimport script from \"./BoletinFinalSandoval.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalSandoval.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4689ee92\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'J') return 'Bajo'\n        else if (nota == 'B') return 'Bsico'\n        else if (nota == 'S') return 'Sobresaliente'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'J') return 'Bajo'\n        else if (nota == 'B') return 'Bsico'\n        else if (nota == 'S') return 'Sobresaliente'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return cantPerdidas == 0 ? 'EL ESTUDIANTE APROB EL GRADO' : 'ESTUDIANTE REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalJulius.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalJulius.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalJulius.vue?vue&type=template&id=e49db972&scoped=true&\"\nimport script from \"./BoletinFinalJulius.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalJulius.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e49db972\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n    idGrado: String,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (orden == 90) return false\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let convenciones = '-'\n      if (this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03') {\n        convenciones = 'J: BAJO | B: BASICO | A: ALTO | S: SUPERIOR'\n      } else {\n        convenciones =  'BAJO [' + this.datosSeccion.minBaj.toFixed(1) + ' : ' + this.datosSeccion.maxBaj.toFixed(1) + '] | BSICO [' + this.datosSeccion.minBas.toFixed(1) + ' : ' + this.datosSeccion.maxBas.toFixed(1) + '] | ALTO [' + this.datosSeccion.minAlt.toFixed(1) + ' : ' + this.datosSeccion.maxAlt.toFixed(1) + '] | SUPERIOR [' + this.datosSeccion.minSup.toFixed(1) + ' : ' + this.datosSeccion.maxSup.toFixed(1) + ']'\n      }\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: ${convenciones}</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03' ? '' : this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03' ? '' : this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03' ? '' :  finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03' ? '' : desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'S') return 'Sobresaliente'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'S') return 'Sobresaliente'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98 && a.orden !== 90)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98 && a.orden !== 90)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98 && a.orden !== 90)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98 && a.orden !== 90)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return cantPerdidas == 0 ? 'EL ESTUDIANTE APROB EL GRADO' : 'ESTUDIANTE REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const pesos = [30,35,35,0]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (orden == 55) {\n          let cantidad = 0\n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          total = total / cantidad\n          return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n        } else {\n          let total = 0\n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            total += nota * pesos[p-1] / 100\n          }\n          \n          if (this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03') {\n            const notaNumero = this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n            const letraNota = notaNumero == '' ? '' : notaNumero < this.umbralesA[0] ? 'J' : notaNumero < this.umbralesA[1] ? 'B' : notaNumero < this.umbralesA[2] ? 'A' : notaNumero < this.umbralesA[3] ? 'S' : ''\n            return letraNota\n          } else {\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n          \n          //return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        const pesos = [30,35,35,0]\n        if (orden == 55) {\n          let cantidad = 0\n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          total = total / cantidad\n          return this.redondear(total).toFixed(1) > 0 ? habilitacion > this.redondear(total).toFixed(1) ? habilitacion : this.redondear(total).toFixed(1) : ''\n        } else {\n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            total += nota * pesos[p-1] / 100\n          }\n          return this.redondear(total).toFixed(1) > 0 ? habilitacion > this.redondear(total).toFixed(1) ? habilitacion : this.redondear(total).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n\n      if (this.idGrado == '01' || this.idGrado == '02' || this.idGrado == '03') {\n        const notaNumero = est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n        const letraNota = notaNumero == '' ? '' : notaNumero < this.umbralesA[0] ? 'J' : notaNumero < this.umbralesA[1] ? 'B' : notaNumero < this.umbralesA[2] ? 'A' : notaNumero < this.umbralesA[3] ? 'S' : ''\n        return letraNota\n      } else {\n        return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n      }\n\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalInem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalInem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalInem.vue?vue&type=template&id=58369b10&scoped=true&\"\nimport script from \"./BoletinFinalInem.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalInem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58369b10\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'S') return 'Sobresaliente'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'S') return 'Sobresaliente'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      let cantAreas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          cantAreas++\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (cantAreas != 0) {\n        //if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n        if (this.$store.state.idSeccion == 1)\n          return cantPerdidas == 0 ? 'APROB EL GRADO' : 'REPROB'\n        else\n          return cantPerdidas == 0 ? 'APROB EL SEMESTRE' : 'REPROB EL SEMESTRE'\n      } else {\n        return 'REPROB (Sin Notas)'\n      }\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '17ee4f30-fc80-11ec-a1d1-1dc2835404e5') { // Enslap\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = this.$store.state.idSeccion == 1 ? total / 4 : total\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '17ee4f30-fc80-11ec-a1d1-1dc2835404e5') { // Enslap\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = this.$store.state.idSeccion == 1 ? total / 4 : total\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalEnslap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalEnslap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalEnslap.vue?vue&type=template&id=bcc25988&scoped=true&\"\nimport script from \"./BoletinFinalEnslap.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalEnslap.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bcc25988\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'A') return 'Anormativo'\n        else if (nota == 'P') return 'Persistente'\n        else if (nota == 'E') return 'Emptico'\n        else if (nota == 'I') return 'Integro'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'A') return 'Anormativo'\n        else if (nota == 'P') return 'Persistente'\n        else if (nota == 'E') return 'Emptico'\n        else if (nota == 'I') return 'Integro'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98 && a.orden !== 12)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98 && a.orden !== 12)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return cantPerdidas == 0 ? 'EL ESTUDIANTE APROB EL GRADO' : 'ESTUDIANTE REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        const pesos = [20,20,30,30]\n        if( orden == 12) {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          total = total / cantidad\n          return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n        } else {\n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            total += nota * pesos[p-1] / 100\n          }\n          return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        const pesos = [20,20,30,30]\n        if( orden == 12) {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          total = total / cantidad\n          return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n        } else {\n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            total += nota * pesos[p-1] / 100\n          }\n          return this.redondear(total).toFixed(1) > 0 ? habilitacion > this.redondear(total).toFixed(1) ? habilitacion : this.redondear(total).toFixed(1) : '*'\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalEmiliani.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalEmiliani.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalEmiliani.vue?vue&type=template&id=32909932&scoped=true&\"\nimport script from \"./BoletinFinalEmiliani.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalEmiliani.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32909932\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 999) {\n        if (nota == 'J') return 'Bajo'\n        else if (nota == 'B') return 'Bsico'\n        else if (nota == 'A') return 'Alto'\n        else if (nota == 'S') return 'Superior'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 999) {\n        if (nota == 'J') return 'Bajo'\n        else if (nota == 'B') return 'Bsico'\n        else if (nota == 'A') return 'Alto'\n        else if (nota == 'S') return 'Superior'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      let cantAreas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          cantAreas++\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (cantAreas != 0) {\n        if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n        if (this.$store.state.idSeccion == 1)\n          return cantPerdidas == 0 ? 'APROB EL GRADO' : 'REPROB'\n        else\n          return cantPerdidas == 0 ? 'APROB EL SEMESTRE' : 'REPROB EL SEMESTRE'\n      } else {\n        return 'REPROB (Sin Notas)'\n      }\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalSantiago.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalSantiago.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalSantiago.vue?vue&type=template&id=00a51a6f&scoped=true&\"\nimport script from \"./BoletinFinalSantiago.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalSantiago.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00a51a6f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n      siHabilito: 0,\n      observaFinales: '',\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      this.siHabilito = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.observacionComision(estudiante.obs_comision) === null ? this.estadosFinalesEstudiante(data,idMatricula) : ''}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }<br>${ this.observacionComision(estudiante.obs_comision) === null ? '' : this.observacionComision(estudiante.obs_comision) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"14\" class=\"descriptor\" style=\"text-align: left\">${'*' + this.descriptorAsignatura(data, area, a, 5,this.orden,prom)}</td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden,prom)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${promArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        this.siHabilito = 1\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito, prom) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        //notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        //notaFinal = this.escala\n        if (prom == 'I') notaFinal = 2\n        else if (prom == 'A') notaFinal = 3\n        else if (prom == 'S') notaFinal = 4\n        else if (prom == 'E') notaFinal = 5\n        else notaFinal = 2\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = ordencito === 98 ? 5 : prom // parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'S') return 'Sobresaliente'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'S') return 'Sobresaliente'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return this.siHabilito == 1 && cantPerdidas == 0 ? 'PROMOVIDO' : cantPerdidas == 0 ? 'APROB EL GRADO' : 'REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        /*\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n        */\n        return asig.periodos[5]\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n          //this.observaFinales = p == 5 ? est.areas?.[area]?.asignaturas?.[asignatura]?.observaciones : ''\n          //console.log(this.observaFinales)\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n    observacionComision(observacion) {\n      return observacion === null || observacion === '' ? null : observacion\n    },\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n    //console.log(this.estudiantesSeleccionados)\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalGustavo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalGustavo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalGustavo.vue?vue&type=template&id=e46a3392&scoped=true&\"\nimport script from \"./BoletinFinalGustavo.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalGustavo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e46a3392\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th>rea / Asignatura</th>\n                <th>IH</th>\n                <th>Definitiva</th>\n                <th>Desempeo</th>\n                <th>AJ</th>\n                <th>AS</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:50px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                <td>${prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              <td>${promArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 999) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 999) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return cantPerdidas == 0 ? 'EL ESTUDIANTE APROB EL GRADO' : 'ESTUDIANTE REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalLibertador.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalLibertador.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalLibertador.vue?vue&type=template&id=2a458ed1&scoped=true&\"\nimport script from \"./BoletinFinalLibertador.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalLibertador.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a458ed1\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th>rea / Asignatura</th>\n                <th>IH</th>\n                <th>Definitiva</th>\n                <th>Desempeo</th>\n                <th>AJ</th>\n                <th>AS</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:50px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                <td>${prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              <td>${promArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 999) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 999) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return cantPerdidas == 0 ? 'EL ESTUDIANTE APROB EL GRADO' : 'ESTUDIANTE REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalSilvino.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalSilvino.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalSilvino.vue?vue&type=template&id=278f2d4a&scoped=true&\"\nimport script from \"./BoletinFinalSilvino.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalSilvino.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"278f2d4a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n      perdioPorFallas: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      this.perdioPorFallas = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        const minPierdeFallas = (ihArea * 40 * .2) + 1\n        if ((this.orden !== 99) && (ausSArea >= minPierdeFallas)) this.perdioPorFallas = 1\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      if (this.perdioPorFallas == 1) cantPerdidas = 999\n      return cantPerdidas == 0 ? 'EL ESTUDIANTE APROB EL GRADO' : cantPerdidas == 999 ? 'ESTUDIANTE REPROBADO POR INASISTENCIA' : 'ESTUDIANTE REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalGonzalo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinalGonzalo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinalGonzalo.vue?vue&type=template&id=e0df0c3a&scoped=true&\"\nimport script from \"./BoletinFinalGonzalo.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinalGonzalo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e0df0c3a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"btn btn-success float-right btn-block\",on:{\"click\":_vm.generarPDF}},[_vm._v(\" \"+_vm._s(_vm.estudiantesSeleccionados.length)+\" boletines procesados... Imprimir Boletines o Generar Boletines en PDF\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button class=\"btn btn-success float-right btn-block\" @click=\"generarPDF\"> {{ estudiantesSeleccionados.length }} boletines procesados... Imprimir Boletines o Generar Boletines en PDF</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BoletinPeriodo',\n  props: {\n    estudiantesSeleccionados: Array, // [{ idMatricula: '...' }]\n    listaAreasAsignaturas: Array,\n    notas: Array,\n    datosEstudiantes: Array, // [{ idMatricula, nombre, sede, grado, curso }]\n    listaDescriptores: Array,\n    anio: Number,\n    periodoActual: Number,\n    periodosVisibles: Array, // [1, 2, 3, 4]\n    nombreSede: String,\n    nombreCurso: String,\n    nombrePeriodo: String,\n    nombreJornada: String,\n    nombreDirector: String,\n    idNivel: Number,\n    umbralesA: Array,\n    umbralesT: Array,\n    pesosPeriodos: Array,\n    tipoValComp: Number,\n    promCompor: Number,\n    letrasCompor: Array,\n    firmasBoletin: String,\n    descC1: String,\n    descC2: String,\n    descC3: String,\n    listaHabilitaciones: Array,\n  },\n  data () {\n    return {\n      escudo: null,\n      asignatur: null,\n      orden: 0,\n      conceptual: null,\n      datosSeccion: {},\n      colDesem: 0,\n      escala: 0,\n      tipoArea: 1,\n      perdioPorHabilitacion: 0,\n    }\n  },\n  methods: {\n    nombreDelArea(area) {\n      const registro = this.listaAreasAsignaturas.find(a => a.area === area && a.nombreArea)\n      return registro?.nombreArea || area\n    },\n    tieneNotasAsignatura(est, area, asignatura) {\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99) return true\n      if (!asig || !asig.periodos) return false\n      return Object.values(asig.periodos).some(n => typeof n === 'number' && !isNaN(n) && n > 0)\n    },\n    tieneNotasArea(est, area) {\n      const asignaturas = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asignaturas.some(asig => this.tieneNotasAsignatura(est, area, asig))\n    },\n    generarPDF() {\n      const ventana = window.open('', '_blank')\n      const contenido = this.generarHTMLBoletines()\n      ventana.document.write(contenido)\n      ventana.document.close()\n      ventana.focus()\n    },\n    generarHTMLBoletines() {\n      const estudiantes = this.estudiantesSeleccionados.map(sel =>\n        this.datosEstudiantes.find(e => e.idMatricula === sel.idMatricula)\n      )\n      const estructura = this.estructurarNotasPorEstudiante()\n      const html = `\n        <html>\n        <head>\n          <title>Boletines</title>\n          <style>\n            ${this.estilosBoletin()}\n          </style>\n        </head>\n        <body>\n          ${estudiantes.map(est => this.renderBoletin(est, estructura[est.nombre])).join('<div class=\"page-break\"></div>')}\n        </body>\n        </html>\n      `\n      return html\n    },\n    renderBoletin(estudiante, data) {\n      if (!data) return `<p>No hay datos para ${estudiante.nombre}</p>`\n      const idMatricula = estudiante.idMatricula\n      this.perdioPorHabilitacion = 0\n      let cuerpo = `\n        <div class=\"boletin\">\n          <div class=\"text-center mt-2\">\n            <p style=\"text-align: center; font-size: 14px;\">SECRETARA DE EDUCACIN TERRITORIAL DE TUNJA<br><b>${this.$store.state.nombreInstitucion}</b><br>TUNJA - BOYAC<br>INFORME VALORATIVO DEFINITIVO</p>\n          </div>\n          <div class=\"float-left\" style=\"margin-top: -80px;\">\n              <img src=\"${this.escudo}\" width=\"70px\"></img>\n          </div>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:10%; text-align: left\">Estudiante:</th><th style=\"text-align: left\">${estudiante.nombre}</th>\n                <th colspan=\"2\" style=\"text-align: left\">Modalidad:</th><th colspan=\"2\" style=\"text-align: left\">ACADMICA</th>\n                <th style=\"text-align: left\">Vigencia:</th><th style=\"text-align: left\">${this.anio}</th>\n              </tr>\n              <tr>\n                  <th style=\"text-align: left\">Sede:</th><th style=\"text-align: left\">${this.nombreSede}</th>\n                  <th style=\"text-align: left\">Jornada:</th><th style=\"text-align: left\">${this.nombreJornada}</th>\n                  <th style=\"text-align: left\">Curso:</th><th style=\"text-align: left\">${this.nombreCurso}</th>\n                  <th style=\"text-align: left\">Periodo:</th><th style=\"text-align: left\">${this.nombrePeriodo}</th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th rowspan=\"2\">rea / Asignatura</th>\n                <th rowspan=\"2\">IH</th>\n                <th colspan=\"${this.periodosVisibles.length + 1}\">Historial</th>\n                <th colspan=\"${this.colDesem}\">Desempeo Definitivo</th>\n              </tr>\n              <tr>\n                ${this.periodosVisibles.map(p => `<th>P${p}</th>`).join('')}\n                <th>PR</th>\n        `\n        if (this.colDesem == 7) {\n          cuerpo += `\n                  <th>Fecha</th>\n                  <th>Acta</th>\n                  <th>Supera</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        } else {\n          cuerpo += `\n                  <th>EvP</th>\n                  <th>Rec</th>\n                  <th>Def</th>\n                  <th>Desemp</th>\n                  <th>AJ</th>\n                  <th>AS</th>\n          `\n        }\n        cuerpo += `\n              </tr>\n            </thead>\n            <tbody>\n              ${this.renderCuerpoTabla(estudiante, data)}\n            </tbody>\n          </table>\n          <table class=\"tabla-boletin\">\n            <thead>\n              <tr>\n                <th style=\"width:30%; text-align: left\">${this.estadosFinalesEstudiante(data,idMatricula)}</th>\n                <th style=\"width:15%; text-align: left\">Promedio: <strong>${this.calcularPromedioGeneralPorAreasFinales(data,idMatricula)}</strong></th>\n                <th style=\"width:15%; text-align: left\">Puesto: <strong>${this.puestoEstudiante(estudiante.nombre,idMatricula)}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.Justificadas: <strong>${this.estudiantesNotas[estudiante.nombre].ausJ}</strong></th>\n                <th style=\"width:20%; text-align: left\">Aus.SinJustificar: <strong>${this.estudiantesNotas[estudiante.nombre].ausS}</strong></th>\n              </tr>\n            </thead>\n          </table>\n          <table class=\"tabla-boletin\">\n            <tr>\n              <th>Desempeos: BAJO [${(this.datosSeccion.minBaj).toFixed(1)} : ${(this.datosSeccion.maxBaj).toFixed(1)}] | BSICO [${(this.datosSeccion.minBas).toFixed(1)} : ${(this.datosSeccion.maxBas).toFixed(1)}] | ALTO [${(this.datosSeccion.minAlt).toFixed(1)} : ${(this.datosSeccion.maxAlt).toFixed(1)}] | SUPERIOR [${(this.datosSeccion.minSup).toFixed(1)} : ${(this.datosSeccion.maxSup).toFixed(1)}]</th>\n            </tr>\n          </table>\n          <table class=\"tabla-boletin observacion-comportamiento\">\n            <thead>\n              <tr>\n                <th style=\"text-align: left; height:100px; padding-left: 10px; vertical-align: top;\"><h3> Observaciones:</h3>${ this.observacionComportamiento(data) }</th>\n              </tr>\n            </thead>\n          </table>\n        `\n      return cuerpo + this.firmasBoletin\n    },\n    renderCuerpoTabla(estudiante, data) {\n      const idMatricula = estudiante.idMatricula\n      const areas = [...new Set(this.listaAreasAsignaturas.map(a => a.area))]\n      .filter(area => this.tieneNotasArea(data, area))\n      return areas.map(area => {\n        const asigns = this.listaAreasAsignaturas.filter(a => a.area === area && this.tieneNotasAsignatura(data, area, a.asignatura))\n        const filasAsignaturas = asigns.map(asig => {\n          this.orden = asig.orden\n          const a = asig.asignatura\n          this.asignatur = a\n          const tipoAsig = asig.idTipoEspecialidad\n          this.tipoArea = asig.idTipoArea\n          const nombreAsignatura = asig.nombreAsignatura\n          const ih = this.orden !== 98 ? asig.ih : ''\n          const notas = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.notaPeriodo(data, area, a, p) : ''}</td>`).join('')\n          const c1 = this.orden == 98 ? '' : this.criterio1Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio1Periodo(data, area, a, this.periodoActual) : ''\n          const c2 = this.orden == 98 ? '' : this.criterio2Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio2Periodo(data, area, a, this.periodoActual) : ''\n          const c3 = this.orden == 98 ? '' : this.criterio3Periodo(data, area, a, this.periodoActual) > 0 ? this.criterio3Periodo(data, area, a, this.periodoActual) : ''\n          const prom = this.orden !== 98 ? this.promedioAsignatura(data, area, a) : ''\n          const def = this.orden !== 98 ? this.definitivaPeriodo(data, area, a, this.periodoActual) : ''\n          const rec = this.orden !== 98 ? this.recuperacion(data, area, a, this.periodoActual) : ''\n          const final = this.orden !== 98 ? this.notaFinal(data, area, a, this.periodoActual) : ''\n          const ausJ = this.ausencias(data, area, a, 'ausJ')\n          const ausS = this.ausencias(data, area, a, 'ausS')\n          const ausJAsig = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n          const ausSAsig = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n          const docente = asig.docente != null ? asig.docente : ''\n          const idAsignaturaCurso = asig.idAsignaturaCurso\n          const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n          const umbralBajo = tipoAsig === 2 ? this.umbralesT[0] : this.umbralesA[0]\n          if (habilit.habilitacion > 0 && habilit.habilitacion < umbralBajo) {\n             this.perdioPorHabilitacion = 1\n          }\n          const des = this.orden !== 98 ? this.desempeno(habilit.habilitacion > prom ? habilit.habilitacion : prom, area, tipoAsig, this.orden) : '' //this.desempeo(final)\n          if (this.colDesem == 7) {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td>${habilit.fecha}</td>\n                <td>${habilit.acta}</td>\n                <td>${habilit.habilitacion}</td>\n                <td>${habilit.habilitacion > prom ? habilit.habilitacion : prom}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"12\" class=\"descriptor\" style=\"text-align: left\"></td></tr>\n            `\n          } else {\n            return `\n              <tr>\n                <td style=\"text-align: left\"><strong>${nombreAsignatura}</strong> <br> <i style=\"font-size: 10px;\">${docente}</i></td>\n                <td>${ih}</td>\n                ${notas}\n                <td>${prom}</td>\n                <td></td>\n                <td></td>\n                <td>${final > 0 ? final : final}</td>\n                <td>${des}</td>\n                <td>${ausJAsig}</td>\n                <td>${ausSAsig}</td>\n              </tr>\n              <tr><td colspan=\"${this.colDesem + 6}\" class=\"descriptor\" style=\"text-align: left\">${this.descriptorAsignatura(data, area, a, 5,this.orden)}</td></tr>\n            `\n          }\n        }).join('')\n        const ausJ = this.ausenciasArea(data, area, 'ausJ')\n        const ausS = this.ausenciasArea(data, area, 'ausS')\n        const notasArea = this.periodosVisibles.map(p => `<td>${this.orden !== 98 ? this.promedioAreaPorPeriodo(data, area, p) : ''}</td>`).join('')\n        const promArea = this.orden !== 98 ? this.promedioArea(data, area) : ''\n        const finalArea = this.orden !== 98 && this.orden != 99 ? this.promedioFinalArea(data, area, idMatricula) : this.orden === 99 ? this.promedioArea(data, area) : ''\n        const desArea = this.orden !== 98 ? this.desempenoArea(finalArea, area, this.tipoArea,this.orden) : '' //this.desempeo(finalArea)\n        const ausJArea = this.orden == 98 ? '' : ausJ > 0 ? ausJ : ''\n        const ausSArea = this.orden == 98 ? '' : ausS > 0 ? ausS : ''\n        const ihArea = this.orden !== 98 ? this.intensidadHorariaArea(data, area) : ''\n        if (this.colDesem == 7) {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        } else {\n          return `\n            <tr class=\"fila-area\">\n              <td style=\"text-align: left\"><strong>${this.nombreDelArea(area)}</strong></td>\n              <td>${ihArea}</td>\n              ${notasArea}\n              <td>${promArea}</td>\n              <td></td><td></td>\n              <td>${finalArea > 0 ? finalArea : finalArea}</td>\n              <td>${desArea}</td>\n              <td>${ausJArea}</td>\n              <td>${ausSArea}</td>\n            </tr>\n            ${filasAsignaturas}\n          `\n        }\n      }).join('')\n    },\n    mostrarHabilitacion(idMatricula,idAsignaturaCurso) {\n      const meta = this.listaHabilitaciones.find(h => h.id_matricula === idMatricula && h.id_asignatura_curso === idAsignaturaCurso)\n      if (!(meta === undefined)) {\n        const valor = meta.habilitacion > 0 ? meta.habilitacion.toFixed(1) : ''\n        const fechita = meta.fecha !== null && meta.fecha !== '' ? meta.fecha.substr(0,10) : ''\n        const actica = meta.acta != null ? meta.acta : ''\n        return {habilitacion: valor, acta: actica, fecha: fechita }\n      } else {\n        return {habilitacion: '', acta: '', fecha: ''}\n      }\n    },\n    estilosBoletin() {\n      return `\n        body { font-family: Arial, sans-serif; margin: 5px; }\n        .boletin { page-break-after: always; }\n        .tabla-boletin { width: 100%; border-collapse: collapse; font-size: 0.7rem; margin-top: 0.5rem; }\n        .tabla-boletin th, .tabla-boletin td { border: 1px solid #ccc; padding: 1px 1px; text-align: center; }\n        .fila-area { background-color: #f0f0f0; font-weight: bold; }\n        .descriptor { font-style: italic; background-color: #f9f9f9; text-align: left; }\n        .firmas { margin-top: 5rem; font-size: 0.8rem; }\n        .page-break { page-break-before: always; }\n        .observacion-comportamiento {\n          margin-top: 0.5rem;\n          background-color: #f3f3f3;\n          border-left: 4px solid #888;\n          font-style: italic;\n        }\n      `\n    },\n    descriptorAsignatura(est, area, asignatura, periodo, ordencito) {\n      const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n      const meta = this.listaAreasAsignaturas.find(\n        a => a.area === area && a.asignatura === asignatura\n      )\n      if (!datos || !meta) return ''\n      // Si la asignatura tiene pd === \"S\", usamos el campo inclusion directamente\n      if (datos.pd === 'S' || datos.concep === 'S' ) {\n        return datos.inclusion || ''\n      }\n      let notaFinal = 0\n      if (ordencito === 99 && this.tipoValComp == 0) {\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n        notaFinal = this.escala\n      } else {\n        // Obtener la nota final del estudiante\n        notaFinal = parseFloat(this.notaFinal(est, area, asignatura, periodo))\n      }\n      //console.log(notaFinal)\n      if (isNaN(notaFinal)) return ''\n      // Determinar desempeo real\n      const tipo = meta.idTipoEspecialidad\n      const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n      const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n      const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n      const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n      let conceptoValorativo = null\n      if (notaFinal < umbralBajo) conceptoValorativo = 1\n      else if (notaFinal < umbralBasico) conceptoValorativo = 2\n      else if (notaFinal < umbralAlto) conceptoValorativo = 3\n      else if (notaFinal <= umbralSuperior) conceptoValorativo = 4\n      else conceptoValorativo = 999\n      // Buscar descriptor correspondiente\n      const descriptorObj = this.listaDescriptores.find(d => d.idAsignaturaCurso === meta.idAsignaturaCurso && d.id_concepto_valorativo === conceptoValorativo)\n      return descriptorObj?.descriptor || ''\n    },\n    desempeno(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    desempenoArea(nota, area, tipo, orden) {\n      if (orden == 99) {\n        if (nota == 'I') return 'Insuficiente'\n        else if (nota == 'A') return 'Aceptable'\n        else if (nota == 'B') return 'Bueno'\n        else if (nota == 'E') return 'Excelente'\n        else return ''\n      } else {\n        const valor = parseFloat(nota)\n        if (isNaN(valor)) return ''\n        const umbralBajo = tipo === 2 ? this.umbralesT[0] : this.umbralesA[0]\n        const umbralBasico = tipo === 2 ? this.umbralesT[1] : this.umbralesA[1]\n        const umbralAlto = tipo === 2 ? this.umbralesT[2] : this.umbralesA[2]\n        const umbralSuperior = tipo === 2 ? this.umbralesT[3] : this.umbralesA[3]\n        if (valor < umbralBajo) return 'Bajo'\n        if (valor < umbralBasico) return 'Bsico'\n        if (valor < umbralAlto) return 'Alto'\n        if (valor <= umbralSuperior) return 'Superior'\n        return ''\n      }\n    },\n    calcularPromedioGeneralPorAreasFinales(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let total = 0\n      let cantidad = 0\n      areasEvaluativas.forEach(area => {\n        const notaFinalArea = parseFloat(this.promedioArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          total += notaFinalArea\n          cantidad++\n        }\n      })\n      return cantidad > 0 ? (total / cantidad).toFixed(3) : '0.000'\n    },\n    estadosFinalesEstudiante(est,idMatricula) {\n      let areasEvaluativas = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 98)\n            .map(a => a.area)\n        )]\n      } else {\n        areasEvaluativas = [...new Set(\n          this.listaAreasAsignaturas\n            .filter(a => a.orden !== 99 && a.orden !== 98)\n            .map(a => a.area)\n        )]\n      }\n      let cantPerdidas = 0\n      areasEvaluativas.forEach(area => {\n        const meta = this.listaAreasAsignaturas.find( a => a.area === area)\n        const idTipoEspecialidadArea = meta?.idTipoArea\n        const notaFinalArea = parseFloat(this.promedioFinalArea(est, area, idMatricula)) // parseFloat(this.notaFinalArea(est, area))\n        if (!isNaN(notaFinalArea)) {\n          if (idTipoEspecialidadArea === 1) {\n            if (notaFinalArea < this.umbralesA[0]) cantPerdidas++\n          } else {\n            if (notaFinalArea < this.umbralesT[0]) cantPerdidas++\n          }\n        }\n      })\n      if (this.perdioPorHabilitacion == 1) cantPerdidas = 100\n      return cantPerdidas == 0 ? 'EL ESTUDIANTE APROB EL GRADO' : 'ESTUDIANTE REPROBADO'\n    },\n    generarRankingCurso(idMatricula) {\n      const ranking = []\n      Object.entries(this.estudiantesNotas).forEach(([nombre, est]) => {\n        const promedio = parseFloat(this.calcularPromedioGeneralPorAreasFinales(est,idMatricula))\n        if (!isNaN(promedio)) {\n          ranking.push({ nombre, promedio })\n        }\n      })\n      // Ordenar por promedio descendente\n      ranking.sort((a, b) => b.promedio - a.promedio)\n      // Asignar puestos (con empates)\n      let puesto = 1\n      for (let i = 0; i < ranking.length; i++) {\n        if (i > 0 && ranking[i].promedio === ranking[i - 1].promedio) {\n          ranking[i].puesto = ranking[i - 1].puesto // mismo puesto por empate\n        } else {\n          ranking[i].puesto = puesto\n          puesto++\n        }\n        \n      }\n      return ranking\n    },\n    puestoEstudiante(nombre,idMatricula) {\n      const ranking = this.generarRankingCurso(idMatricula)\n      const encontrado = ranking.find(e => e.nombre === nombre)\n      return encontrado?.puesto || ''\n    },\n    definitivaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const nota = est.areas?.[area]?.asignaturas?.[asignatura]?.definitivas?.[periodo]\n      if (orden == 99 && this.tipoValComp == 0) {\n        this.escala = this.letrasCompor.findIndex(valor => valor === nota)\n        if (this.escala == 1) this.escala = 3.5\n        else if (this.escala == 2) this.escala = 4\n        else if (this.escala == 3) this.escala = 5\n        else this.escala = 2\n        return nota\n      } else {\n        return typeof nota === 'number' && nota > 0 ? nota.toFixed(1) : ''\n      }\n    },\n    recuperacion(est, area, asignatura, periodo) {\n      const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperaciones?.[periodo]\n      //const rec = est.areas?.[area]?.asignaturas?.[asignatura]?.recuperacion\n      return typeof rec === 'number' && rec > 0 ? rec.toFixed(1) : ''\n    },\n    notaFinal(est, area, asignatura, periodo) {\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const def = parseFloat(this.definitivaPeriodo(est, area, asignatura, periodo))\n      const rec = parseFloat(this.recuperacion(est, area, asignatura, periodo))\n      if (orden == 99 && this.tipoValComp == 0) return this.definitivaPeriodo(est, area, asignatura, periodo)\n      if (isNaN(def) && isNaN(rec)) return ''\n      if (!isNaN(rec) && rec > def) return rec.toFixed(1)\n      return def > 0 ? def.toFixed(1) : def\n    },\n    promedioAsignatura(est, area, asignatura) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      if (!asig) return ''\n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    notaFinalArea(est, area) {\n      let asigns = ''\n      if (this.promCompor == 1) { // Promedia comportamiento\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 98)\n      } else {\n        asigns = this.listaAreasAsignaturas.filter(a => a.area === area && a.orden !== 99 && a.orden !== 98)\n      }\n      if (!asigns.length) return '*'       \n      let total = 0\n      let pesoTotal = 0\n      asigns.forEach(asigMeta => {\n        const { asignatura, porcentaje, orden } = asigMeta\n        if (orden === 99 && this.tipoValComp == 0) return orden //this.definitivaPeriodo(est, area, asignatura, this.periodoActual)\n        const datos = est.areas?.[area]?.asignaturas?.[asignatura]\n        if (!datos) return\n        const notaFinal = this.notaFinal(est, area, asignatura, this.periodoActual)\n        if (!isNaN(notaFinal)) {\n          total += notaFinal * (porcentaje / 100)\n          pesoTotal += porcentaje\n        }\n      })\n      // Aseguramos que el peso total sea > 0\n      return total > 0 ? this.redondear(total).toFixed(1) : ''\n    },\n    promedioAsignaturaDefinitivo(est, area, asignatura,idMatricula) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      const asig = est.areas?.[area]?.asignaturas?.[asignatura]\n      const idAsignaturaCurso = est.areas?.[area]?.asignaturas?.[asignatura]?.idAsignaturaCurso\n      const habilit = this.mostrarHabilitacion(idMatricula,idAsignaturaCurso)\n      const habilitacion = habilit.habilitacion > 0 ? habilit.habilitacion : 0\n      if (!asig) return '' \n      let total = 0\n      let cant = 0\n      if (orden == 99 && this.tipoValComp == 0) {\n        for (const p in asig.periodos) {\n          const nota = asig.periodos[p]\n          let encontrarLetra = this.letrasCompor.findIndex(valor => valor === nota)\n          total += this.umbralesA[encontrarLetra]\n          cant++\n        }\n        let promedioLetras = cant > 0 ? this.redondear(total / cant).toFixed(1): 0\n        if (promedioLetras <= this.umbralesA[0]) return this.letrasCompor[0]\n        else if (promedioLetras <= this.umbralesA[1]) return this.letrasCompor[1]\n        else if (promedioLetras <= this.umbralesA[2]) return this.letrasCompor[2]\n        else if (promedioLetras <= this.umbralesA[3]) return this.letrasCompor[3]\n        else return promedioLetras\n      } else {\n        if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4') { // Emiliani\n          const pesos = [20,20,30,30]\n          if( orden == 12) {\n            let cantidad = 0 \n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : '*'\n          }\n        } else if (this.$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5') { // Inem\n          const pesos = [20,35,35,0]\n          if (orden == 55) {\n            let cantidad = 0\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              if (nota > 0) {\n                total += nota\n                cantidad++\n              }\n            }\n            if (total === 0) return ''\n            total = total / cantidad\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          } else {\n            for (let p = 1; p <= 4; p++) {\n              const nota = asig.periodos[p] ?? 0\n              total += nota * pesos[p-1] / 100\n            }\n            return this.redondear(total).toFixed(1) > 0 ? this.redondear(total).toFixed(1) : ''\n          }\n        } else if (this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // Silvino\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4') { // Libertador\n          const nota = asig.periodos[5] ?? 0\n          return nota > 0 ? nota.toFixed(1) : ''\n        } else {\n          let cantidad = 0 \n          for (let p = 1; p <= 4; p++) {\n            const nota = asig.periodos[p] ?? 0\n            if (nota > 0) {\n              total += nota\n              cantidad++\n            }\n          }\n          if (total === 0) return ''\n          const promedio = total / cantidad\n          return this.redondear(promedio).toFixed(1) > 0 ? habilitacion > this.redondear(promedio).toFixed(1) ? habilitacion : this.redondear(promedio).toFixed(1) : ''\n        }\n      }\n    },\n    promedioFinalArea(est, area, idMatricula) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignaturaDefinitivo(est, area, asignatura, idMatricula)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignaturaDefinitivo(est, area, asig, idMatricula) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      const asignatura = asigns.reduce((asig) => asig)\n      if (orden == 99 && this.tipoValComp == 0) return this.promedioAsignatura(est, area, asignatura)\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => sum + parseFloat(this.promedioAsignatura(est, area, asig) * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100), 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    promedioAreaPorPeriodo(est, area, periodo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      if (!asigns.length) return ''\n      const concep = est.areas?.[area]?.asignaturas?.[asigns]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asigns]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asigns]?.periodos?.[periodo] || ''\n      if (this.$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4' && this.orden == 12) { // Emiliani\n        return '*'\n      } \n      const total = asigns.reduce((sum, asig) => {\n        const nota = est.areas?.[area]?.asignaturas?.[asig]?.periodos?.[periodo] * est.areas?.[area]?.asignaturas?.[asig]?.porcentaje / 100\n        return sum + (typeof nota === 'number' ? nota : 0)\n      }, 0)\n      return total > 0 ?  this.redondear(total).toFixed(1) : ''\n    },\n    ausencias(est, area, asignatura, tipo) {\n      return Number(est.areas?.[area]?.asignaturas?.[asignatura]?.[tipo]) || 0\n    },\n    ausenciasArea(est, area, tipo) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + Number(this.ausencias(est, area, asig, tipo)), 0)\n    },\n    intensidadHorariaAsignatura(est, area, asignatura) {\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.intensidadHoraria || ''\n    },\n    intensidadHorariaArea(est, area) {\n      const asigns = Object.keys(est.areas?.[area]?.asignaturas || {})\n      return asigns.reduce((sum, asig) => sum + this.intensidadHorariaAsignatura(est, area, asig), 0)\n    },\n    notaPeriodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) > 0 ? est.areas?.[area]?.asignaturas?.[asignatura]?.periodos?.[periodo]?.toFixed(1) : ''\n    },\n    criterio1Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c1?.[periodo]?.toFixed(1) || ''\n    },\n    criterio2Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c2?.[periodo]?.toFixed(1) || ''\n    },\n    criterio3Periodo(est, area, asignatura, periodo) {\n      const concep = est.areas?.[area]?.asignaturas?.[asignatura]?.concep\n      if (concep === \"S\") return ''\n      const orden = est.areas?.[area]?.asignaturas?.[asignatura]?.orden\n      if (orden == 99 && this.tipoValComp == 0) return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo] || ''\n      return est.areas?.[area]?.asignaturas?.[asignatura]?.c3?.[periodo]?.toFixed(1) || ''\n    },\n    observacionComportamiento(est) {\n      // Busca la asignatura de orden 99\n      const compo = this.listaAreasAsignaturas.find(a => a.orden === 99)\n      if (!compo) return ''\n      const datos = est.areas?.[compo.area]?.asignaturas?.[compo.asignatura]\n      return datos?.observaciones || ''\n    },\n\n    estructurarNotasPorEstudiante() {\n      const mapa = {}\n      this.notas.forEach(nota => {\n        const {\n          estudiante,\n          documento,\n          area,\n          asignatura,\n          periodo,\n          definitiva,\n          recuperacion,\n          C1,\n          C2,\n          C3,\n          definitivacompor,\n          fechaR,\n          inclusion,\n          observaciones,\n          pd,\n          concep,\n          ausJ,\n          ausS,\n        } = nota\n        if (!mapa[estudiante]) {\n          mapa[estudiante] = {\n            documento,\n            ausJ: 0,\n            ausS: 0,\n            areas: {}\n          }\n        }\n        const est = mapa[estudiante]\n        if (!est.areas[area]) {\n          est.areas[area] = { asignaturas: {} }\n        }\n        if (!est.areas[area].asignaturas[asignatura]) {\n          const meta = this.listaAreasAsignaturas.find(a => a.area === area && a.asignatura === asignatura)\n          est.areas[area].asignaturas[asignatura] = {\n            idAsignaturaCurso: meta?.idAsignaturaCurso,\n            intensidadHoraria: meta?.ih || 0,\n            orden: meta?.orden || 0,\n            porcentaje: meta?.porcentaje || 100,\n            docente: meta?.docente || '',\n            periodos: {},\n            definitivas: {},\n            recuperaciones: {},\n            c1: {},\n            c2: {},\n            c3: {},\n            definitiva: null,\n            recuperacion: null,\n            C1: null,\n            C2: null,\n            C3: null,\n            definitivacompor: null,\n            fechaR: null,\n            inclusion: null,\n            observaciones: null,\n            pd: null,\n            concep: null,\n            ausJ: 0,\n            ausS: 0,\n          }\n        }\n        const asig = est.areas[area].asignaturas[asignatura]\n        if (asig.orden == 99 && this.tipoValComp == 0) {\n          asig.periodos[periodo] = definitivacompor\n          asig.definitivas[periodo] = definitivacompor\n          asig.recuperaciones[periodo] = ''\n          asig.c1[periodo] = ''\n          asig.c2[periodo] = ''\n          asig.c3[periodo] = ''\n          asig.definitiva = definitivacompor\n          asig.recuperacion = ''\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        } else {\n          asig.periodos[periodo] = recuperacion > definitiva ? recuperacion : definitiva\n          asig.definitivas[periodo] = definitiva\n          asig.recuperaciones[periodo] = recuperacion\n          asig.c1[periodo] = C1\n          asig.c2[periodo] = C2\n          asig.c3[periodo] = C3\n          asig.definitiva = definitiva\n          asig.recuperacion = recuperacion\n          asig.fechaR = fechaR\n          asig.inclusion = inclusion\n          asig.observaciones = observaciones\n          asig.pd = pd\n          asig.concep = concep\n        }\n        asig.ausJ += ausJ || 0\n        asig.ausS += ausS || 0\n\n        est.ausJ += ausJ || 0\n        est.ausS += ausS || 0\n      })\n      //console.log(JSON.stringify(mapa))\n      return mapa\n    },\n    redondear(num) {\n      var m = Number((Math.abs(num) * 10).toPrecision(15))\n      return Math.round(m) / 10 * Math.sign(num);\n    }\n  },\n  computed: {\n    estudiantesNotas() {\n      return this.estructurarNotasPorEstudiante()\n    }\n  },\n  beforeMount() {\n    this.letrasCompor = ['J','B','A','S'] //Aqui van las letrs del comportamiento\n    this.escudo = \"https://siedutunja.gov.co/api/colegios/escudos/\" + this.$store.state.escudoInstitucion\n    this.colDesem = 7\n    this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n  }\n}\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoletinFinal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoletinFinal.vue?vue&type=template&id=30f3feea&scoped=true&\"\nimport script from \"./BoletinFinal.vue?vue&type=script&lang=js&\"\nexport * from \"./BoletinFinal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30f3feea\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <b-row class=\"mt-2\">\n      <b-col lg=\"12\">\n        <b-card>\n          <template #header>\n            <h5 class=\"mb-0\"><b-icon icon=\"card-checklist\" aria-hidden=\"true\"></b-icon> BOLETINES DE EVALUACIN</h5>\n          </template>\n          <b-card-text>\n            <b-row>\n              <b-col lg=\"12\">\n                <b-card bg-variant=\"light\" text-variant=\"\">\n                  <b-card-text>\n                    <b-row>\n                      <b-col lg=\"4\">\n                        <h6>Por Periodo</h6>\n                        <b-form-group label=\"\" v-slot=\"{ ariaDescribedby }\">\n                          <b-form-radio v-model=\"idBoletin\" :aria-describedby=\"ariaDescribedby\" name=\"some-radios\" value=\"1\" @change=\"idPeriodo=null,idSede=null,idCurso=null\">Boletines por periodo</b-form-radio>\n                          <b-form-radio v-model=\"idBoletin\" :aria-describedby=\"ariaDescribedby\" name=\"some-radios\" value=\"2\" @change=\"idPeriodo=null,idSede=null,idCurso=null\">Boletines retirados</b-form-radio>\n                          <b-form-radio v-model=\"idBoletin\" :aria-describedby=\"ariaDescribedby\" name=\"some-radios\" value=\"3\" @change=\"idPeriodo=null,idSede=null,idCurso=null\">Boletines ubicados/reubicados</b-form-radio>\n                          <b-form-radio v-model=\"idBoletin\" :aria-describedby=\"ariaDescribedby\" name=\"some-radios\" value=\"4\" @change=\"idPeriodo=null,idSede=null,idCurso=null\">Boletines promocionados anticipadamente</b-form-radio>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"4\">\n                        <h6>Boletines Finales</h6>\n                        <b-form-group label=\"\" v-slot=\"{ ariaDescribedby }\">\n                          <b-form-radio v-model=\"idBoletin\" :aria-describedby=\"ariaDescribedby\" name=\"some-radios\" value=\"10\">Boletines Finales</b-form-radio>\n                        </b-form-group>\n                      </b-col>\n                    </b-row>\n                  </b-card-text>\n                </b-card>\n              </b-col>\n            </b-row>\n            <b-row v-if=\"idBoletin==1\"> \n              <b-col lg=\"12\">\n                <b-card>\n                  <template #header>\n                    <h5 class=\"mb-0\"><b-icon icon=\"card-checklist\" aria-hidden=\"true\"></b-icon> BOLETINES POR PERIODO</h5>\n                  </template>\n                  <b-card-text>\n                    <b-row>\n                      <b-col lg=\"2\">\n                        <b-form-group label=\"Periodo:\" label-for=\"periodo\" class=\"etiqueta\">\n                          <b-form-select id=\"periodo\" ref=\"periodo\" v-model=\"idPeriodo\" :options=\"comboPeriodos\" @change=\"idSede=null,idCurso=null,mostrarBoletines=null\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"6\">\n                        <b-form-group label=\"Seleccione la Sede:\" label-for=\"sedes\" class=\"etiqueta\">\n                          <b-form-select  id=\"sedes\" ref=\"sedes\" v-model=\"idSede\" :options=\"comboSedes\" @change=\"idCurso=null,ocuparComboCursosSede(),mostrarBoletines=null\" :disabled=\"idPeriodo!=null ? false : true\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"4\">\n                        <b-form-group label=\"Seleccione el Curso:\" label-for=\"cursos\" class=\"etiqueta\">\n                          <b-form-select id=\"cursos\" ref=\"cursos\" v-model=\"idCurso\" :options=\"comboCursosSede\" @change=\"consultarEstudiantes(),mostrarBoletines=null\" :disabled=\"idSede!=null ? false : true\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                    </b-row>\n                  </b-card-text>\n                </b-card>\n                <div v-if=\"idNivel == 1\">\n                  <BoletinPree\n                    v-if=\"mostrarBoletines\"\n                    :estudiantesSeleccionados=\"estudiantesSeleccionados\"\n                    :listaAreasAsignaturas=\"listaAreasAsignaturas\"\n                    :listaDescriptores=\"listaDescriptores\"\n                    :notas=\"notas\"\n                    :datosEstudiantes=\"datosEstudiantes\"\n                    :anio=\"Number($store.state.aLectivo)\"\n                    :periodoActual=\"idPeriodo\"\n                    :periodosVisibles=\"periodosVisibles\"\n                    :nombreSede=\"nombreSede\"\n                    :nombreCurso=\"nombreCurso\"\n                    :nombrePeriodo=\"nombrePeriodo\"\n                    :nombreJornada=\"nombreJornada\"\n                    :nombreDirector=\"nombreDirector\"\n                    :idNivel=\"idNivel\"\n                    :umbralesA=\"umbralesA\"\n                    :umbralesT=\"umbralesT\"\n                    :pesosPeriodos=\"pesosPeriodos\"\n                    :tipoValComp=\"tipoValComp\"\n                    :promCompor=\"promCompor\"\n                    :escalaPreescolar=\"escalaPreescolar\"\n                    :nuevaEscalaPreescolar=\"nuevaEscalaPreescolar\"\n                    :firmasBoletin=\"firmasBoletin\"\n                  />\n                </div>\n                <div v-else>\n                  <span v-if=\"$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5'\"> <!-- INEM -->\n                    <BoletinPeriodoInem v-if=\"mostrarBoletines\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == '660fa760-fc83-11ec-a1d1-1dc2835404e5'\"> <!-- GRANCOLOMBIANO -->\n                    <BoletinPeriodoGranColombiano v-if=\"mostrarBoletines\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4'\"> <!-- GUSTAVOROJAS -->\n                    <BoletinPeriodoGustavoRojas v-if=\"mostrarBoletines\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5'\"> <!-- JULIUS -->\n                    <BoletinPeriodoJulius v-if=\"mostrarBoletines\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4'\"> <!-- EMILIANI -->\n                    <BoletinPeriodoEmiliani v-if=\"mostrarBoletines\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else>\n                    <BoletinPeriodo v-if=\"mostrarBoletines\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" />\n                  </span>\n                </div>\n              </b-col>\n            </b-row>\n            <b-row v-if=\"idBoletin==2\"> \n              <b-col lg=\"12\">\n                <b-card>\n                  <template #header>\n                    <h5 class=\"mb-0\"><b-icon icon=\"card-checklist\" aria-hidden=\"true\"></b-icon> BOLETINES POR PERIODO</h5>\n                  </template>\n                  <b-card-text>\n                    <b-row>\n                      <b-col lg=\"2\">\n                        <b-form-group label=\"Periodo:\" label-for=\"periodo\" class=\"etiqueta\">\n                          <b-form-select id=\"periodo\" ref=\"periodo\" v-model=\"idPeriodo\" :options=\"comboPeriodos\" @change=\"idSede=null,idCurso=null,mostrarBoletines=null\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"6\">\n                        <b-form-group label=\"Seleccione la Sede:\" label-for=\"sedes\" class=\"etiqueta\">\n                          <b-form-select  id=\"sedes\" ref=\"sedes\" v-model=\"idSede\" :options=\"comboSedes\" @change=\"idCurso=null,ocuparComboCursosSede(),mostrarBoletines=null\" :disabled=\"idPeriodo!=null ? false : true\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"4\">\n                        <b-form-group label=\"Seleccione el Curso:\" label-for=\"cursos\" class=\"etiqueta\">\n                          <b-form-select id=\"cursos\" ref=\"cursos\" v-model=\"idCurso\" :options=\"comboCursosSede\" @change=\"consultarEstudiantes(),mostrarBoletines=null\" :disabled=\"idSede!=null ? false : true\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                    </b-row>\n                  </b-card-text>\n                </b-card>\n                <div v-if=\"idNivel == 1\">\n                  <BoletinPreeRetirado\n                    v-if=\"mostrarBoletines\"\n                    :estudiantesSeleccionados=\"estudiantesSeleccionados\"\n                    :listaAreasAsignaturas=\"listaAreasAsignaturas\"\n                    :listaDescriptores=\"listaDescriptores\"\n                    :notas=\"notas\"\n                    :datosEstudiantes=\"datosEstudiantes\"\n                    :anio=\"Number($store.state.aLectivo)\"\n                    :periodoActual=\"idPeriodo\"\n                    :periodosVisibles=\"periodosVisibles\"\n                    :nombreSede=\"nombreSede\"\n                    :nombreCurso=\"nombreCurso\"\n                    :nombrePeriodo=\"nombrePeriodo\"\n                    :nombreJornada=\"nombreJornada\"\n                    :nombreDirector=\"nombreDirector\"\n                    :idNivel=\"idNivel\"\n                    :umbralesA=\"umbralesA\"\n                    :umbralesT=\"umbralesT\"\n                    :pesosPeriodos=\"pesosPeriodos\"\n                    :tipoValComp=\"tipoValComp\"\n                    :promCompor=\"promCompor\"\n                    :escalaPreescolar=\"escalaPreescolar\"\n                    :nuevaEscalaPreescolar=\"nuevaEscalaPreescolar\"\n                    :firmasBoletin=\"firmasBoletin\"\n                  />\n                </div>\n                <div v-else>\n                  <BoletinPeriodoRetirado\n                    v-if=\"mostrarBoletines\"\n                    :estudiantesSeleccionados=\"estudiantesSeleccionados\"\n                    :listaAreasAsignaturas=\"listaAreasAsignaturas\"\n                    :listaDescriptores=\"listaDescriptores\"\n                    :notas=\"notas\"\n                    :datosEstudiantes=\"datosEstudiantes\"\n                    :anio=\"Number($store.state.aLectivo)\"\n                    :periodoActual=\"idPeriodo\"\n                    :periodosVisibles=\"periodosVisibles\"\n                    :nombreSede=\"nombreSede\"\n                    :nombreCurso=\"nombreCurso\"\n                    :nombrePeriodo=\"nombrePeriodo\"\n                    :nombreJornada=\"nombreJornada\"\n                    :nombreDirector=\"nombreDirector\"\n                    :idNivel=\"idNivel\"\n                    :umbralesA=\"umbralesA\"\n                    :umbralesT=\"umbralesT\"\n                    :pesosPeriodos=\"pesosPeriodos\"\n                    :tipoValComp=\"tipoValComp\"\n                    :promCompor=\"promCompor\"\n                    :letrasCompor=\"letrasCompor\"\n                    :firmasBoletin=\"firmasBoletin\"\n                  />\n                </div>\n              </b-col>\n            </b-row>\n            <b-row v-if=\"idBoletin==3\"> \n              <b-col lg=\"12\">\n                <b-card>\n                  <template #header>\n                    <h5 class=\"mb-0\"><b-icon icon=\"card-checklist\" aria-hidden=\"true\"></b-icon> BOLETINES POR PERIODO</h5>\n                  </template>\n                  <b-card-text>\n                    <b-row>\n                      <b-col lg=\"2\">\n                        <b-form-group label=\"Periodo:\" label-for=\"periodo\" class=\"etiqueta\">\n                          <b-form-select id=\"periodo\" ref=\"periodo\" v-model=\"idPeriodo\" :options=\"comboPeriodos\" @change=\"idSede=null,idCurso=null,mostrarBoletines=null\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"6\">\n                        <b-form-group label=\"Seleccione la Sede:\" label-for=\"sedes\" class=\"etiqueta\">\n                          <b-form-select  id=\"sedes\" ref=\"sedes\" v-model=\"idSede\" :options=\"comboSedes\" @change=\"idCurso=null,ocuparComboCursosSede(),mostrarBoletines=null\" :disabled=\"idPeriodo!=null ? false : true\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"4\">\n                        <b-form-group label=\"Seleccione el Curso:\" label-for=\"cursos\" class=\"etiqueta\">\n                          <b-form-select id=\"cursos\" ref=\"cursos\" v-model=\"idCurso\" :options=\"comboCursosSede\" @change=\"consultarEstudiantes(),mostrarBoletines=null\" :disabled=\"idSede!=null ? false : true\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                    </b-row>\n                  </b-card-text>\n                </b-card>\n                <div v-if=\"idNivel == 1\">\n                  <BoletinPreeReubicado\n                    v-if=\"mostrarBoletines\"\n                    :estudiantesSeleccionados=\"estudiantesSeleccionados\"\n                    :listaAreasAsignaturas=\"listaAreasAsignaturas\"\n                    :listaDescriptores=\"listaDescriptores\"\n                    :notas=\"notas\"\n                    :datosEstudiantes=\"datosEstudiantes\"\n                    :anio=\"Number($store.state.aLectivo)\"\n                    :periodoActual=\"idPeriodo\"\n                    :periodosVisibles=\"periodosVisibles\"\n                    :nombreSede=\"nombreSede\"\n                    :nombreCurso=\"nombreCurso\"\n                    :nombrePeriodo=\"nombrePeriodo\"\n                    :nombreJornada=\"nombreJornada\"\n                    :nombreDirector=\"nombreDirector\"\n                    :idNivel=\"idNivel\"\n                    :umbralesA=\"umbralesA\"\n                    :umbralesT=\"umbralesT\"\n                    :pesosPeriodos=\"pesosPeriodos\"\n                    :tipoValComp=\"tipoValComp\"\n                    :promCompor=\"promCompor\"\n                    :escalaPreescolar=\"escalaPreescolar\"\n                    :nuevaEscalaPreescolar=\"nuevaEscalaPreescolar\"\n                    :firmasBoletin=\"firmasBoletin\"\n                  />\n                </div>\n                <div v-else>\n                  <BoletinPeriodoReubicado\n                    v-if=\"mostrarBoletines\"\n                    :estudiantesSeleccionados=\"estudiantesSeleccionados\"\n                    :listaAreasAsignaturas=\"listaAreasAsignaturas\"\n                    :listaDescriptores=\"listaDescriptores\"\n                    :notas=\"notas\"\n                    :datosEstudiantes=\"datosEstudiantes\"\n                    :anio=\"Number($store.state.aLectivo)\"\n                    :periodoActual=\"idPeriodo\"\n                    :periodosVisibles=\"periodosVisibles\"\n                    :nombreSede=\"nombreSede\"\n                    :nombreCurso=\"nombreCurso\"\n                    :nombrePeriodo=\"nombrePeriodo\"\n                    :nombreJornada=\"nombreJornada\"\n                    :nombreDirector=\"nombreDirector\"\n                    :idNivel=\"idNivel\"\n                    :umbralesA=\"umbralesA\"\n                    :umbralesT=\"umbralesT\"\n                    :pesosPeriodos=\"pesosPeriodos\"\n                    :tipoValComp=\"tipoValComp\"\n                    :promCompor=\"promCompor\"\n                    :letrasCompor=\"letrasCompor\"\n                    :firmasBoletin=\"firmasBoletin\"\n                  />\n                </div>\n              </b-col>\n            </b-row>\n            <b-row v-if=\"idBoletin==4\"> \n              <b-col lg=\"12\">\n                <b-card>\n                  <template #header>\n                    <h5 class=\"mb-0\"><b-icon icon=\"card-checklist\" aria-hidden=\"true\"></b-icon> BOLETINES POR PERIODO</h5>\n                  </template>\n                  <b-card-text>\n                    <b-row>\n                      <b-col lg=\"2\">\n                        <b-form-group label=\"Periodo:\" label-for=\"periodo\" class=\"etiqueta\">\n                          <b-form-select id=\"periodo\" ref=\"periodo\" v-model=\"idPeriodo\" :options=\"comboPeriodos\" @change=\"idSede=null,idCurso=null,mostrarBoletines=null\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"6\">\n                        <b-form-group label=\"Seleccione la Sede:\" label-for=\"sedes\" class=\"etiqueta\">\n                          <b-form-select  id=\"sedes\" ref=\"sedes\" v-model=\"idSede\" :options=\"comboSedes\" @change=\"idCurso=null,ocuparComboCursosSede(),mostrarBoletines=null\" :disabled=\"idPeriodo!=null ? false : true\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"4\">\n                        <b-form-group label=\"Seleccione el Curso:\" label-for=\"cursos\" class=\"etiqueta\">\n                          <b-form-select id=\"cursos\" ref=\"cursos\" v-model=\"idCurso\" :options=\"comboCursosSede\" @change=\"consultarEstudiantes(),mostrarBoletines=null\" :disabled=\"idSede!=null ? false : true\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                    </b-row>\n                  </b-card-text>\n                </b-card>\n                <div v-if=\"idNivel == 1\">\n                  <BoletinPreePromocionado\n                    v-if=\"mostrarBoletines\"\n                    :estudiantesSeleccionados=\"estudiantesSeleccionados\"\n                    :listaAreasAsignaturas=\"listaAreasAsignaturas\"\n                    :listaDescriptores=\"listaDescriptores\"\n                    :notas=\"notas\"\n                    :datosEstudiantes=\"datosEstudiantes\"\n                    :anio=\"Number($store.state.aLectivo)\"\n                    :periodoActual=\"idPeriodo\"\n                    :periodosVisibles=\"periodosVisibles\"\n                    :nombreSede=\"nombreSede\"\n                    :nombreCurso=\"nombreCurso\"\n                    :nombrePeriodo=\"nombrePeriodo\"\n                    :nombreJornada=\"nombreJornada\"\n                    :nombreDirector=\"nombreDirector\"\n                    :idNivel=\"idNivel\"\n                    :umbralesA=\"umbralesA\"\n                    :umbralesT=\"umbralesT\"\n                    :pesosPeriodos=\"pesosPeriodos\"\n                    :tipoValComp=\"tipoValComp\"\n                    :promCompor=\"promCompor\"\n                    :escalaPreescolar=\"escalaPreescolar\"\n                    :nuevaEscalaPreescolar=\"nuevaEscalaPreescolar\"\n                    :firmasBoletin=\"firmasBoletin\"\n                  />\n                </div>\n                <div v-else>\n                  <BoletinPeriodoPromocionado\n                    v-if=\"mostrarBoletines\"\n                    :estudiantesSeleccionados=\"estudiantesSeleccionados\"\n                    :listaAreasAsignaturas=\"listaAreasAsignaturas\"\n                    :listaDescriptores=\"listaDescriptores\"\n                    :notas=\"notas\"\n                    :datosEstudiantes=\"datosEstudiantes\"\n                    :anio=\"Number($store.state.aLectivo)\"\n                    :periodoActual=\"idPeriodo\"\n                    :periodosVisibles=\"periodosVisibles\"\n                    :nombreSede=\"nombreSede\"\n                    :nombreCurso=\"nombreCurso\"\n                    :nombrePeriodo=\"nombrePeriodo\"\n                    :nombreJornada=\"nombreJornada\"\n                    :nombreDirector=\"nombreDirector\"\n                    :idNivel=\"idNivel\"\n                    :umbralesA=\"umbralesA\"\n                    :umbralesT=\"umbralesT\"\n                    :pesosPeriodos=\"pesosPeriodos\"\n                    :tipoValComp=\"tipoValComp\"\n                    :promCompor=\"promCompor\"\n                    :letrasCompor=\"letrasCompor\"\n                    :firmasBoletin=\"firmasBoletin\"\n                  />\n                </div>\n              </b-col>\n            </b-row>\n            <b-row v-if=\"idBoletin==10\"> \n              <b-col lg=\"12\">\n                <b-card>\n                  <template #header>\n                    <h5 class=\"mb-0\"><b-icon icon=\"card-checklist\" aria-hidden=\"true\"></b-icon> BOLETINES DEFINITIVOS</h5>\n                  </template>\n                  <b-card-text>\n                    <b-row>\n                      <b-col lg=\"6\">\n                        <b-form-group label=\"Seleccione la Sede:\" label-for=\"sedes\" class=\"etiqueta\">\n                          <b-form-select  id=\"sedes\" ref=\"sedes\" v-model=\"idSede\" :options=\"comboSedes\" @change=\"idCurso=null,ocuparComboCursosSede(),mostrarBoletines=null\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                      <b-col lg=\"4\">\n                        <b-form-group label=\"Seleccione el Curso:\" label-for=\"cursos\" class=\"etiqueta\">\n                          <b-form-select id=\"cursos\" ref=\"cursos\" v-model=\"idCurso\" :options=\"comboCursosSede\" @change=\"consultarEstudiantes(),mostrarBoletines=null\" :disabled=\"idSede!=null ? false : true\"></b-form-select>\n                        </b-form-group>\n                      </b-col>\n                    </b-row>\n                  </b-card-text>\n                </b-card>\n                <div v-if=\"idNivel == 1\">\n                  <BoletinPreeFinal v-if=\"mostrarBoletines\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :escalaPreescolar=\"escalaPreescolar\" :nuevaEscalaPreescolar=\"nuevaEscalaPreescolar\" :firmasBoletin=\"firmasBoletin\" />\n                </div>\n                <div v-else>\n                  <span v-if=\"$store.state.idInstitucion == '097b7b10-fcaa-11ec-8267-536b07c743c4'\"> <!-- RURAL -->\n                    <BoletinFinalRural v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == '660fa760-fc83-11ec-a1d1-1dc2835404e5'\"> <!--GRANCOLOMBIANO -->\n                    <BoletinFinalGranColombiano v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == '54fd7440-fc81-11ec-a1d1-1dc2835404e5'\"> <!--SANDOVAL -->\n                    <BoletinFinalSandoval v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == 'bd226a20-fc82-11ec-a1d1-1dc2835404e5'\"> <!-- JULIUS -->\n                    <BoletinFinalJulius v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == 'eb58bf60-fc83-11ec-a1d1-1dc2835404e5'\"> <!--INEM --> \n                    <BoletinFinalInem v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == '17ee4f30-fc80-11ec-a1d1-1dc2835404e5'\"> <!--ENSLAP ok--> \n                    <BoletinFinalEnslap v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == 'acaa36d0-fcb1-11ec-8267-536b07c743c4'\"> <!--EMILIANI ok--> \n                    <BoletinFinalEmiliani v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == '7c63ed50-fcb0-11ec-8267-536b07c743c4'\"> <!--SANTIAGO --> \n                    <BoletinFinalSantiago v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4'\"> <!--GUSTAVOROJAS --> \n                    <BoletinFinalGustavo v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4'\"> <!--LIBERTADOR --> \n                    <BoletinFinalLibertador v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4'\"> <!--SILVINO --> \n                    <BoletinFinalSilvino v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else-if=\"$store.state.idInstitucion == 'f0491770-fca8-11ec-8267-536b07c743c4'\"> <!--SILVINO --> \n                    <BoletinFinalGonzalo v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" :idGrado=\"idGrado\" />\n                  </span>\n                  <span v-else>\n                    <BoletinFinal v-if=\"mostrarBoletines\" :listaHabilitaciones=\"listaHabilitaciones\" :estudiantesSeleccionados=\"estudiantesSeleccionados\" :listaAreasAsignaturas=\"listaAreasAsignaturas\" :listaDescriptores=\"listaDescriptores\" :notas=\"notas\" :datosEstudiantes=\"datosEstudiantes\" :anio=\"Number($store.state.aLectivo)\" :periodoActual=\"idPeriodo\" :periodosVisibles=\"periodosVisibles\" :nombreSede=\"nombreSede\" :nombreCurso=\"nombreCurso\" :nombrePeriodo=\"nombrePeriodo\" :nombreJornada=\"nombreJornada\" :nombreDirector=\"nombreDirector\" :idNivel=\"idNivel\" :umbralesA=\"umbralesA\" :umbralesT=\"umbralesT\" :pesosPeriodos=\"pesosPeriodos\" :tipoValComp=\"tipoValComp\" :promCompor=\"promCompor\" :letrasCompor=\"letrasCompor\" :firmasBoletin=\"firmasBoletin\" :descC1=\"descC1\" :descC2=\"descC2\" :descC3=\"descC3\" />\n                  </span>\n                </div>\n              </b-col>\n            </b-row>\n            <b-row class=\"mt-2\" v-if=\"idCurso!=null\">\n              <b-col lg=\"12\"><hr></b-col>\n              <b-col lg=\"12\">\n                <div v-if=\"btnCargando\">\n                  <div class=\"text-center m-5 text-primary\">\n                    <b-spinner style=\"width: 3rem; height: 3rem;\" label=\"Spinner\"></b-spinner>\n                    <br><strong>Cargando planilla...</strong>\n                  </div>\n                </div>\n                <div v-else>\n                  <vue-good-table ref=\"estudiantes\" :columns=\"encabColumnas\" :rows=\"datosEstudiantes\" @on-row-click=\"mostrarBoletines=false\" styleClass=\"vgt-table condensed bordered striped\" :line-numbers=\"true\"\n                  :select-options=\"{enabled: true,selectionText: 'estudiantes seleccionados',clearSelectionText: 'Limpiar',}\">\n                    <template #selected-row-actions>\n                      <button class=\"small btn btn-primary\" @click=\"procesarBoletinesFinales()\">Procesar Boletines para Impresin</button>\n                    </template>\n                    <div slot=\"emptystate\">\n                      <h5 class=\"text-danger ml-5\">No existen estudiantes matriculados</h5>\n                    </div>\n                  </vue-good-table>\n                </div>\n              </b-col>\n            </b-row>\n          </b-card-text>\n        </b-card>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\"\n  import * as CONFIG from '@/assets/config.js'\n  import 'vue-good-table/dist/vue-good-table.css'\n  import { VueGoodTable } from 'vue-good-table'\n  import BoletinPeriodoInem from '@/views/reportes/boletines/BoletinPeriodoInem'\n  import BoletinPeriodoGranColombiano from '@/views/reportes/boletines/BoletinPeriodoGranColombiano'\n  import BoletinPeriodoGustavoRojas from '@/views/reportes/boletines/BoletinPeriodoGustavoRojas'\n  import BoletinPeriodoJulius from '@/views/reportes/boletines/BoletinPeriodoJulius'\n  import BoletinPeriodoEmiliani from '@/views/reportes/boletines/BoletinPeriodoEmiliani'\n  import BoletinPeriodo from '@/views/reportes/boletines/BoletinPeriodo'\n  import BoletinPree from '@/views/reportes/boletines/BoletinPree'\n  import BoletinPeriodoRetirado from '@/views/reportes/boletines/BoletinPeriodoRetirado'\n  import BoletinPreeRetirado from '@/views/reportes/boletines/BoletinPreeRetirado'\n  import BoletinPeriodoReubicado from '@/views/reportes/boletines/BoletinPeriodoReubicado'\n  import BoletinPreeReubicado from '@/views/reportes/boletines/BoletinPreeReubicado'\n  import BoletinPeriodoPromocionado from '@/views/reportes/boletines/BoletinPeriodoPromocionado'\n  import BoletinPreePromocionado from '@/views/reportes/boletines/BoletinPreePromocionado'\n\n  import BoletinPreeFinal from '@/views/reportes/boletines/BoletinPreeFinal'\n\n  import BoletinFinalRural from '@/views/reportes/boletines/BoletinFinalRural'\n  import BoletinFinalGranColombiano from '@/views/reportes/boletines/BoletinFinalGranColombiano'\n  import BoletinFinalSandoval from '@/views/reportes/boletines/BoletinFinalSandoval'\n  import BoletinFinalJulius from '@/views/reportes/boletines/BoletinFinalJulius'\n  import BoletinFinalInem from '@/views/reportes/boletines/BoletinFinalInem'\n  import BoletinFinalEnslap from '@/views/reportes/boletines/BoletinFinalEnslap'\n  import BoletinFinalEmiliani from '@/views/reportes/boletines/BoletinFinalEmiliani'\n  import BoletinFinalSantiago from '@/views/reportes/boletines/BoletinFinalSantiago'\n  import BoletinFinalGustavo from '@/views/reportes/boletines/BoletinFinalGustavo'\n  import BoletinFinalLibertador from '@/views/reportes/boletines/BoletinFinalLibertador'\n  import BoletinFinalSilvino from '@/views/reportes/boletines/BoletinFinalSilvino'\n  import BoletinFinalGonzalo from '@/views/reportes/boletines/BoletinFinalGonzalo'\n  import BoletinFinal from '@/views/reportes/boletines/BoletinFinal'\n\n  export default {\n    name: 'boletines',\n    components: {\n      VueGoodTable,\n      BoletinPeriodoInem,\n      BoletinPeriodoGranColombiano,\n      BoletinPeriodoGustavoRojas,\n      BoletinPeriodoJulius,\n      BoletinPeriodoEmiliani,\n      BoletinPeriodo,\n      BoletinPree,\n      BoletinPeriodoRetirado,\n      BoletinPreeRetirado,\n      BoletinPeriodoReubicado,\n      BoletinPreeReubicado,\n      BoletinPeriodoPromocionado,\n      BoletinPreePromocionado,\n      BoletinPreeFinal,\n      BoletinFinal,\n      BoletinFinalRural,\n      BoletinFinalGranColombiano,\n      BoletinFinalSandoval,\n      BoletinFinalJulius,\n      BoletinFinalInem,\n      BoletinFinalEnslap,\n      BoletinFinalEmiliani,\n      BoletinFinalSantiago,\n      BoletinFinalGustavo,\n      BoletinFinalLibertador,\n      BoletinFinalSilvino,\n      BoletinFinalGonzalo\n    },\n    data () {\n      return {\n        idBoletin: null,\n        idSede: null,\n        comboSedes: [],\n        idPeriodo: null,\n        comboPeriodos: null,\n        idCurso: null,\n        comboCursosSede: [],\n        nombreSede: null,\n        nombreCurso: null,\n        nombrePeriodo: null,\n        nombreJornada: null,\n        nombreDirector: null,\n        coordinador: null,\n        idNivel: null,\n        btnCargando: false,\n        datosSeccion: {},\n        encabColumnas: [\n          { label: 'Apellidos y Nombres del Estudiante', field: 'nombre', sortable: false, tdClass: this.tdClassFuncE },\n          { label: 'Estado', field: 'estado', sortable: false, tdClass: this.tdClassFuncE },\n        ],\n        estudiantesSeleccionados: [],\n        datosEstudiantes: [],\n        listaAreasAsignaturas: [],\n        listaDescriptores: [],\n        notas: [],\n        periodosVisibles: [],\n        mostrarBoletines: false,\n        umbralesA: [],\n        umbralesT: [],\n        pesosPeriodos: [],\n        tipoValComp: null,\n        promCompor: null,\n        firmasBoletin: null,\n        escalaPreescolar: {},\n        nuevaEscalaPreescolar: [],\n        letrasCompor: [],\n        descC1: null,\n        descC2: null,\n        descC3: null,\n        listaReportes: [],\n        idGrado: null,\n        listaHabilitaciones: []\n      }\n    },\n    methods: {\n      procesarBoletinesFinales() {\n        if (this.idNivel == 1 && (this.$store.state.idInstitucion == '17ee4f30-fc80-11ec-a1d1-1dc2835404e5' || this.$store.state.idInstitucion == '097b7b10-fcaa-11ec-8267-536b07c743c4' || this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4')) {\n          this.listaReportes = []\n          this.idPeriodo = this.$store.state.idInstitucion == '17ee4f30-fc80-11ec-a1d1-1dc2835404e5' ? 4 : 5\n          this.$refs.estudiantes.selectedRows.forEach(element => {\n            this.listaReportes.push({ 'id': element.idMatricula, 'estudiante': element.nombre, 'pue': element.puesto, 'pro': element.promedio })\n          })\n          const periodo = 'DEFINITIVO'\n          let sede = document.getElementById('sedes')[document.getElementById('sedes').selectedIndex].text\n          let curso = document.getElementById('cursos')[document.getElementById('cursos').selectedIndex].text\n          let uri = \"?datos=\" + JSON.stringify(this.listaReportes) + \"&ie=\" + this.$store.state.nombreInstitucion + \"&vigencia=\" + this.$store.state.aLectivo + \"&escudo=\" + this.$store.state.escudoInstitucion + \"&sede=\" + sede + \"&idCurso=\" + this.idCurso + \"&curso=\" + curso + \"&jornada=\" + this.nombreJornada + \"&director=\" + this.nombreDirector + \"&periodo=\" + periodo + \"&idPeriodo=\" + this.idPeriodo + \"&idIe=\" + this.$store.state.idInstitucion + \"&idNivel=\" + this.idNivel + \"&puesto=\" + this.puesto +\n          \"&minBaj=\" + this.$store.state.datosSecciones[0].minBaj + \"&maxBaj=\" + this.$store.state.datosSecciones[0].maxBaj + \"&minBas=\" + this.$store.state.datosSecciones[0].minBas + \"&maxBas=\" + this.$store.state.datosSecciones[0].maxBas + \"&minAlt=\" + this.$store.state.datosSecciones[0].minAlt + \"&maxAlt=\" + this.$store.state.datosSecciones[0].maxAlt + \"&minSup=\" + this.$store.state.datosSecciones[0].minSup + \"&maxSup=\" + this.$store.state.datosSecciones[0].maxSup\n          let encoded = encodeURI(uri);\n          //window.open(\"http://localhost/siedutunja/php/boletines/\" + this.$store.state.daneInstitucion + \"as.php\" + encoded,\"_blank\")\n          window.open(\"https://siedutunja.gov.co/php/boletines/\" + this.$store.state.daneInstitucion + \"asFinal.php\" + encoded,\"_blank\")\n        } else {\n          this.btnCargando = true\n          this.mostrarBoletines = true\n          this.estudiantesSeleccionados = this.$refs.estudiantes.selectedRows\n          if (this.idPeriodo == 1) this.periodosVisibles = [1]\n          if (this.idPeriodo == 2) this.periodosVisibles = [1,2]\n          if (this.idPeriodo == 3) this.periodosVisibles = [1,2,3]\n          if (this.idPeriodo == 4) this.periodosVisibles = [1,2,3,4]\n          if (this.idPeriodo == 5) this.periodosVisibles = [1,2,3,4]\n          this.umbralesA = [this.datosSeccion.minBas,this.datosSeccion.minAlt,this.datosSeccion.minSup,this.datosSeccion.maxSup]\n          this.umbralesT = [this.datosSeccion.minBasT,this.datosSeccion.minAltT,this.datosSeccion.minSupT,this.datosSeccion.maxSupT]\n          this.pesosPeriodos = [this.datosSeccion.pesoP1,this.datosSeccion.pesoP2,this.datosSeccion.pesoP3,this.datosSeccion.pesoP4]\n          this.tipoValComp = this.datosSeccion.tipoValComp\n          this.promCompor = this.datosSeccion.promCompor\n          this.escalaPreescolar = {I: this.datosSeccion.minBaj, B: this.datosSeccion.minBas, A: this.datosSeccion.minAlt, S: this.datosSeccion.maxSup}\n          this.nuevaEscalaPreescolar = [\n            {letra: this.datosSeccion.preeL1, umbral: this.datosSeccion.minBaj, desempeno: this.datosSeccion.preeC1},\n            {letra: this.datosSeccion.preeL2, umbral: this.datosSeccion.minBas, desempeno: this.datosSeccion.preeC2},\n            {letra: this.datosSeccion.preeL3, umbral: this.datosSeccion.minAlt, desempeno: this.datosSeccion.preeC3},\n            {letra: this.datosSeccion.preeL4, umbral: this.datosSeccion.maxSup, desempeno: this.datosSeccion.preeC4},\n          ]\n          this.descC1 = this.datosSeccion.nombreC1 != '' && this.datosSeccion.nombreC1 != null ? this.datosSeccion.nombreC1.substr(0,3) : 'C1'\n          this.descC2 = this.datosSeccion.nombreC2 != '' && this.datosSeccion.nombreC2 != null ? this.datosSeccion.nombreC2.substr(0,3) : 'C2'\n          this.descC3 = this.datosSeccion.nombreC3 != '' && this.datosSeccion.nombreC3 != null ? this.datosSeccion.nombreC3.substr(0,3) : 'C3'\n          this.letrasCompor = [this.datosSeccion.compL1,this.datosSeccion.compL2,this.datosSeccion.compL3,this.datosSeccion.compL4]\n          if (this.$store.state.daneInstitucion === '115001002602') { // Sandoval\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>MARINA PEDRAZA CANARIA<br>Rectora</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '315001000293') { // Grancolombiano\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>JUAN CARLOS GONZLEZ GALINDO<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001002807') { // Gustavo Rojas\n            let cordi = ''\n            if (this.nombreSede == 'CLUB DE LEONES') {\n              cordi = this.idGrado === '08' ? 'ELSA YOLANDA CASCANTE MOLINA' : 'CESAR MALPICA ROJAS'\n            } else if (this.nombreSede == 'CENTRAL') {\n              cordi = 'ELSA YOLANDA CASCANTE MOLINA'\n            } else {\n              cordi = 'GLORIA INES VARGAS AVENDAO'\n            }\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${cordi}<br>Coordinador(a)</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001000367') { // Inem\n            let cordi = ''\n            if (this.nombreSede == 'SEDE PRINCIPAL') {\n              cordi = '-'\n            } else if (this.nombreSede == 'SEDE LAS AMERICAS') {\n              cordi = '-'\n            } else if (this.nombreSede == 'SEDE ANTONIO RICAURTE') {\n              cordi = '-'\n            } else {\n              cordi = '-'\n            }\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${cordi}<br>Coordinador(a)</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001002751') { // Julius\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>FLORIBERTO SANCHEZ SALAZAR<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001001061') { // Simon Bolivar\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>MARTHA CECILIA GARCIA MORENO<br>Rectora</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '215001001007') { // Rural\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>JULIO RICARDO ESTUPIN CCERES<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '315001001613') { // Emiliani\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>JENARO ANTONIO ESPITIA ORDOEZ<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001000065') { // Silvino\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>OMAR SANDOVAL FONSECA<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001000430') { // Santiago\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>MAURICIO FONSECA ALVAREZ<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '315001001893') { // Gonzalo Suarez\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>CAMILO GALN GALN<br>Coordinador</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else {  // Enslap\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          }\n          setTimeout(()=>{\n            this.btnCargando = false\n          },500)\n        }\n      },\n      procesarBoletines() {\n        if (this.idNivel == 1 && (this.$store.state.idInstitucion == '17ee4f30-fc80-11ec-a1d1-1dc2835404e5' || this.$store.state.idInstitucion == '097b7b10-fcaa-11ec-8267-536b07c743c4' || this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4')) {\n          this.listaReportes = []\n          this.$refs.estudiantes.selectedRows.forEach(element => {\n            this.listaReportes.push({ 'id': element.idMatricula, 'estudiante': element.nombre, 'pue': element.puesto, 'pro': element.promedio })\n          })\n          //console.log(JSON.stringify(this.listaReportes))\n          let sede = document.getElementById('sedes')[document.getElementById('sedes').selectedIndex].text\n          let curso = document.getElementById('cursos')[document.getElementById('cursos').selectedIndex].text\n          let periodo = document.getElementById('periodo')[document.getElementById('periodo').selectedIndex].text\n          let uri = \"?datos=\" + JSON.stringify(this.listaReportes) + \"&ie=\" + this.$store.state.nombreInstitucion + \"&vigencia=\" + this.$store.state.aLectivo + \"&escudo=\" + this.$store.state.escudoInstitucion + \"&sede=\" + sede + \"&idCurso=\" + this.idCurso + \"&curso=\" + curso + \"&jornada=\" + this.nombreJornada + \"&director=\" + this.nombreDirector + \"&periodo=\" + periodo + \"&idPeriodo=\" + this.idPeriodo + \"&idIe=\" + this.$store.state.idInstitucion + \"&idNivel=\" + this.idNivel + \"&puesto=\" + this.puesto +\n          \"&minBaj=\" + this.$store.state.datosSecciones[0].minBaj + \"&maxBaj=\" + this.$store.state.datosSecciones[0].maxBaj + \"&minBas=\" + this.$store.state.datosSecciones[0].minBas + \"&maxBas=\" + this.$store.state.datosSecciones[0].maxBas + \"&minAlt=\" + this.$store.state.datosSecciones[0].minAlt + \"&maxAlt=\" + this.$store.state.datosSecciones[0].maxAlt + \"&minSup=\" + this.$store.state.datosSecciones[0].minSup + \"&maxSup=\" + this.$store.state.datosSecciones[0].maxSup\n          let encoded = encodeURI(uri);\n          //window.open(\"http://localhost/siedutunja/php/boletines/\" + this.$store.state.daneInstitucion + \"as.php\" + encoded,\"_blank\")\n          window.open(\"https://siedutunja.gov.co/php/boletines/\" + this.$store.state.daneInstitucion + \"as.php\" + encoded,\"_blank\")\n        } else {\n          this.btnCargando = true\n          this.mostrarBoletines = true\n          this.estudiantesSeleccionados = this.$refs.estudiantes.selectedRows\n          if (this.idPeriodo == 1) this.periodosVisibles = [1]\n          if (this.idPeriodo == 2) this.periodosVisibles = [1,2]\n          if (this.idPeriodo == 3) this.periodosVisibles = [1,2,3]\n          if (this.idPeriodo == 4) this.periodosVisibles = [1,2,3,4]\n          if (this.idPeriodo == 5) this.periodosVisibles = [1,2,3,4]\n          this.umbralesA = [this.datosSeccion.minBas,this.datosSeccion.minAlt,this.datosSeccion.minSup,this.datosSeccion.maxSup]\n          this.umbralesT = [this.datosSeccion.minBasT,this.datosSeccion.minAltT,this.datosSeccion.minSupT,this.datosSeccion.maxSupT]\n          this.pesosPeriodos = [this.datosSeccion.pesoP1,this.datosSeccion.pesoP2,this.datosSeccion.pesoP3,this.datosSeccion.pesoP4]\n          this.tipoValComp = this.datosSeccion.tipoValComp\n          this.promCompor = this.datosSeccion.promCompor\n          this.escalaPreescolar = {I: this.datosSeccion.minBaj, B: this.datosSeccion.minBas, A: this.datosSeccion.minAlt, S: this.datosSeccion.maxSup}\n          this.nuevaEscalaPreescolar = [\n            {letra: this.datosSeccion.preeL1, umbral: this.datosSeccion.minBaj, desempeno: this.datosSeccion.preeC1},\n            {letra: this.datosSeccion.preeL2, umbral: this.datosSeccion.minBas, desempeno: this.datosSeccion.preeC2},\n            {letra: this.datosSeccion.preeL3, umbral: this.datosSeccion.minAlt, desempeno: this.datosSeccion.preeC3},\n            {letra: this.datosSeccion.preeL4, umbral: this.datosSeccion.maxSup, desempeno: this.datosSeccion.preeC4},\n          ]\n          this.descC1 = this.datosSeccion.nombreC1 != '' && this.datosSeccion.nombreC1 != null ? this.datosSeccion.nombreC1.substr(0,3) : 'C1'\n          this.descC2 = this.datosSeccion.nombreC2 != '' && this.datosSeccion.nombreC2 != null ? this.datosSeccion.nombreC2.substr(0,3) : 'C2'\n          this.descC3 = this.datosSeccion.nombreC3 != '' && this.datosSeccion.nombreC3 != null ? this.datosSeccion.nombreC3.substr(0,3) : 'C3'\n          this.letrasCompor = [this.datosSeccion.compL1,this.datosSeccion.compL2,this.datosSeccion.compL3,this.datosSeccion.compL4]\n          if (this.$store.state.daneInstitucion === '115001002602') { // Sandoval\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>MARINA PEDRAZA CANARIA<br>Rectora</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '315001000293') { // Grancolombiano\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>JUAN CARLOS GONZLEZ GALINDO<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001002807') { // Gustavo Rojas\n            let cordi = ''\n            if (this.nombreSede == 'CLUB DE LEONES') {\n              cordi = this.idGrado === '08' ? 'ELSA YOLANDA CASCANTE MOLINA' : 'CESAR MALPICA ROJAS'\n            } else if (this.nombreSede == 'CENTRAL') {\n              cordi = 'ELSA YOLANDA CASCANTE MOLINA'\n            } else {\n              cordi = 'GLORIA INES VARGAS AVENDAO'\n            }\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${cordi}<br>Coordinador(a)</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001000367') { // Inem\n            let cordi = ''\n            if (this.nombreSede == 'SEDE PRINCIPAL') {\n              cordi = '-'\n            } else if (this.nombreSede == 'SEDE LAS AMERICAS') {\n              cordi = '-'\n            } else if (this.nombreSede == 'SEDE ANTONIO RICAURTE') {\n              cordi = '-'\n            } else {\n              cordi = '-'\n            }\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${cordi}<br>Coordinador(a)</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001002751') { // Julius\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>FLORIBERTO SANCHEZ SALAZAR<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001001061') { // Simon Bolivar\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>MARTHA CECILIA GARCIA MORENO<br>Rectora</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '215001001007') { // Rural\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>JULIO RICARDO ESTUPIN CCERES<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '315001001613') { // Emiliani\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>JENARO ANTONIO ESPITIA ORDOEZ<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001000065') { // Silvino\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>OMAR SANDOVAL FONSECA<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '115001000430') { // Santiago\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>MAURICIO FONSECA ALVAREZ<br>Rector</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else if (this.$store.state.daneInstitucion === '315001001893') { // Gonzalo Suarez\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>CAMILO GALN GALN<br>Coordinador</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          } else {  // Enslap\n            this.firmasBoletin = `\n              <table class=\"firmas\" style=\"width: 100%;\">\n                <tr>\n                  <td style=\"width: 50%;\">\n                    <p>________________________________________<br>${this.nombreDirector}<br>Director(a) de Curso</p>\n                  </td>\n                </tr>\n              </table>\n            `\n          }\n          setTimeout(()=>{\n            this.btnCargando = false\n          },500)\n        }\n      },\n      async consultarNotas() {\n        this.notas = []\n        if (this.idBoletin == 1) {\n          await axios\n          .get(CONFIG.ROOT_PATH + 'boletines/notas/curso/periodo', {params: {idCurso: this.idCurso, periodo: this.idPeriodo, vigencia: this.$store.state.aLectivo}})\n          .then(response => {\n            if (response.data.error){\n              this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Notas boletines curso periodo')\n              this.btnCargando = false\n            } else{\n              if (response.data.datos != 0) {\n                this.notas = response.data.datos\n                //console.log(JSON.stringify(this.notas))\n              }\n            }\n          })\n          .catch(err => {\n            this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Notas boletines curso periodo. Intente ms tarde.' + err)\n            this.btnCargando = false\n          })\n        } else if (this.idBoletin == 2) { //RETIRADOS\n          await axios\n          .get(CONFIG.ROOT_PATH + 'boletines/notas/curso/periodo/retirados', {params: {idCurso: this.idCurso, periodo: this.idPeriodo, vigencia: this.$store.state.aLectivo}})\n          .then(response => {\n            if (response.data.error){\n              this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Notas boletines curso periodo')\n              this.btnCargando = false\n            } else{\n              if (response.data.datos != 0) {\n                this.notas = response.data.datos\n                //console.log(JSON.stringify(this.notas))\n              }\n            }\n          })\n          .catch(err => {\n            this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Notas boletines curso periodo. Intente ms tarde.' + err)\n            this.btnCargando = false\n          })\n        } else if (this.idBoletin == 3) { //UBICADOS - REUBICADOS\n          await axios\n          .get(CONFIG.ROOT_PATH + 'boletines/notas/curso/periodo/reubicados', {params: {idCurso: this.idCurso, periodo: this.idPeriodo, vigencia: this.$store.state.aLectivo}})\n          .then(response => {\n            if (response.data.error){\n              this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Notas boletines curso periodo')\n              this.btnCargando = false\n            } else{\n              if (response.data.datos != 0) {\n                this.notas = response.data.datos\n                //console.log(JSON.stringify(this.notas))\n              }\n            }\n          })\n          .catch(err => {\n            this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Notas boletines curso periodo. Intente ms tarde.' + err)\n            this.btnCargando = false\n          })\n        } else if (this.idBoletin == 4) { //PROMOCIONADO ANTICIPADAMENTE\n          await axios\n          .get(CONFIG.ROOT_PATH + 'boletines/notas/curso/periodo/promocionados', {params: {idCurso: this.idCurso, periodo: this.idPeriodo, vigencia: this.$store.state.aLectivo}})\n          .then(response => {\n            if (response.data.error){\n              this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Notas boletines curso periodo')\n              this.btnCargando = false\n            } else{\n              if (response.data.datos != 0) {\n                this.notas = response.data.datos\n                //console.log(JSON.stringify(this.notas))\n              }\n            }\n          })\n          .catch(err => {\n            this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Notas boletines curso periodo. Intente ms tarde.' + err)\n            this.btnCargando = false\n          })\n        } else if (this.idBoletin == 10) {\n          let apiRuta = 0\n          if (this.$store.state.idInstitucion == '8a1bd1e0-fcb2-11ec-8267-536b07c743c4' || this.$store.state.idInstitucion == 'c50f3d80-fca0-11ec-8267-536b07c743c4') { // LIBERTADOR SILVINO\n            this.idPeriodo = 5\n            apiRuta = 'boletines/notas/curso/periodo5'\n          } else if (this.$store.state.idInstitucion == '660fa760-fc83-11ec-a1d1-1dc2835404e5') {  // Gran Colombiano\n            this.idPeriodo = 4\n            apiRuta = 'boletines/notas/curso/finales/acumulado'\n          } else if (this.$store.state.idInstitucion == 'f5529ba0-fcb3-11ec-8267-536b07c743c4') {  // Gustavo Rojas\n            this.idPeriodo = 5\n            apiRuta = 'boletines/notas/curso/finales/acumulado'\n          }\n          else {\n            this.idPeriodo = 4\n            apiRuta = 'boletines/notas/curso/finales/acumulado'\n          }\n          await axios\n          .get(CONFIG.ROOT_PATH + apiRuta, {params: {idCurso: this.idCurso, periodo: this.idPeriodo, vigencia: this.$store.state.aLectivo}})\n          .then(response => {\n            if (response.data.error){\n              this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Notas boletines curso periodo')\n              this.btnCargando = false\n            } else{\n              if (response.data.datos != 0) {\n                this.notas = response.data.datos\n              }\n            }\n          })\n          .catch(err => {\n            this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Notas boletines curso periodo. Intente ms tarde.' + err)\n            this.btnCargando = false\n          })\n        }\n      },\n      async consultarAreasAsignaturas() {\n        this.listaAreasAsignaturas = []\n        await axios\n        .get(CONFIG.ROOT_PATH + 'boletines/areasasignaturas/curso', {params: {idCurso: this.idCurso}})\n        .then(response => {\n          if (response.data.error){\n            this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Lista areas-asignaturas curso')\n            this.btnCargando = false\n          } else{\n            if (response.data.datos != 0) {\n              this.listaAreasAsignaturas = response.data.datos\n              //console.log(JSON.stringify(this.listaAreasAsignaturas))\n            }\n          }\n        })\n        .catch(err => {\n          this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Lista areas-asignaturas curso. Intente ms tarde.' + err)\n          this.btnCargando = false\n        })\n      },\n      async consultarDescriptores() {\n        this.listaDescriptores = []\n        await axios\n        .get(CONFIG.ROOT_PATH + 'boletines/descriptores/curso', {params: {idCurso: this.idCurso, periodo: 5}})\n        .then(response => {\n          if (response.data.error){\n            this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Lista descriptores curso')\n            this.btnCargando = false\n          } else{\n            if (response.data.datos != 0) {\n              this.listaDescriptores = response.data.datos\n              //console.log(JSON.stringify(this.listaDescriptores))\n            }\n          }\n        })\n        .catch(err => {\n          this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Lista descriptores curso. Intente ms tarde.' + err)\n          this.btnCargando = false\n        })\n      },\n      async consultarEstudiantes() { \n        this.btnCargando = true\n        if (this.idCurso != null) { \n          this.$store.state.datosCursos.forEach(element => {\n            if (element.id == this.idCurso) {\n              this.nombreJornada = element.jornada\n              this.nombreDirector = element.docente\n              this.idNivel = element.id_nivel\n              this.idGrado = element.id_grado\n            }\n          })\n          this.nombreSede = document.getElementById('sedes')[document.getElementById('sedes').selectedIndex].text\n          this.nombreCurso = document.getElementById('cursos')[document.getElementById('cursos').selectedIndex].text\n          this.idBoletin == 10 ? this.nombrePeriodo = 'DEFINITIVO' : this.nombrePeriodo = document.getElementById('periodo')[document.getElementById('periodo').selectedIndex].text\n          this.datosEstudiantes = []\n          let apiRuta = 0\n          if (this.idBoletin == 1) apiRuta = 'boletines/listacurso/boletines'\n          else if (this.idBoletin == 2) apiRuta = 'boletines/listacurso/boletines/retirados'\n          else if (this.idBoletin == 3) apiRuta = 'boletines/listacurso/boletines/reubicados'\n          else if (this.idBoletin == 4) apiRuta = 'boletines/listacurso/boletines/promocionados'\n          else if (this.idBoletin == 10) apiRuta = 'boletines/listacurso/boletines'\n          await axios\n          .get(CONFIG.ROOT_PATH + apiRuta, { params: { idCurso: this.idCurso, vigencia: this.$store.state.aLectivo }})\n          .then(response => {\n            if (response.data.error){\n              this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Consulta Lista Curso')\n              this.btnCargando = false\n            } else{\n              if (response.data.datos != 0) {\n                this.datosEstudiantes = response.data.datos\n                if (this.idNivel == 1 && this.$store.state.idInstitucion == '17ee4f30-fc80-11ec-a1d1-1dc2835404e5') {\n                  this.btnCargando = false\n                } else {\n                  this.consultarNotas()\n                  this.consultarAreasAsignaturas()\n                  this.consultarHabilitaciones()\n                  this.consultarDescriptores()\n                }\n              }\n            }\n          })\n          .catch(err => {\n            this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Lista Curso. Intente ms tarde.' + err)\n            this.btnCargando = false\n          })\n        }\n        //console.log(JSON.stringify(this.datosEstudiantes))\n        this.btnCargando = false\n      },\n      consultarHabilitaciones() {\n        this.listaHabilitaciones = []\n        axios\n        .get(CONFIG.ROOT_PATH + 'boletines/habilitaciones/curso', {params: {vigencia: this.$store.state.aLectivo}})\n        .then(response => {\n          if (response.data.error){\n            this.mensajeEmergente('danger',CONFIG.TITULO_MSG,response.data.mensaje + ' - Consulta habilitacion')\n            this.btnCargando = false\n          } else{\n            if (response.data.datos != 0) {\n              this.listaHabilitaciones = response.data.datos\n              //console.log(JSON.stringify(response.data.datos))\n            }\n          }\n        })\n        .catch(err => {\n          this.mensajeEmergente('danger',CONFIG.TITULO_MSG,'Algo salio mal y no se pudo realizar: Consulta habilitacion. Intente ms tarde.' + err)\n        })\n      },\n      async ocuparComboCursosSede() {\n        this.comboCursosSede = []\n        this.$store.state.datosCursos.forEach(element => {\n          if (element.id_sede == this.idSede) {\n            this.comboCursosSede.push({ 'value': element.id, 'text': element.nomenclatura.toUpperCase() })\n          }\n        })\n      },\n      async ocuparComboSedes() {\n        this.comboSedes = []\n        this.$store.state.datosSedes.forEach(element => {\n          this.comboSedes.push({ 'value': element.id, 'text': element.sede.toUpperCase() })\n        })\n      },\n      async ocuparComboPeriodos() {\n        this.comboPeriodos = []\n        this.$store.state.periodos.forEach(element => {\n          this.comboPeriodos.push({ 'value': element.id, 'text': element.periodo.toUpperCase() })\n        })\n      },\n      tdClassFuncE(row) {\n        if (row.id_estado_actual == 2) { \n          return 'text-danger' \n        }\n        if (row.id_estado_actual == 3 || row.id_estado_actual == 4) { \n          return 'text-warning' \n        }\n      },\n      mensajeEmergente(variante, titulo, contenido) {\n        this.$bvToast.toast(contenido, { title: titulo, variant: variante, toaster: \"b-toaster-top-center\", solid: true, autoHideDelay: 4000, appendToast: false })\n      }\n    },\n    beforeMount() {\n      this.ocuparComboSedes()\n      this.ocuparComboPeriodos()\n      this.datosSeccion = this.$store.state.datosSecciones[this.$store.state.idSeccion - 1]\n      //console.log(JSON.stringify(this.datosSeccion))\n    }\n  }\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Boletines.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Boletines.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Boletines.vue?vue&type=template&id=238aee89&\"\nimport script from \"./Boletines.vue?vue&type=script&lang=js&\"\nexport * from \"./Boletines.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n"],"sourceRoot":""}