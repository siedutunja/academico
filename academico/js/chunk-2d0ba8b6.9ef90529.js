(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba8b6"],{3850:function(o,e,t){"use strict";t.r(e);var r=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("b-row",{staticClass:"mt-2"},[t("b-col",{attrs:{lg:"12"}},[t("b-card",{scopedSlots:o._u([{key:"header",fn:function(){return[t("h5",{staticClass:"mb-0"},[t("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),o._v(" CURSOS POR SEDE Y GRADO")],1)]},proxy:!0},{key:"footer",fn:function(){return[t("em",[o._v("Actualice los datos de un curso haciendo clic en el lapiz.")])]},proxy:!0}])},[t("b-card-text",[t("b-row",[t("b-col",{attrs:{lg:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Seleccione la Sede:","label-for":"sedes"}},[t("b-form-select",{ref:"sedes",attrs:{id:"sedes",options:o.comboSedes},on:{change:function(e){o.idGrado=null,o.ocuparComboGradosSede()}},model:{value:o.idSede,callback:function(e){o.idSede=e},expression:"idSede"}})],1)],1),t("b-col",{attrs:{lg:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Seleccione el Grado:","label-for":"grados"}},[t("b-form-select",{ref:"grados",attrs:{id:"grados",options:o.comboGrados,disabled:null==o.idSede},on:{change:o.verCursosGrado},model:{value:o.idGrado,callback:function(e){o.idGrado=e},expression:"idGrado"}})],1)],1)],1),null!=o.idGrado?t("b-row",{staticClass:"mt-0"},[t("b-col",{attrs:{lg:"12"}},[t("hr")]),t("b-col",{attrs:{lg:"12"}},[t("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:o._u([{key:"header",fn:function(){return[1==o.$store.state.idRol||12==o.$store.state.idRol?t("b-button",{staticClass:"small float-right",attrs:{variant:"dark"},on:{click:o.nuevoCurso}},[o._v("Nuevo Curso")]):o._e(),t("h5",{staticClass:"mb-0"},[t("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),o._v(" Lista de Cursos")],1)]},proxy:!0}],null,!1,1858010172)},[t("b-card-text",[t("b-row",[t("b-col",{attrs:{lg:"12"}},[t("vue-good-table",{attrs:{columns:o.encabColumnas,rows:o.listaCursosGrado,styleClass:"vgt-table condensed bordered striped ","line-numbers":!0},scopedSlots:o._u([{key:"table-row",fn:function(e){return["idCursoGrado"==e.column.field?t("span",[t("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},attrs:{title:"Actualizar Datos del Curso"},on:{click:function(t){return o.seleccionarCursoGrado(e.row)}}},[t("CIcon",{attrs:{name:"cilPencil"}})],1)]):o._e()]}}],null,!1,3654568421)},[t("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[t("h5",{staticClass:"text-danger ml-5"},[o._v("No existen cursos creados en el grado")])])])],1)],1)],1)],1)],1)],1):o._e()],1)],1)],1)],1),t("b-modal",{ref:"modalEditarCursoGrado",attrs:{size:"xl",scrollable:"","hide-footer":"",title:o.datosCursoGrado.editarCurso?"Editar Datos del Curso":"Nuevo Curso","ok-only":""}},[t("div",{staticClass:"mx-3"},[t("div",[t("FichaCursoGrado",{attrs:{datosCursoGrado:o.datosCursoGrado},on:{retorno:o.datosRecibidosCursoGrado}})],1)])])],1)},a=[],s=t("1da1"),n=(t("96cf"),t("ac1f"),t("5319"),t("159b"),t("7db0"),t("bc3a")),i=t.n(n),d=t("9c40"),u=(t("dac4"),t("f617")),c=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("b-row",{staticClass:"mt-2"},[t("b-col",{attrs:{lg:"12"}},[t("b-card",{scopedSlots:o._u([{key:"header",fn:function(){return[t("h5",{staticClass:"mb-0"},[t("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),o._v(" DATOS DEL CURSO")],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"float-right text-medium-emphasis text-info"},[o._v("* Campo requerido")]),t("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"primary"},on:{click:o.validarDatosFormulario}},[o.infoCurso.editarCurso?t("div",[o._v("Actualizar Datos del Curso")]):t("div",[o._v("Guardar el Nuevo Curso")])]),t("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"secondary"},on:{click:o.cancelarFormulario}},[o._v("Cancelar")])]},proxy:!0}])},[t("b-card-text",[t("b-row",[t("b-col",{attrs:{lg:"6",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Descripción del curso*","label-for":"nomenclatura"}},[t("b-form-input",{ref:"nomenclatura",attrs:{id:"nomenclatura",state:o.validateStateC("nomenclatura"),"aria-describedby":"feedCurso",autocomplete:"off",maxlength:"100"},model:{value:o.$v.infoCurso.nomenclatura.$model,callback:function(e){o.$set(o.$v.infoCurso.nomenclatura,"$model","string"===typeof e?e.trim():e)},expression:"$v.infoCurso.nomenclatura.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedCurso"}},[o._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"6",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Jornada*","label-for":"jornada"}},[t("b-form-select",{ref:"jornada",attrs:{id:"jornada",options:o.comboJornadas,state:o.validateStateC("id_jornada"),"aria-describedby":"feedJornada"},model:{value:o.$v.infoCurso.id_jornada.$model,callback:function(e){o.$set(o.$v.infoCurso.id_jornada,"$model",e)},expression:"$v.infoCurso.id_jornada.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedJornada"}},[o._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"6",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Director del Curso*","label-for":"docente"}},[t("b-form-select",{ref:"docente",attrs:{id:"docente",options:o.comboDocentes,state:o.validateStateC("id_director"),"aria-describedby":"feedDoc"},model:{value:o.$v.infoCurso.id_director.$model,callback:function(e){o.$set(o.$v.infoCurso.id_director,"$model",e)},expression:"$v.infoCurso.id_director.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedDoc"}},[o._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Estado del Curso*","label-for":"estado"}},[t("b-form-select",{ref:"estado",attrs:{id:"estado",options:o.comboEstados,state:o.validateStateC("estado"),"aria-describedby":"feedEstado"},model:{value:o.$v.infoCurso.estado.$model,callback:function(e){o.$set(o.$v.infoCurso.estado,"$model",e)},expression:"$v.infoCurso.estado.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedEstado"}},[o._v("Campo requerido.")])],1)],1)],1)],1)],1)],1)],1)],1)},l=[],m=t("1dce"),f=t("b5ae"),C={name:"fichacursogrado",mixins:[m["validationMixin"]],props:{datosCursoGrado:Object},components:{},data:function(){return{infoCurso:{idCursoGrado:null,nomenclatura:null,curso:null,id_grado_sede:null,id_jornada:null,id_director:null,estado:null,editarCurso:!0},comboJornadas:[],comboDocentes:[],comboEstados:[]}},validations:{infoCurso:{nomenclatura:{required:f["required"],minLength:Object(f["minLength"])(4)},id_jornada:{required:f["required"]},id_director:{required:f["required"]},estado:{required:f["required"]}}},methods:{validarDatosFormulario:function(){var o=this;if(this.$v.infoCurso.$touch(),this.$v.infoCurso.$anyError)return this.mensajeEmergente("danger",d["h"],"Algunos campos están incompletos."),!1;var e=this.infoCurso.editarCurso?"Actualizar Datos del Curso":"Crear Curso",t=this.infoCurso.editarCurso?"¿Esta seguro de Actualizar los Datos del Curso?":"¿Esta seguro de Crear el Curso?";return this.$bvModal.msgBoxConfirm(t,{headerBgVariant:"primary",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:e,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+e,cancelVariant:"",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(e){e&&o.guardarDatosCursoGrado()})),!0},guardarDatosCursoGrado:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.infoCurso.nomenclatura=o.infoCurso.nomenclatura.toUpperCase(),0==o.infoCurso.estado&&(o.infoCurso.id_director="99999"),!o.infoCurso.editarCurso){e.next=7;break}return e.next=5,i.a.put(d["d"]+"academico/curso",JSON.stringify(o.infoCurso),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){e.data.error?o.mensajeEmergente("danger",d["h"],e.data.mensaje+" - Actualizar Curso"):o.$emit("retorno",2)})).catch((function(e){o.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Actualizar Curso. Intente más tarde. "+e)}));case 5:e.next=9;break;case 7:return e.next=9,i.a.post(d["d"]+"academico/curso",JSON.stringify(o.infoCurso),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){e.data.error?o.mensajeEmergente("danger",d["h"],e.data.mensaje+" - Crear Curso"):o.$emit("retorno",1)})).catch((function(e){o.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Crear Curso. Intente más tarde. "+e)}));case 9:case"end":return e.stop()}}),e)})))()},consultaInfoCurso:function(){this.infoCurso=this.datosCursoGrado},cancelarFormulario:function(){this.$emit("retorno",0)},ocuparCombos:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.comboDocentes=[],o.$store.state.datosDocentes.forEach((function(e){o.comboDocentes.push({value:e.id,text:e.docente.toUpperCase()})})),o.comboDocentes.push({value:"99999",text:" --- SIN ASIGNAR ---"}),o.comboEstados=[],o.$store.state.datosTablas.estados.forEach((function(e){o.comboEstados.push({value:e.id,text:e.estado.toUpperCase()})})),o.comboJornadas=[],o.$store.state.datosTablas.jornadas.forEach((function(e){o.comboJornadas.push({value:e.id,text:e.jornada.toUpperCase()})}));case 7:case"end":return e.stop()}}),e)})))()},validateStateC:function(o){var e=this.$v.infoCurso[o],t=e.$dirty,r=e.$error;return t?!r:null},mensajeEmergente:function(o,e,t){this.$bvToast.toast(t,{title:e,variant:o,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){this.consultaInfoCurso(),this.ocuparCombos()}},b=C,h=t("2877"),p=Object(h["a"])(b,c,l,!1,null,null,null),v=p.exports,g={name:"cursosgrado",components:{VueGoodTable:u["a"],FichaCursoGrado:v},data:function(){return{idSede:null,comboSedes:[],idGrado:null,comboGrados:[],listaCursosGrado:[],idGradoSede:null,descripcionGrado:null,encabColumnas:[{label:"Nombre del Curso",field:"nomenclatura"},{label:"Curso",field:"curso",sortable:!1},{label:"Jornada",field:"jornada",sortable:!1},{label:"Docente Director",field:"director",sortable:!1},{label:"Estado",field:"estado",formatFn:this.formatFnE,tdClass:this.tdClassFuncE,sortable:!1},{label:"",field:"idCursoGrado",sortable:!1}],datosCursoGrado:{idCursoGrado:null,curso:null,nomenclatura:null,id_grado_sede:null,id_jornada:null,id_director:null,estado:null,editarCurso:null},datosCursosConfig:[],contadorCursos:null}},methods:{nuevoCurso:function(){this.datosCursoGrado.idCursoGrado=null,this.datosCursoGrado.curso=this.contadorCursos+1;var o=document.getElementById("grados")[document.getElementById("grados").selectedIndex].text;this.datosCursoGrado.nomenclatura=o+"-"+this.datosCursoGrado.curso,this.datosCursoGrado.id_grado_sede=this.idGrado,this.datosCursoGrado.id_jornada=1,this.datosCursoGrado.id_director=null,this.datosCursoGrado.estado=1,this.datosCursoGrado.editarCurso=!1,this.$refs["modalEditarCursoGrado"].show()},seleccionarCursoGrado:function(o){this.datosCursoGrado.idCursoGrado=o.id,this.datosCursoGrado.curso=o.curso,this.datosCursoGrado.nomenclatura=o.nomenclatura,this.datosCursoGrado.id_grado_sede=o.id_grado_sede,this.datosCursoGrado.id_jornada=o.id_jornada,this.datosCursoGrado.id_director=o.id_director,this.datosCursoGrado.estado=o.estado,this.datosCursoGrado.editarCurso=!0,this.$refs["modalEditarCursoGrado"].show()},datosRecibidosCursoGrado:function(o){var e=null;this.$refs["modalEditarCursoGrado"].hide(),1==o?e="El Curso se ha creado correctamente.":2==o&&(e="Los datos del Curso se han actualizado correctamente."),1!=o&&2!=o||(this.cargarDatosCursos(),this.cargarDatosCursosConfig(),this.mensajeEmergente("success",d["h"],e))},cargarDatosCursos:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(d["d"]+"academico/carguecursos",{params:{idInstitucion:o.$store.state.idInstitucion,vigencia:o.$store.state.aLectivo}}).then((function(e){e.data.error?(alert(e.data.mensaje+" - Consulta datos Cursos Activos"),location.replace(d["c"])):(e.data.datos.forEach((function(e){var t=o.$store.state.datosDocentes.find((function(o){return o.id===e.id_director}));e.director=void 0===t?null:t.docente})),o.$store.commit("set",["datosCursos",e.data.datos]))})).catch((function(o){alert("Algo salio mal y no se pudo realizar: Consulta datos Cursos Activos. Intente más tarde. "+o),location.replace(d["e"])}));case 2:case"end":return e.stop()}}),e)})))()},cargarDatosCursosConfig:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.datosCursosConfig=[],e.next=3,i.a.get(d["d"]+"academico/carguecursosconfig",{params:{idInstitucion:o.$store.state.idInstitucion,vigencia:o.$store.state.aLectivo}}).then((function(e){e.data.error?(alert(e.data.mensaje+" - Consulta datos Cursos Activos"),location.replace(d["c"])):(e.data.datos.forEach((function(e){var t=o.$store.state.datosDocentes.find((function(o){return o.id===e.id_director}));e.director=void 0===t?null:t.docente})),o.datosCursosConfig=e.data.datos,o.verCursosGrado())})).catch((function(o){alert("Algo salio mal y no se pudo realizar: Consulta datos Cursos Activos. Intente más tarde. "+o),location.replace(d["e"])}));case 3:case"end":return e.stop()}}),e)})))()},verCursosGrado:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.listaCursosGrado=[],o.datosCursosConfig.forEach((function(e){e.id_grado_sede==o.idGrado&&o.listaCursosGrado.push(e)})),o.contadorCursos=o.listaCursosGrado.length;case 3:case"end":return e.stop()}}),e)})))()},ocuparComboGradosSede:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.comboGrados=[],o.$store.state.datosGrados.forEach((function(e){e.id_sede==o.idSede&&o.comboGrados.push({value:e.id,text:e.grado.toUpperCase()})}));case 2:case"end":return e.stop()}}),e)})))()},ocuparComboSedes:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.comboSedes=[],o.$store.state.datosSedes.forEach((function(e){o.comboSedes.push({value:e.id,text:e.sede.toUpperCase()})}));case 2:case"end":return e.stop()}}),e)})))()},formatFnE:function(o){return 0==o?"INACTIVO":"ACTIVO"},tdClassFuncE:function(o){return 0==o.estado?"text-danger text-left":"text-success text-left"},mensajeEmergente:function(o,e,t){this.$bvToast.toast(t,{title:e,variant:o,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){1==this.$store.state.idRol||12==this.$store.state.idRol?(this.cargarDatosCursosConfig(),this.ocuparComboSedes()):this.$router.push("/restringida")}},G=g,$=Object(h["a"])(G,r,a,!1,null,null,null);e["default"]=$.exports}}]);
//# sourceMappingURL=chunk-2d0ba8b6.9ef90529.js.map