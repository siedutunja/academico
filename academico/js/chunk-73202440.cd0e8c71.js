(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73202440"],{4172:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{lg:"12"}},[a("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" UBICACIÓN/REUBICACIÓN")],1)]},proxy:!0},{key:"footer",fn:function(){return[a("em",[e._v("Seleccione el Curso y el Estudiante al que desea ubicar o reubicar.")])]},proxy:!0}])},[a("b-card-text",[a("b-row",[a("b-col",{attrs:{lg:"4"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Seleccione la Sede:","label-for":"sedes"}},[a("b-form-select",{ref:"sedes",attrs:{id:"sedes",options:e.comboSedes},on:{change:function(t){e.idCurso=null,e.idMatricula=null,e.ocuparComboCursosSede()}},model:{value:e.idSede,callback:function(t){e.idSede=t},expression:"idSede"}})],1)],1),a("b-col",{attrs:{lg:"2"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Seleccione el Curso:","label-for":"cursos"}},[a("b-form-select",{ref:"cursos",attrs:{id:"cursos",options:e.comboCursosSede,disabled:null==e.idSede},on:{change:function(t){e.idMatricula=null,e.consultarMatriculados()}},model:{value:e.idCurso,callback:function(t){e.idCurso=t},expression:"idCurso"}})],1)],1),a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Seleccione el Estudiante:","label-for":"estudiante"}},[a("b-form-select",{ref:"estudiante",attrs:{id:"estudiante",options:e.comboEstudiantes,disabled:null==e.idCurso},on:{change:function(t){return e.seleccionarEstudiante()}},model:{value:e.idMatricula,callback:function(t){e.idMatricula=t},expression:"idMatricula"}})],1)],1)],1),null!=e.idMatricula?a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{lg:"12"}},[a("hr")]),a("b-col",{attrs:{lg:"12"}},[a("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:e._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" Datos para la Promoción Anticipada del Estudiante")],1)]},proxy:!0},{key:"footer",fn:function(){return[a("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"primary"},on:{click:e.confirmarPromo}},[e._v("Ubicar o Reubicar Estudiante")]),a("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"secondary"},on:{click:e.cancelarFormulario}},[e._v("Cancelar")])]},proxy:!0}],null,!1,1298168966)},[a("b-card-text",[a("b-row",[a("b-col",{attrs:{lg:"9"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Acto Administrativo:*","label-for":"acta"}},[a("b-form-input",{ref:"acta",attrs:{id:"acta",state:e.validateStateP("acta"),"aria-describedby":"feedActa",autocomplete:"off"},model:{value:e.$v.datosPromo.acta.$model,callback:function(t){e.$set(e.$v.datosPromo.acta,"$model","string"===typeof t?t.trim():t)},expression:"$v.datosPromo.acta.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedActa"}},[e._v("Campo requerido.")])],1)],1),a("b-col",{attrs:{lg:"3"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Fecha Acta:*","label-for":"fecha"}},[a("b-form-input",{ref:"fecha",attrs:{type:"date",id:"fecha",state:e.validateStateP("fecha_acta"),"aria-describedby":"feedFecha"},model:{value:e.$v.datosPromo.fecha_acta.$model,callback:function(t){e.$set(e.$v.datosPromo.fecha_acta,"$model",t)},expression:"$v.datosPromo.fecha_acta.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedFecha"}},[e._v("Campo requerido.")])],1)],1),a("b-col",{attrs:{lg:"12"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Justificación:","label-for":"justificacion"}},[a("b-form-input",{ref:"justificacion",attrs:{id:"justificacion","aria-describedby":"feedJustifica",autocomplete:"off"},model:{value:e.datosPromo.justificacion,callback:function(t){e.$set(e.datosPromo,"justificacion","string"===typeof t?t.trim():t)},expression:"datosPromo.justificacion"}})],1)],1),a("b-col",{attrs:{lg:"12"}},[a("b-alert",{attrs:{show:""}},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("h6",[e._v("Sede y Curso al que se Ubica o Reubica el Estudiante")])]),a("b-col",{attrs:{lg:"12"}},[a("hr")]),a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Sede de Ubicación o Reubicación:","label-for":"sedesP"}},[a("b-form-select",{ref:"sedesP",attrs:{id:"sedesP",options:e.comboSedesPromo,state:e.validateStateP("id_sede"),"aria-describedby":"feedsedesP"},on:{change:function(t){e.datosPromo.id_curso=null,e.ocuparComboCursosSedePromo()}},model:{value:e.$v.datosPromo.id_sede.$model,callback:function(t){e.$set(e.$v.datosPromo.id_sede,"$model",t)},expression:"$v.datosPromo.id_sede.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedsedesP"}},[e._v("Campo requerido.")])],1)],1),a("b-col",{attrs:{lg:"4"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Curso de Ubicación o Reubicación:","label-for":"cursosP"}},[a("b-form-select",{ref:"cursosP",attrs:{id:"cursosP",options:e.comboCursosSedePromo,state:e.validateStateP("id_curso"),"aria-describedby":"feedcursosP",disabled:null==e.datosPromo.id_sede},on:{change:function(t){return e.seleccionarGradoCurso()}},model:{value:e.$v.datosPromo.id_curso.$model,callback:function(t){e.$set(e.$v.datosPromo.id_curso,"$model",t)},expression:"$v.datosPromo.id_curso.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedcursosP"}},[e._v("Campo requerido.")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1):e._e()],1)],1)],1)],1)],1)},s=[],i=a("1da1"),r=(a("c740"),a("159b"),a("96cf"),a("bc3a")),n=a.n(r),d=a("9c40"),c=(a("dac4"),a("1dce")),u=a("b5ae"),l=a("9612"),m={name:"reubicacion",mixins:[c["validationMixin"]],components:{},data:function(){return{comboSedes:[],comboSedesPromo:[],idSede:null,comboCursosSede:[],comboCursosSedePromo:[],idCurso:null,comboEstudiantes:[],idMatricula:null,listaEstudiantes:[],datosPromo:{idMatriculaPromo:null,id:null,id_institucion:null,id_estudiante:null,vigencia:null,id_sede:null,id_grado:null,id_curso:null,id_especialidad:null,id_metodologia:null,id_modalidad:null,id_nuevo:null,procedencia:null,id_repitente:null,id_ruta:null,obs_matricula:null,id_diversa:null,id_estado_actual:null,id_estado_final:null,firma_estudiante:null,firma_acudiente:null,acta:null,fecha_acta:null,obs_final:null,justificacion:null}}},validations:{datosPromo:{acta:{required:u["required"]},fecha_acta:{required:u["required"]},id_sede:{required:u["required"]},id_curso:{required:u["required"]}}},methods:{confirmarPromo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.datosPromo.$touch(),!e.$v.datosPromo.$anyError){t.next=6;break}return e.mensajeEmergente("danger",d["h"],"Algunos campos están incompletos."),t.abrupt("return",!1);case 6:a="Ubicar o Reubicar",o="¿Esta seguro de Ubicar o Reubicar al Estudiante?",e.$bvModal.msgBoxConfirm(o,{headerBgVariant:"primary",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:a,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+a,cancelVariant:"danger",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(t){t&&e.guardarPromo()}));case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))()},guardarPromo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.datosPromo.obs_final="Ubicación/Reubicación: "+e.datosPromo.acta+" del "+e.datosPromo.fecha_acta+" "+e.datosPromo.justificacion,t.next=3,n.a.put(d["d"]+"academico/matriculas/reubicacion",JSON.stringify(e.datosPromo),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(t){t.data.error?e.mensajeEmergente("danger",d["h"],t.data.mensaje+" - Ubicación/Reubicación"):e.mensajeEmergente("success",d["h"],"La Ubicación o Reubicación se han realizado correctamente.")})).catch((function(t){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Ubicación/Reubicación. Intente más tarde. "+t)}));case 3:e.idSede=null,e.idCurso=null,e.idMatricula=null;case 6:case"end":return t.stop()}}),t)})))()},seleccionarGradoCurso:function(){var e=this,t=this.$store.state.datosCursos.findIndex((function(t){return t.id===e.datosPromo.id_curso}));this.datosPromo.id_grado=this.$store.state.datosCursos[t].id_grado_sede},seleccionarEstudiante:function(){var e=this,t=this.listaEstudiantes.findIndex((function(t){return t.id===e.idMatricula}));this.datosPromo.id=this.listaEstudiantes[t].id,this.datosPromo.idMatriculaPromo=l["b"].v1(),this.datosPromo.id_institucion=this.listaEstudiantes[t].id_institucion,this.datosPromo.id_estudiante=this.listaEstudiantes[t].id_estudiante,this.datosPromo.vigencia=this.listaEstudiantes[t].vigencia,this.datosPromo.id_sede=null,this.datosPromo.id_grado=null,this.datosPromo.id_curso=null,this.datosPromo.id_especialidad=null,this.datosPromo.id_metodologia=null,this.datosPromo.id_modalidad=1,this.datosPromo.id_nuevo="N",this.datosPromo.procedencia=this.listaEstudiantes[t].procedencia,this.datosPromo.id_repitente="N",this.datosPromo.id_ruta=this.listaEstudiantes[t].id_ruta,this.datosPromo.obs_matricula=this.listaEstudiantes[t].obs_matricula,this.datosPromo.id_diversa=this.listaEstudiantes[t].id_diversa,this.datosPromo.id_estado_actual=1,this.datosPromo.id_estado_final=null,this.datosPromo.firma_estudiante=this.listaEstudiantes[t].firma_estudiante,this.datosPromo.firma_acudiente=this.listaEstudiantes[t].firma_acudiente,this.datosPromo.acta=null,this.datosPromo.fecha_acta=null,this.datosPromo.obs_final=null,this.datosPromo.justificacion=null},consultarMatriculados:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.comboEstudiantes=[],e.listaEstudiantes=[],t.next=4,n.a.get(d["d"]+"academico/matriculas/promo",{params:{idCurso:e.idCurso}}).then((function(t){t.data.error?e.mensajeEmergente("danger",d["h"],t.data.mensaje+" - Ubicación/Reubicación"):0!=t.data.datos&&(e.listaEstudiantes=t.data.datos,e.listaEstudiantes.forEach((function(t){e.comboEstudiantes.push({value:t.id,text:t.estudiante})})))})).catch((function(t){e.mensajeEmergente("danger",d["h"],"Algo salio mal y no se pudo realizar: Ubicación/Reubicación. Intente más tarde."+t)}));case 4:case"end":return t.stop()}}),t)})))()},ocuparComboCursosSede:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.comboCursosSede=[],e.$store.state.datosCursos.forEach((function(t){t.id_sede==e.idSede&&e.comboCursosSede.push({value:t.id,text:t.nomenclatura.toUpperCase()})}));case 2:case"end":return t.stop()}}),t)})))()},ocuparComboCursosSedePromo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.comboCursosSedePromo=[],e.$store.state.datosCursos.forEach((function(t){t.id_sede==e.datosPromo.id_sede&&e.comboCursosSedePromo.push({value:t.id,text:t.nomenclatura.toUpperCase()})}));case 2:case"end":return t.stop()}}),t)})))()},ocuparComboSedes:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.comboSedes=[],e.comboSedesPromo=[],e.$store.state.datosSedes.forEach((function(t){e.comboSedes.push({value:t.id,text:t.sede.toUpperCase()}),e.comboSedesPromo.push({value:t.id,text:t.sede.toUpperCase()})}));case 3:case"end":return t.stop()}}),t)})))()},validateStateP:function(e){var t=this.$v.datosPromo[e],a=t.$dirty,o=t.$error;return a?!o:null},cancelarFormulario:function(){this.$router.push("/")},mensajeEmergente:function(e,t,a){this.$bvToast.toast(a,{title:t,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){1==this.$store.state.idRol||12==this.$store.state.idRol?this.ocuparComboSedes():this.$router.push("/restringida")}},b=m,f=a("2877"),h=Object(f["a"])(b,o,s,!1,null,null,null);t["default"]=h.exports},dac4:function(e,t,a){}}]);
//# sourceMappingURL=chunk-73202440.cd0e8c71.js.map