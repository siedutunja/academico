(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40f1e3b2"],{"8ec2":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{lg:"12"}},[a("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" SEDES DE LA INSTITUCIÓN EDUCATIVA")],1)]},proxy:!0},{key:"footer",fn:function(){return[a("em",[e._v("Consulte o actualice los datos de una sede haciendo clic en el lapiz.")])]},proxy:!0}])},[a("b-card-text",[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:e._u([{key:"header",fn:function(){return[1==e.$store.state.idRol?a("b-button",{staticClass:"small float-right",attrs:{variant:"dark"},on:{click:e.nuevaSede}},[e._v("Nueva Sede")]):e._e(),a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" Lista de Sedes")],1)]},proxy:!0}])},[a("b-card-text",[a("vue-good-table",{attrs:{columns:e.encabColumnas,rows:e.listaSedes,styleClass:"vgt-table condensed bordered striped","line-numbers":!0},scopedSlots:e._u([{key:"table-row",fn:function(t){return["id"==t.column.field?a("span",[a("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},attrs:{title:"Consultar/Actualizar Datos de la Sede"},on:{click:function(a){return e.seleccionarSede(t.row)}}},[a("CIcon",{attrs:{name:"cilPencil"}})],1)]):e._e()]}}])},[a("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[a("h5",{staticClass:"text-danger ml-5"},[e._v("No existen sedes creadas")])])])],1)],1)],1)],1)],1)],1)],1)],1),a("b-modal",{ref:"modalCrearEditarSede",attrs:{size:"xl",scrollable:"","hide-footer":"",title:e.datosSede.editarSede?"Editar Datos de la Sede":"Nueva Sede","ok-only":""}},[a("div",{staticClass:"mx-3"},[a("div",[a("FichaSede",{attrs:{datosSede:e.datosSede},on:{retorno:e.datosRecibidosSede}})],1)])])],1)},i=[],r=a("1da1"),d=(a("96cf"),a("ac1f"),a("5319"),a("bc3a")),s=a.n(d),n=a("9c40"),l=(a("dac4"),a("f617")),c=a("8f4d"),u={name:"sedesie",components:{VueGoodTable:l["a"],FichaSede:c["a"]},data:function(){return{listaSedes:[],datosSede:{id:null,id_institucion:null,id_seccion:null,vigencia:null,codigo_anterior:null,consecutivo_sede:null,sede:null,direccion:null,barrio:null,id_zona:null,id_sector:null,orden:null,estado:null,editarSede:!0},encabColumnas:[{label:"Nombre de la Sede",field:"sede",sortable:!1},{label:"Sección",field:"id_seccion",sortable:!1},{label:"Consecutivo",field:"consecutivo_sede",sortable:!1},{label:"CódigoAnterior",field:"codigo_anterior",sortable:!1},{label:"Dirección",field:"direccion",sortable:!1},{label:"Barrio",field:"barrio",sortable:!1},{label:"Orden",field:"orden",sortable:!1},{label:"Estado",field:"estado",formatFn:this.formatFnE,tdClass:this.tdClassFuncE,sortable:!1},{label:"",field:"id",sortable:!1}]}},methods:{nuevaSede:function(){this.datosSede.id=null,this.datosSede.id_institucion=this.$store.state.idInstitucion,this.datosSede.id_seccion=this.$store.state.idSeccion,this.datosSede.vigencia=this.$store.state.aLectivo,this.datosSede.codigo_anterior=null,this.datosSede.consecutivo_sede=null,this.datosSede.sede=null,this.datosSede.direccion=null,this.datosSede.barrio=null,this.datosSede.id_zona=null,this.datosSede.id_sector=this.$store.state.idSector,this.datosSede.orden=0,this.datosSede.estado=1,this.datosSede.editarSede=!1,this.$refs["modalCrearEditarSede"].show()},seleccionarSede:function(e){this.datosSede.id=e.id,this.datosSede.id_institucion=e.id_institucion,this.datosSede.id_seccion=e.id_seccion,this.datosSede.vigencia=e.vigencia,this.datosSede.codigo_anterior=e.codigo_anterior,this.datosSede.consecutivo_sede=e.consecutivo_sede,this.datosSede.sede=e.sede,this.datosSede.direccion=e.direccion,this.datosSede.barrio=e.barrio,this.datosSede.id_zona=e.id_zona,this.datosSede.id_sector=e.id_sector,this.datosSede.orden=e.orden,this.datosSede.estado=e.estado,this.datosSede.editarSede=!0,this.$refs["modalCrearEditarSede"].show()},datosRecibidosSede:function(e){var t=null;this.$refs["modalCrearEditarSede"].hide(),1==e?t="La Sede se ha creado correctamente.":2==e&&(t="Los datos de la Sede se han actualizado correctamente."),1!=e&&2!=e||(this.consultarListaSedes(),this.mensajeEmergente("success",n["h"],t))},consultarListaSedes:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.a.get(n["d"]+"academico/carguesedesconfig",{params:{idInstitucion:e.$store.state.idInstitucion,idSeccion:e.$store.state.idSeccion}}).then((function(t){t.data.error?(alert(t.data.mensaje+" - Consulta datos Sedes"),location.replace(n["c"])):0!=t.data.datos?e.listaSedes=t.data.datos:e.listaSedes=[]})).catch((function(e){alert("Algo salio mal y no se pudo realizar: Consulta datos Sedes. Intente más tarde. "+e),location.replace(n["e"])}));case 2:case"end":return t.stop()}}),t)})))()},formatFnE:function(e){return 0==e?"INACTIVO":"ACTIVO"},tdClassFuncE:function(e){return 0==e.estado?"text-danger text-left":"text-success text-left"},mensajeEmergente:function(e,t,a){this.$bvToast.toast(a,{title:t,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){1==this.$store.state.idRol||12==this.$store.state.idRol?this.consultarListaSedes():this.$router.push("/restringida")}},f=u,m=a("2877"),b=Object(m["a"])(f,o,i,!1,null,null,null);t["default"]=b.exports},"8f4d":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{lg:"12"}},[a("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:e._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" DATOS DE LA SEDE")],1)]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"float-right text-medium-emphasis text-info"},[e._v("* Campo requerido")]),a("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"primary"},on:{click:e.validarDatosFormulario}},[e.infoSede.editarSede?a("div",[e._v("Actualizar Datos de la Sede")]):a("div",[e._v("Guardar la Nueva Sede")])]),a("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"secondary"},on:{click:e.cancelarFormulario}},[e._v("Cancelar")])]},proxy:!0}])},[a("b-card-text",[a("b-row",[a("b-col",{attrs:{lg:"3",md:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Código Anterior*","label-for":"codigo"}},[a("b-form-input",{ref:"codigo",attrs:{id:"codigo",state:e.validateStateS("codigo_anterior"),"aria-describedby":"feedCodigo",autocomplete:"off",maxlength:"12"},on:{keydown:e.soloNumeros},model:{value:e.$v.infoSede.codigo_anterior.$model,callback:function(t){e.$set(e.$v.infoSede.codigo_anterior,"$model","string"===typeof t?t.trim():t)},expression:"$v.infoSede.codigo_anterior.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedCodigo"}},[e._v("Campo requerido.")])],1)],1),a("b-col",{attrs:{lg:"3",md:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Consecutivo Sede (DANE)*","label-for":"consecutivo"}},[a("b-form-input",{ref:"consecutivo",attrs:{id:"consecutivo",state:e.validateStateS("consecutivo_sede"),"aria-describedby":"feedConsecutivo",autocomplete:"off",maxlength:"14"},on:{keydown:e.soloNumeros},model:{value:e.$v.infoSede.consecutivo_sede.$model,callback:function(t){e.$set(e.$v.infoSede.consecutivo_sede,"$model","string"===typeof t?t.trim():t)},expression:"$v.infoSede.consecutivo_sede.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedConsecutivo"}},[e._v("Campo requerido.")])],1)],1),a("b-col",{attrs:{lg:"6",md:"12"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Nombre de la Sede*","label-for":"sede"}},[a("b-form-input",{ref:"sede",attrs:{id:"sede",state:e.validateStateS("sede"),"aria-describedby":"feedSede",autocomplete:"off",maxlength:"50"},model:{value:e.$v.infoSede.sede.$model,callback:function(t){e.$set(e.$v.infoSede.sede,"$model","string"===typeof t?t.trim():t)},expression:"$v.infoSede.sede.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedSede"}},[e._v("Campo requerido.")])],1)],1),a("b-col",{attrs:{lg:"6",md:"12"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Dirección de la Sede*","label-for":"dir"}},[a("b-form-input",{ref:"dir",attrs:{id:"dir",state:e.validateStateS("direccion"),"aria-describedby":"feedDir",autocomplete:"off",maxlength:"100"},model:{value:e.$v.infoSede.direccion.$model,callback:function(t){e.$set(e.$v.infoSede.direccion,"$model","string"===typeof t?t.trim():t)},expression:"$v.infoSede.direccion.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedDir"}},[e._v("Campo requerido.")])],1)],1),a("b-col",{attrs:{lg:"6",md:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Barrio de la Sede*","label-for":"barrio"}},[a("b-form-input",{ref:"barrio",attrs:{id:"barrio",state:e.validateStateS("barrio"),"aria-describedby":"feedBarrio",autocomplete:"off",maxlength:"50"},model:{value:e.$v.infoSede.barrio.$model,callback:function(t){e.$set(e.$v.infoSede.barrio,"$model","string"===typeof t?t.trim():t)},expression:"$v.infoSede.barrio.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedBarrio"}},[e._v("Campo requerido.")])],1)],1),a("b-col",{attrs:{lg:"3",md:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Zona de la Sede*","label-for":"zona"}},[a("b-form-select",{ref:"zona",attrs:{id:"zona",options:e.comboZonas,state:e.validateStateS("id_zona"),"aria-describedby":"feedZona"},model:{value:e.$v.infoSede.id_zona.$model,callback:function(t){e.$set(e.$v.infoSede.id_zona,"$model",t)},expression:"$v.infoSede.id_zona.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedZona"}},[e._v("Campo requerido.")])],1)],1),a("b-col",{attrs:{lg:"3",md:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Orden*","label-for":"orden"}},[a("b-form-input",{ref:"orden",attrs:{type:"number",id:"orden",state:e.validateStateS("orden"),"aria-describedby":"feedOrden",autocomplete:"off",maxlength:"2"},on:{keydown:e.soloNumeros},model:{value:e.$v.infoSede.orden.$model,callback:function(t){e.$set(e.$v.infoSede.orden,"$model","string"===typeof t?t.trim():t)},expression:"$v.infoSede.orden.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedOrden"}},[e._v("Campo requerido.")])],1)],1)],1),1==this.$store.state.idRol?a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("hr")]),a("b-col",{attrs:{lg:"3",md:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Estado de la Sede*","label-for":"estado"}},[a("b-form-select",{ref:"estado",attrs:{id:"estado",options:e.comboEstados,state:e.validateStateS("estado"),"aria-describedby":"feedEstado"},model:{value:e.$v.infoSede.estado.$model,callback:function(t){e.$set(e.$v.infoSede.estado,"$model",t)},expression:"$v.infoSede.estado.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedEstado"}},[e._v("Campo requerido.")])],1)],1),a("b-col",[a("b-col",[a("i",{staticClass:"text-muted float-right"},[e._v("ID: "+e._s(e.infoSede.id))])])],1)],1):e._e()],1)],1)],1)],1)],1)},i=[],r=a("1da1"),d=(a("ac1f"),a("5319"),a("159b"),a("96cf"),a("bc3a")),s=a.n(d),n=a("9c40"),l=a("1dce"),c=a("b5ae"),u=a("9612"),f={name:"fichasede",mixins:[l["validationMixin"]],props:{datosSede:Object},components:{},data:function(){return{infoSede:{id:null,id_institucion:null,id_seccion:null,vigencia:null,codigo_anterior:null,consecutivo_sede:null,sede:null,direccion:null,barrio:null,id_zona:null,id_sector:null,orden:null,estado:null,editarSede:!0},comboZonas:[],comboEstados:[]}},validations:{infoSede:{codigo_anterior:{required:c["required"],minLength:Object(c["minLength"])(12)},consecutivo_sede:{required:c["required"],minLength:Object(c["minLength"])(14)},sede:{required:c["required"],minLength:Object(c["minLength"])(4)},direccion:{required:c["required"],minLength:Object(c["minLength"])(4)},barrio:{required:c["required"],minLength:Object(c["minLength"])(4)},id_zona:{required:c["required"]},estado:{required:c["required"]},orden:{required:c["required"],minLength:Object(c["minLength"])(1)}}},methods:{validarDatosFormulario:function(){var e=this;if(this.$v.infoSede.$touch(),this.$v.infoSede.$anyError)return this.mensajeEmergente("danger",n["h"],"Algunos campos están incompletos."),!1;var t=this.infoSede.editarSede?"Actualizar datos de la Sede":"Crear Sede",a=this.infoSede.editarSede?"¿Esta seguro de actualizar los datos de la Sede?":"¿Esta seguro de crear la Sede?";return this.$bvModal.msgBoxConfirm(a,{headerBgVariant:"primary",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:t,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+t,cancelVariant:"",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(t){t&&e.guardarDatosSede()})),!0},guardarDatosSede:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.infoSede.sede=e.infoSede.sede.toUpperCase(),e.infoSede.barrio=e.infoSede.barrio.toUpperCase(),!e.infoSede.editarSede){t.next=7;break}return t.next=5,s.a.put(n["d"]+"academico/sede",JSON.stringify(e.infoSede),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(t){t.data.error?e.mensajeEmergente("danger",n["h"],t.data.mensaje+" - Actualizar Sede"):e.$emit("retorno",2)})).catch((function(t){e.mensajeEmergente("danger",n["h"],"Algo salio mal y no se pudo realizar: Actualizar Sede. Intente más tarde. "+t)}));case 5:t.next=10;break;case 7:return e.infoSede.id=u["b"].v1(),t.next=10,s.a.post(n["d"]+"academico/sede",JSON.stringify(e.infoSede),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(t){t.data.error?e.mensajeEmergente("danger",n["h"],t.data.mensaje+" - Crear Sede"):e.$emit("retorno",1)})).catch((function(t){e.mensajeEmergente("danger",n["h"],"Algo salio mal y no se pudo realizar: Crear Sede. Intente más tarde. "+t)}));case 10:e.cargarDatosSedes();case 11:case"end":return t.stop()}}),t)})))()},cargarDatosSedes:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.a.get(n["d"]+"academico/carguesedes",{params:{idInstitucion:e.$store.state.idInstitucion,idSeccion:e.$store.state.idSeccion}}).then((function(t){t.data.error?(alert(t.data.mensaje+" - Consulta datos Sedes Activas"),location.replace(n["c"])):e.$store.commit("set",["datosSedes",t.data.datos])})).catch((function(e){alert("Algo salio mal y no se pudo realizar: Consulta datos Sedes Activas. Intente más tarde. "+e),location.replace(n["e"])}));case 2:case"end":return t.stop()}}),t)})))()},consultaInfoSede:function(){this.infoSede=this.datosSede},soloNumeros:function(e){var t=window.Event?e.which:e.keyCode;t>=48&&t<=57||t>=96&&t<=105||8==t||9==t||37==t||39==t||e.preventDefault()},cancelarFormulario:function(){this.$emit("retorno",0)},ocuparCombos:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.comboEstados=[],e.$store.state.datosTablas.estados.forEach((function(t){e.comboEstados.push({value:t.id,text:t.estado.toUpperCase()})})),e.comboZonas=[],e.$store.state.datosTablas.zonas.forEach((function(t){e.comboZonas.push({value:t.id,text:t.zona.toUpperCase()})}));case 4:case"end":return t.stop()}}),t)})))()},validateStateS:function(e){var t=this.$v.infoSede[e],a=t.$dirty,o=t.$error;return a?!o:null},mensajeEmergente:function(e,t,a){this.$bvToast.toast(a,{title:t,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){this.consultaInfoSede(),this.ocuparCombos()}},m=f,b=a("2877"),S=Object(b["a"])(m,o,i,!1,null,null,null);t["a"]=S.exports}}]);
//# sourceMappingURL=chunk-40f1e3b2.dbe768be.js.map