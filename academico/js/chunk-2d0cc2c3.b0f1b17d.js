(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc2c3"],{"4d96":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{lg:"12"}},[a("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" LISTAS DE ESTUDIANTES POR GRADO O CURSO")],1)]},proxy:!0},{key:"footer",fn:function(){return[a("em",[e._v("Imprima las Listas de Estudiantes seleccionando la Sede y luego seleccionando el o los Cursos.")])]},proxy:!0}])},[a("b-card-text",[a("b-row",[a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Seleccione la Sede:","label-for":"sedes"}},[a("b-form-select",{ref:"sedes",attrs:{id:"sedes",options:e.comboSedes},on:{change:function(t){e.idTipo=null}},model:{value:e.idSede,callback:function(t){e.idSede=t},expression:"idSede"}})],1)],1),a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Tipo de Listado:","label-for":"tipolista"}},[a("b-form-select",{ref:"tipolista",attrs:{id:"tipolista",options:e.comboTipos,disabled:null==e.idSede},on:{change:function(t){return e.ocuparlistaCursosSede()}},model:{value:e.idTipo,callback:function(t){e.idTipo=t},expression:"idTipo"}})],1)],1)],1),null!=e.idTipo?a("div",[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("hr")])],1),a("b-row",[a("b-col",{attrs:{lg:"5"}},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-form-group",[a("h5",[e._v("Campos a adicionar en las Listas:")]),e._l(e.campos,(function(t){return a("b-form-checkbox",{key:t.value,staticClass:"ml-4 m-2",attrs:{value:t.value,disabled:t.disabled},model:{value:e.camposSeleccionados,callback:function(t){e.camposSeleccionados=t},expression:"camposSeleccionados"}},[e._v(" "+e._s(t.text)+" ")])}))],2)],1)],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("hr")])],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-form-group",[a("h5",[e._v("Estudiantes Retirados:")]),a("b-form-checkbox",{ref:"estRetirados",staticClass:"ml-4 m-3",attrs:{id:"estRetirados",name:"check-button",switch:""},model:{value:e.retirados,callback:function(t){e.retirados=t},expression:"retirados"}},[a("span",{staticClass:"ml-2"},[e._v("Listar estudiantes retirados")])])],1)],1)],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("hr")])],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-form-group",[a("h5",[e._v("Director de Curso:")]),a("b-form-checkbox",{ref:"dirCurso",staticClass:"ml-4 m-3",attrs:{id:"dirCurso",name:"check-button",switch:""},model:{value:e.director,callback:function(t){e.director=t},expression:"director"}},[a("span",{staticClass:"ml-2"},[e._v("Incluir director de curso")])])],1)],1)],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("hr")])],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-form-group",[a("h5",[e._v("Número de Columnas:")]),a("b-row",{staticClass:"m-3"},[a("b-col",{attrs:{lg:"6"}},[a("b-form-select",{ref:"numCol",attrs:{id:"numCol",options:e.comboNumeroColumnas},model:{value:e.numeroColumnas,callback:function(t){e.numeroColumnas=t},expression:"numeroColumnas"}})],1)],1)],1)],1)],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("hr")])],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-form-group",[a("h5",[e._v("Orientación del Papel:")]),a("b-row",{staticClass:"m-3"},[a("b-col",{attrs:{lg:"6"}},[a("b-form-select",{ref:"numCol",attrs:{id:"numCol",options:e.comboOrientacion},model:{value:e.orientacion,callback:function(t){e.orientacion=t},expression:"orientacion"}})],1)],1)],1)],1)],1)],1),a("b-col",{staticClass:"mb-5",attrs:{lg:"7"}},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Titulo del Tema o Actividad:","label-for":"tema"}},[a("b-form-input",{ref:"tema",attrs:{id:"tema",autocomplete:"off",maxlength:"50"},model:{value:e.tema,callback:function(t){e.tema="string"===typeof t?t.trim():t},expression:"tema"}}),a("b-form-text",{attrs:{id:"tema"}},[e._v("Ingrese el titulo del tema o actividad para ser visualizado en la planilla, de lo contrario deje el campo vacio.")])],1)],1)],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Objetivo del Tema o Actividad:","label-for":"objetivo"}},[a("b-form-input",{ref:"objetivo",attrs:{id:"objetivo",autocomplete:"off",maxlength:"100"},model:{value:e.objetivo,callback:function(t){e.objetivo="string"===typeof t?t.trim():t},expression:"objetivo"}}),a("b-form-text",{attrs:{id:"objetivo"}},[e._v("Ingrese el objetivo del tema o actividad para ser visualizado en la planilla, de lo contrario deje el campo vacio.")])],1)],1)],1),1==e.idTipo?a("div",[a("vue-good-table",{ref:"cursitos",attrs:{columns:e.encabColumnas,rows:e.listaCursos,styleClass:"vgt-table condensed bordered striped","line-numbers":!0,"search-options":{enabled:!0,placeholder:"Filtrar cursos..."},"select-options":{enabled:!0,selectionText:"cursos seleccionados",clearSelectionText:"Limpiar"}},scopedSlots:e._u([{key:"selected-row-actions",fn:function(){return[a("button",{staticClass:"small btn btn-primary",on:{click:function(t){return e.imprimirListas()}}},[e._v("Imprimir Cursos")])]},proxy:!0},{key:"table-row",fn:function(t){return["id"==t.column.field?a("span",[a("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},attrs:{title:"Vista Curso"},on:{click:function(a){return e.consultaListaCurso(t.row)}}},[a("CIcon",{attrs:{name:"cilZoom"}})],1)]):e._e()]}}],null,!1,3760771329)},[a("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[a("h5",{staticClass:"text-danger ml-5"},[e._v("No existen Cursos en la Sede")])])])],1):a("div",[a("vue-good-table",{ref:"graditos",attrs:{columns:e.encabColumnasGrados,rows:e.listaGrados,styleClass:"vgt-table condensed bordered striped","line-numbers":!0,"search-options":{enabled:!0,placeholder:"Filtrar grados..."},"select-options":{enabled:!0,selectionText:"grados seleccionados",clearSelectionText:"Limpiar"}},scopedSlots:e._u([{key:"selected-row-actions",fn:function(){return[a("button",{staticClass:"small btn btn-primary",on:{click:function(t){return e.imprimirListasGrados()}}},[e._v("Imprimir Grados")])]},proxy:!0},{key:"table-row",fn:function(t){return["id"==t.column.field?a("span",[a("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},attrs:{title:"Vista Grado"},on:{click:function(a){return e.consultaListaGrado(t.row)}}},[a("CIcon",{attrs:{name:"cilZoom"}})],1)]):e._e()]}}],null,!1,4267812362)},[a("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[a("h5",{staticClass:"text-danger ml-5"},[e._v("No existen Grados en la Sede")])])])],1)],1)],1)],1):e._e()],1)],1)],1)],1),a("b-modal",{ref:"modalConsultaListaGrado",attrs:{size:"xl",scrollable:"","hide-footer":"",title:"Consulta Lista de Estudiantes por Grado","ok-only":""}},[a("div",{staticClass:"mx-3"},[a("div",[a("ConsultaListaGrado",{attrs:{datosGrado:e.datosGrado},on:{retorno:e.datosRecibidosConsultaGrado}})],1)])]),a("b-modal",{ref:"modalConsultaListaCurso",attrs:{size:"xl",scrollable:"","hide-footer":"",title:"Consulta Lista de Estudiantes por Curso","ok-only":""}},[a("div",{staticClass:"mx-3"},[a("div",[a("ConsultaListaCurso",{attrs:{datosCurso:e.datosCurso},on:{retorno:e.datosRecibidosConsulta}})],1)])])],1)},s=[],l=a("1da1"),i=(a("96cf"),a("159b"),a("bc3a")),n=a.n(i),r=a("9c40"),c=(a("dac4"),a("f617")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{lg:"12"}},[a("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" LISTA DE ESTUDIANTES DEL GRADO "+e._s(e.datosGrado.grado))],1)]},proxy:!0},{key:"footer",fn:function(){return[a("vue-excel-xlsx",{staticClass:"small mx-1 mt-2 btn btn-outline-primary",attrs:{data:e.listaEstudiantesGrado,columns:e.encabColumnasExcel,"file-name":"Lista-"+e.datosGrado.grado+" "+(new Date).toLocaleDateString(),"file-type":"xlsx","sheet-name":"Lista-"+e.datosGrado.grado+" "+e.$store.state.aLectivo}},[e._v(" Exportar a Excel ")]),a("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"secondary"},on:{click:e.cancelarFormulario}},[e._v("Cancelar")])]},proxy:!0}])},[a("b-card-text",[a("vue-good-table",{attrs:{columns:e.encabColumnas,rows:e.listaEstudiantesGrado,styleClass:"vgt-table condensed bordered striped","line-numbers":!0}},[a("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[a("h5",{staticClass:"text-danger ml-5"},[e._v("No existen Estudiantes matriculados en el Grado.")])])])],1)],1)],1)],1)],1)},u=[],m={name:"consultalistagrado",props:{datosGrado:Object},components:{VueGoodTable:c["a"]},data:function(){return{listaEstudiantesGrado:[],encabColumnas:[{label:"Apellidos y Nombres del Estudiante",field:"estudiante",tdClass:this.tdClassFuncE},{label:"Documento",field:"documento",tdClass:this.tdClassFuncE},{label:"Curso",field:"nomCurso",tdClass:this.tdClassFuncE},{label:"Estado",field:"estado",tdClass:this.tdClassFuncE}],encabColumnasExcel:[]}},methods:{consultaListaGrado:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.a.get(r["d"]+"academico/listas/general/grado",{params:{idGrado:e.datosGrado.id,retirados:e.datosGrado.retirados}}).then((function(t){t.data.error?e.mensajeEmergente("danger",r["h"],t.data.mensaje+" - Consulta Lista Grado"):0!=t.data.datos&&(e.listaEstudiantesGrado=[],t.data.datos.forEach((function(t){t.edad=e.calcularEdad(t.fecha_nacimiento.substr(0,10))+" Años"})),e.listaEstudiantesGrado=t.data.datos)})).catch((function(t){e.mensajeEmergente("danger",r["h"],"Algo salio mal y no se pudo realizar: Consulta Lista Grado. Intente más tarde."+t)}));case 2:case"end":return t.stop()}}),t)})))()},calcularEdad:function(e){var t=new Date,a=new Date(e),o=t.getFullYear()-a.getFullYear(),s=t.getMonth()-a.getMonth();return(s<0||0===s&&t.getDate()<a.getDate())&&o--,o},tdClassFuncE:function(e){if(2==e.id_estado_actual)return"text-danger"},cancelarFormulario:function(){this.$emit("retorno",0)},mensajeEmergente:function(e,t,a){this.$bvToast.toast(a,{title:t,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){var e=this;this.encabColumnasExcel.push({label:"Apellidos y Nombres del Estudiante",field:"estudiante"}),this.encabColumnasExcel.push({label:"Estado",field:"estado"}),this.encabColumnasExcel.push({label:"Curso",field:"nomCurso"}),this.datosGrado.campos.forEach((function(t){1==t&&(e.encabColumnasExcel.push({label:"Documento",field:"documento"}),e.encabColumnasExcel.push({label:"Tipo",field:"nomenclatura"})),2==t&&e.encabColumnasExcel.push({label:"Fecha Nace",field:"fecha_nacimiento"}),3==t&&e.encabColumnasExcel.push({label:"Edad",field:"edad"}),4==t&&e.encabColumnasExcel.push({label:"Genero",field:"id_genero"}),5==t&&e.encabColumnasExcel.push({label:"Repitente",field:"id_repitente"}),6==t&&e.encabColumnasExcel.push({label:"Nuevo",field:"id_nuevo"}),7==t&&e.encabColumnasExcel.push({label:"Nacionalidad",field:"pais"}),8==t&&e.encabColumnasExcel.push({label:"Estrato",field:"id_estrato"}),9==t&&e.encabColumnasExcel.push({label:"Rh",field:"rh"}),10==t&&e.encabColumnasExcel.push({label:"Sisben",field:"subgrupo"}),11==t&&e.encabColumnasExcel.push({label:"Especialidad",field:"especialidad"}),12==t&&e.encabColumnasExcel.push({label:"Discapacidad",field:"discapacidad"}),13==t&&e.encabColumnasExcel.push({label:"Capacidad Excepcional",field:"capacidad"}),14==t&&e.encabColumnasExcel.push({label:"Trastorno del Aprendizaje",field:"trastorno"}),15==t&&e.encabColumnasExcel.push({label:"Apoyo Académico Especial",field:"apoyo"}),16==t&&e.encabColumnasExcel.push({label:"Victima del Conflicto",field:"victima"}),17==t&&e.encabColumnasExcel.push({label:"Etnia",field:"etnia"}),18==t&&e.encabColumnasExcel.push({label:"Eps",field:"eps"}),19==t&&e.encabColumnasExcel.push({label:"Enfermedades",field:"enfermedades"}),20==t&&(e.encabColumnasExcel.push({label:"Dir  Estudiante",field:"dire"}),e.encabColumnasExcel.push({label:"Mun  Estudiante",field:"munidire"}),e.encabColumnasExcel.push({label:"Barrio  Estudiante",field:"barrio"}),e.encabColumnasExcel.push({label:"Tel1  Estudiante",field:"tel1e"}),e.encabColumnasExcel.push({label:"Tel2  Estudiante",field:"tel2e"})),21==t&&e.encabColumnasExcel.push({label:"Observaciones",field:"obs_matricula"}),22==t&&e.encabColumnasExcel.push({label:"Ruta",field:"ruta"}),23==t&&(e.encabColumnasExcel.push({label:"Acudiente",field:"acudiente"}),e.encabColumnasExcel.push({label:"Dir Acudiente",field:"direccion"}),e.encabColumnasExcel.push({label:"Tel1 Acudiente",field:"telefono1"}),e.encabColumnasExcel.push({label:"Tel2 Acudiente",field:"telefono2"}),e.encabColumnasExcel.push({label:"Correo Acudiente",field:"correo"}),e.encabColumnasExcel.push({label:"Parentesco",field:"parentesco"})),24==t&&e.encabColumnasExcel.push({label:"Municipio Nacimiento",field:"muninace"})})),this.consultaListaGrado()}},b=m,p=a("2877"),f=Object(p["a"])(b,d,u,!1,null,null,null),h=f.exports,C=a("e00c"),v={name:"listadoscurso",components:{VueGoodTable:c["a"],ConsultaListaGrado:h,ConsultaListaCurso:C["a"]},data:function(){return{idSede:null,idCurso:null,comboSedes:[],listaCursos:[],listaGrados:[],listaEstudiantes:[],encabColumnas:[{label:"Curso",field:"nomenclatura"},{label:"Jornada",field:"jornada",sortable:!1},{label:"",field:"id",sortable:!1}],encabColumnasGrados:[{label:"Grado",field:"grado"},{label:"Nivel",field:"nivel",sortable:!1},{label:"",field:"id",sortable:!1}],cursosSeleccionados:[],gradosSeleccionados:[],camposSeleccionados:[],campos:[{value:0,text:"Apellidos y Nombres",disabled:!0},{value:1,text:"Documento"},{value:2,text:"Fecha de Nacimiento"},{value:3,text:"Edad"},{value:4,text:"Genero"},{value:5,text:"Repitencia"},{value:6,text:"Estudiante Nuevo"},{value:7,text:"Nacionalidad"},{value:8,text:"Estrato Socioeconómico"},{value:9,text:"Grupo Sanguineo - Rh"},{value:10,text:"Sisben"},{value:11,text:"Especialidad"},{value:12,text:"Discapacidad"},{value:13,text:"Capacidad Excepcional"},{value:14,text:"Trastorno del Aprendizaje"},{value:15,text:"Apoyo Académico Especial"},{value:16,text:"Victima del Conflicto"},{value:17,text:"Etnia"},{value:18,text:"Eps"},{value:19,text:"Enfermedades/Tratamiento"},{value:20,text:"Ubicación (Dirección,Municipio,Barrio,Teléfono)"},{value:21,text:"Observaciones Matricula"},{value:22,text:"Ruta"},{value:23,text:"Acudiente (Nombre,Dirección,Teléfono,Correo)"},{value:24,text:"Municipio de Nacimiento"}],datosCurso:[],datosGrado:[],comboNumeroColumnas:[{value:1,text:"1 columna"},{value:2,text:"2 columnas"},{value:3,text:"3 columnas"},{value:4,text:"4 columnas"},{value:5,text:"5 columnas"},{value:6,text:"6 columnas"},{value:7,text:"7 columnas"},{value:8,text:"8 columnas"},{value:9,text:"9 columnas"},{value:10,text:"10 columnas"},{value:11,text:"11 columnas"},{value:12,text:"12 columnas"},{value:13,text:"13 columnas"},{value:14,text:"14 columnas"},{value:15,text:"15 columnas"}],numeroColumnas:1,orientacion:1,comboOrientacion:[{value:1,text:"Vertical"},{value:2,text:"Horizontal"}],tema:"",objetivo:"",director:!0,idTipo:null,comboTipos:[{value:1,text:"LISTAS POR CURSO"},{value:2,text:"LISTAS POR GRADO"}],retirados:!1}},methods:{consultaListaGrado:function(e){this.datosGrado=e,this.datosGrado.campos=this.camposSeleccionados,this.datosGrado.retirados=this.retirados,this.$refs["modalConsultaListaGrado"].show()},datosRecibidosConsultaGrado:function(e){this.$refs["modalConsultaListaGrado"].hide()},consultaListaCurso:function(e){this.datosCurso=e,this.datosCurso.campos=this.camposSeleccionados,this.datosCurso.retirados=this.retirados,this.$refs["modalConsultaListaCurso"].show()},datosRecibidosConsulta:function(e){this.$refs["modalConsultaListaCurso"].hide()},imprimirListas:function(){var e=this;this.cursosSeleccionados=[],this.$refs.cursitos.selectedRows.forEach((function(t){e.cursosSeleccionados.push({id:t.id,cu:t.nomenclatura,se:t.sede,jo:t.jornada,di:t.docente})}));var t="?datos="+JSON.stringify(this.cursosSeleccionados)+"&ie="+this.$store.state.nombreInstitucion+"&vigencia="+this.$store.state.aLectivo+"&campos="+JSON.stringify(this.camposSeleccionados)+"&director="+this.director+"&escudo="+this.$store.state.escudoInstitucion+"&numeroColumnas="+this.numeroColumnas+"&orientacion="+this.orientacion+"&tema="+this.tema+"&objetivo="+this.objetivo+"&retirados="+this.retirados,a=encodeURI(t);return window.open("https://siedutunja.gov.co/php/listas/listas-01.php"+a,"_blank"),!0},imprimirListasGrados:function(){var e=this;this.gradosSeleccionados=[],this.$refs.graditos.selectedRows.forEach((function(t){e.gradosSeleccionados.push({id:t.id,gr:t.grado,se:t.sede})}));var t="?datos="+JSON.stringify(this.gradosSeleccionados)+"&ie="+this.$store.state.nombreInstitucion+"&vigencia="+this.$store.state.aLectivo+"&campos="+JSON.stringify(this.camposSeleccionados)+"&director="+this.director+"&escudo="+this.$store.state.escudoInstitucion+"&numeroColumnas="+this.numeroColumnas+"&orientacion="+this.orientacion+"&tema="+this.tema+"&objetivo="+this.objetivo+"&retirados="+this.retirados,a=encodeURI(t);return window.open("https://siedutunja.gov.co/php/listas/listas-03.php"+a,"_blank"),!0},ocuparlistaCursosSede:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:1==e.idTipo?(e.listaCursos=[],e.$store.state.datosCursos.forEach((function(t){t.id_sede==e.idSede&&e.listaCursos.push(t)}))):(e.listaGrados=[],e.$store.state.datosGrados.forEach((function(t){t.id_sede==e.idSede&&e.listaGrados.push(t)})));case 1:case"end":return t.stop()}}),t)})))()},ocuparComboSedes:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.comboSedes=[],e.$store.state.datosSedes.forEach((function(t){e.comboSedes.push({value:t.id,text:t.sede.toUpperCase()})}));case 2:case"end":return t.stop()}}),t)})))()},mensajeEmergente:function(e,t,a){this.$bvToast.toast(a,{title:t,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},computed:{},beforeMount:function(){this.ocuparComboSedes()}},x=v,E=Object(p["a"])(x,o,s,!1,null,null,null);t["default"]=E.exports}}]);
//# sourceMappingURL=chunk-2d0cc2c3.b0f1b17d.js.map