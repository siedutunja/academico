(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2107f8"],{b7c0:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{lg:"12"}},[a("b-card",{scopedSlots:t._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),t._v(" CAMBIAR DOCUMENTO DEL ESTUDIANTE")],1)]},proxy:!0},{key:"footer",fn:function(){return[a("em",[t._v("Actualice el número de documento del estudiante.")])]},proxy:!0}])},[a("b-card-text",[a("b-row",[a("b-col",{attrs:{lg:"6"}},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:t._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"person","aria-hidden":"true"}}),t._v(" Datos del Estudiante")],1)]},proxy:!0},{key:"footer",fn:function(){return[a("b-table-simple",{attrs:{striped:"",hover:"",responsive:"",bordered:"",fixed:""}},[a("b-tbody",[a("b-tr",[a("b-th",[t._v("Sede")]),a("b-td",[t._v(t._s(t.datosFichaE.sede))])],1),a("b-tr",[a("b-th",[t._v("Grado")]),a("b-td",[t._v(t._s(t.datosFichaE.grado))])],1),a("b-tr",[a("b-th",[t._v("Curso")]),a("b-td",[t._v(t._s(t.datosFichaE.nomenclatura))])],1),a("b-tr",[a("b-th",[t._v("Número Documento")]),a("b-td",[t._v(t._s(t.datosFichaE.documento))])],1),a("b-tr",[a("b-th",[t._v("Tipo Documento")]),a("b-td",[t._v(t._s(t.datosFichaE.tipodocumento))])],1),a("b-tr",[a("b-th",[t._v("Expedición")]),a("b-td",[t._v(t._s(null!=t.datosFichaE.municipioDoc?t.datosFichaE.municipioDoc.toUpperCase():"-"))])],1),a("b-tr",[a("b-th",[t._v("Fecha Nace")]),a("b-td",[t._v(t._s(null!=t.datosFichaE.fecha_nacimiento?t.datosFichaE.fecha_nacimiento.substr(0,10):"-"))])],1),a("b-tr",[a("b-th",[t._v("Nacionalidad")]),a("b-td",[t._v(t._s(t.datosFichaE.pais))])],1),a("b-tr",[a("b-th",[t._v("Género")]),a("b-td",[t._v(t._s(t.datosFichaE.genero))])],1)],1)],1)]},proxy:!0}])},[a("b-card-text",[a("b-row",{staticClass:"text-center"},[a("b-col",{attrs:{lg:"12"}},[a("img",{attrs:{src:t.datosFichaE.foto,id:"photoA",alt:"photo",width:"30%"}})]),a("b-col",{staticClass:"mt-3",attrs:{lg:"12"}},["RETIRADO"==t.datosFichaE.estado?a("div",[a("h4",{staticClass:"text-danger"},[t._v(t._s(t.datosFichaE.estudiante))]),a("h5",{staticClass:"text-danger"},[t._v(t._s(t.datosFichaE.estado))])]):a("div",[a("h4",{staticClass:"text-success"},[t._v(t._s(t.datosFichaE.estudiante))]),a("h5",{staticClass:"text-success"},[t._v(t._s(t.datosFichaE.estado))])])])],1)],1)],1)],1)],1)],1),a("b-col",{attrs:{lg:"6"}},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:t._u([{key:"header",fn:function(){return[a("h5",{staticClass:"mb-0"},[a("b-icon",{attrs:{icon:"filter-square","aria-hidden":"true"}}),t._v(" Cambio de Número de Documento")],1)]},proxy:!0}])},[a("b-card-text",[a("b-row",[a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Número de Documento Actual","label-for":"texto"}},[a("b-form-input",{ref:"texto",attrs:{id:"texto",disabled:""},model:{value:t.datosFichaE.documento,callback:function(e){t.$set(t.datosFichaE,"documento","string"===typeof e?e.trim():e)},expression:"datosFichaE.documento"}})],1)],1)],1),a("b-row",[a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Nuevo Número de Documento*","label-for":"texto"}},[a("b-form-input",{ref:"texto",attrs:{id:"texto",state:t.validateStateT("documento"),"aria-describedby":"feedTextoB",autocomplete:"off",maxlength:"50",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarEstudiante()}},model:{value:t.$v.datosNuevoDocumento.documento.$model,callback:function(e){t.$set(t.$v.datosNuevoDocumento.documento,"$model","string"===typeof e?e.trim():e)},expression:"$v.datosNuevoDocumento.documento.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedTexto"}},[t._v("Campo requerido.")])],1)],1)],1),a("b-row",[a("b-col",{attrs:{lg:"6"}},[a("b-form-group",{staticClass:"etiqueta",attrs:{label:"Tipo Documento*","label-for":"tipoDoc"}},[a("b-form-select",{ref:"tipoDoc",attrs:{id:"tipoDoc",options:t.comboTiposDoc,state:t.validateStateT("id_tipo_documento"),"aria-describedby":"feedTipoDoc"},model:{value:t.$v.datosNuevoDocumento.id_tipo_documento.$model,callback:function(e){t.$set(t.$v.datosNuevoDocumento.id_tipo_documento,"$model",e)},expression:"$v.datosNuevoDocumento.id_tipo_documento.$model"}}),a("b-form-invalid-feedback",{attrs:{id:"feedTipoDoc"}},[t._v("Campo requerido.")])],1)],1)],1),a("b-row",[a("b-col",{attrs:{lg:"4"}},[a("br"),a("b-button",{staticClass:"small mt-1",attrs:{variant:"primary"},on:{click:function(e){return t.buscarEstudiante()}}},[t._v("Validar y Actualizar")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},r=[],n=a("1da1"),s=(a("159b"),a("96cf"),a("bc3a")),i=a.n(s),c=a("9c40"),d=a("1dce"),u=a("b5ae"),l={name:"cambiardocumento",mixins:[d["validationMixin"]],components:{},data:function(){return{idMatricula:null,datosFichaE:{},datosNuevoDocumento:{idEstudiante:null,documento:null,id_tipo_documento:null},comboTiposDoc:[]}},validations:{datosNuevoDocumento:{documento:{required:u["required"],minLength:Object(u["minLength"])(6)},id_tipo_documento:{required:u["required"]}}},methods:{actualizarDocumento:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.datosNuevoDocumento.idEstudiante=t.datosFichaE.idEstudiante,e.next=3,i.a.put(c["d"]+"academico/estudiante/documento",JSON.stringify(t.datosNuevoDocumento),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){e.data.error?t.mensajeEmergente("danger",c["h"],e.data.mensaje+" - Actualizar Documento Estudiante"):t.$router.push("/")})).catch((function(e){t.mensajeEmergente("danger",c["h"],"Algo salio mal y no se pudo realizar: Actualizar Documento Estudiante. Intente más tarde. "+e)}));case 3:case"end":return e.stop()}}),e)})))()},validarActualizarDocumento:function(){var t=this,e="Actualizar Documento del Estudiante",a="¿Esta seguro de actualizar el documento del estudiante?";return this.$bvModal.msgBoxConfirm(a,{headerBgVariant:"primary",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:e,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+e,cancelVariant:"",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(e){e&&t.actualizarDocumento()})),!0},buscarEstudiante:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$v.datosNuevoDocumento.$touch(),!t.$v.datosNuevoDocumento.$anyError){e.next=7;break}return t.mensajeEmergente("danger",c["h"],"Algunos campos están incompletos."),t.$refs.texto.focus(),e.abrupt("return",!1);case 7:return e.next=9,i.a.get(c["d"]+"academico/buscarestudiante/documento",{params:{texto:t.datosNuevoDocumento.documento}}).then((function(e){e.data.error?t.mensajeEmergente("danger",c["h"],e.data.mensaje+" - Intente realizar una nueva consulta"):0==e.data.datos?t.validarActualizarDocumento():t.mensajeEmergente("info",c["h"],"El número de documento ya se encuentra registrado en Siedutunja.")})).catch((function(e){t.mensajeEmergente("danger",c["h"],"Algo salio mal y no se pudo realizar: Buscar estudiante. Intente más tarde. "+e)}));case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})))()},consultaFichaMatricula:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.datosFichaE={},e.next=3,i.a.get(c["d"]+"academico/matriculas/consultacarpetamatricula",{params:{idMatricula:t.idMatricula}}).then((function(e){e.data.error?t.mensajeEmergente("danger",c["h"],e.data.mensaje+" - Consulta Carpeta Matricula"):0!=e.data.datos?(t.datosFichaE=e.data.datos.estudiante,null!=t.datosFichaE.foto&&""!=t.datosFichaE.foto||(t.datosFichaE.foto=c["a"])):t.mensajeEmergente("danger",c["h"],"No se encontró la Carpeta del Estudiante")})).catch((function(e){t.mensajeEmergente("danger",c["h"],"Algo salio mal y no se pudo realizar: Consulta Carpeta Matricula. Intente más tarde."+e)}));case 3:case"end":return e.stop()}}),e)})))()},ocuparCombos:function(){var t=this;this.comboTiposDoc=[],this.$store.state.datosTablas.tiposdocumentos.forEach((function(e){t.comboTiposDoc.push({value:e.id,text:e.tipodocumento.toUpperCase()})}))},validateStateT:function(t){var e=this.$v.datosNuevoDocumento[t],a=e.$dirty,o=e.$error;return a?!o:null},mensajeEmergente:function(t,e,a){this.$bvToast.toast(a,{title:e,variant:t,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){1==this.$store.state.idRol||12==this.$store.state.idRol?(this.idMatricula=this.$store.state.idMatricula,this.consultaFichaMatricula(),this.ocuparCombos()):this.$router.push("/restringida")}},m=l,b=a("2877"),h=Object(b["a"])(m,o,r,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d2107f8.7da15a21.js.map