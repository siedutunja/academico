(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1b46"],{"7c26":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-row",{staticClass:"mt-2"},[s("b-col",{attrs:{lg:"12"}},[s("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[s("h5",{staticClass:"mb-0"},[s("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" OBSERVADORES POR CURSO")],1)]},proxy:!0},{key:"footer",fn:function(){return[s("em",[e._v("Seleccione el curso donde se encuentra el estudiante y consulte el observador del estudiante haciendo clic en la lupa.")])]},proxy:!0}])},[s("b-card-text",[s("b-row",[s("b-col",{attrs:{lg:"6"}},[s("b-form-group",{staticClass:"etiqueta",attrs:{label:"Seleccione la Sede:","label-for":"sedes"}},[s("b-form-select",{ref:"sedes",attrs:{id:"sedes",options:e.comboSedes},on:{change:function(t){e.idCurso=null,e.ocuparComboCursosSede()}},model:{value:e.idSede,callback:function(t){e.idSede=t},expression:"idSede"}})],1)],1),s("b-col",{attrs:{lg:"6"}},[s("b-form-group",{staticClass:"etiqueta",attrs:{label:"Seleccione el Curso:","label-for":"cursos"}},[s("b-form-select",{ref:"cursos",attrs:{id:"cursos",options:e.comboCursosSede,disabled:null==e.idSede},on:{change:function(t){return e.consultaListaCurso()}},model:{value:e.idCurso,callback:function(t){e.idCurso=t},expression:"idCurso"}})],1)],1)],1),s("b-row",[s("b-col",{attrs:{lg:"12"}},[s("hr")])],1),null!=e.idCurso?s("div",[s("vue-good-table",{attrs:{columns:e.encabColumnas,rows:e.listaEstudiantesCurso,styleClass:"vgt-table condensed bordered striped","line-numbers":!0},scopedSlots:e._u([{key:"table-row",fn:function(t){return["idEstudiante"==t.column.field?s("span",[s("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},attrs:{title:"Consultar Observador"},on:{click:function(s){return e.consultarObservador(t.row)}}},[s("CIcon",{attrs:{name:"cilZoom"}})],1)]):e._e()]}}],null,!1,1619097401)},[s("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[s("h5",{staticClass:"text-danger ml-5"},[e._v("No existen Estudiantes matriculados en el Curso.")])])])],1):e._e()],1)],1)],1)],1),s("b-modal",{ref:"modalCrearEditarFicha",attrs:{size:"xl",scrollable:"","hide-footer":"",title:"Observador del Estudiante","ok-only":""}},[s("div",{staticClass:"mx-3"},[s("div",[s("Observador",{attrs:{datosObservador:e.datosObservador},on:{retorno:e.datosRecibidosObservador}})],1)])])],1)},o=[],r=s("1da1"),n=(s("96cf"),s("159b"),s("bc3a")),d=s.n(n),i=s("9c40"),l=(s("dac4"),s("f617")),u=s("5e0a"),c={name:"listaobservadores",components:{VueGoodTable:l["a"],Observador:u["default"]},data:function(){return{idSede:null,comboSedes:[],idCurso:null,comboCursosSede:[],listaEstudiantesCurso:[],encabColumnas:[{label:"Apellidos y Nombres del Estudiante",field:"estudiante",tdClass:this.tdClassFuncE},{label:"Documento",field:"documento",tdClass:this.tdClassFuncE},{label:"Gen",field:"id_genero",tdClass:this.tdClassFuncE},{label:"FechaNace",field:"fechaNace",tdClass:this.tdClassFuncE},{label:"Edad",field:"edad",tdClass:this.tdClassFuncE},{label:"Anotaciones",field:"numObservaciones",tdClass:this.tdClassFuncE},{label:"Estado",field:"estado",tdClass:this.tdClassFuncE},{label:"",field:"idEstudiante",sortable:!1}],datosObservador:{idEstudiante:null,idMatricula:null}}},methods:{consultarObservador:function(e){this.$store.commit("set",["idEstudiante",e.idEstudiante]),this.$store.commit("set",["idMatricula",e.idMatricula]),this.$refs["modalCrearEditarFicha"].show()},consultaListaCurso:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(i["d"]+"observador/listacurso",{params:{idCurso:e.idCurso,vigencia:e.$store.state.aLectivo}}).then((function(t){t.data.error?e.mensajeEmergente("danger",i["h"],t.data.mensaje+" - Consulta Lista Curso"):0!=t.data.datos&&(e.listaEstudiantesCurso=[],t.data.datos.forEach((function(t){t.edad=e.calcularEdad(t.fechaNace)+" Años"})),e.listaEstudiantesCurso=t.data.datos)})).catch((function(t){e.mensajeEmergente("danger",i["h"],"Algo salio mal y no se pudo realizar: Consulta Lista Curso. Intente más tarde."+t)}));case 2:case"end":return t.stop()}}),t)})))()},calcularEdad:function(e){var t=new Date,s=new Date(e),a=t.getFullYear()-s.getFullYear(),o=t.getMonth()-s.getMonth();return(o<0||0===o&&t.getDate()<s.getDate())&&a--,a},ocuparComboCursosSede:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.comboCursosSede=[],e.$store.state.datosCursos.forEach((function(t){t.id_sede==e.idSede&&e.comboCursosSede.push({value:t.id,text:t.nomenclatura.toUpperCase()})}));case 2:case"end":return t.stop()}}),t)})))()},datosRecibidosObservador:function(){this.$refs["modalCrearEditarFicha"].hide()},ocuparComboSedes:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.comboSedes=[],e.$store.state.datosSedes.forEach((function(t){e.comboSedes.push({value:t.id,text:t.sede.toUpperCase()})}));case 2:case"end":return t.stop()}}),t)})))()},tdClassFuncE:function(e){if(2==e.id_estado_actual)return"text-danger"},mensajeEmergente:function(e,t,s){this.$bvToast.toast(s,{title:t,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){this.ocuparComboSedes()}},b=c,f=s("2877"),m=Object(f["a"])(b,a,o,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0e1b46.2c1b8e9c.js.map