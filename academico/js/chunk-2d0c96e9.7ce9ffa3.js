(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c96e9"],{"58b2":function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("b-row",{staticClass:"mt-2"},[e("b-col",{attrs:{lg:"12"}},[e("b-card",{scopedSlots:a._u([{key:"header",fn:function(){return[e("h5",{staticClass:"mb-0"},[e("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),a._v(" ASIGNATURAS DEL PLAN EDUCATIVO INSTITUCIONAL")],1)]},proxy:!0},{key:"footer",fn:function(){return[e("em",[a._v("Consulte o actualice los datos de una asignatura haciendo clic en el lapiz.")])]},proxy:!0}])},[e("b-card-text",[e("b-row",[e("b-col",{attrs:{lg:"6"}},[e("b-form-group",{staticClass:"etiqueta",attrs:{label:"Seleccione el Área:","label-for":"areas"}},[e("b-form-select",{ref:"areas",attrs:{id:"areas",options:a.comboAreas},on:{change:a.verAsignaturasArea},model:{value:a.idArea,callback:function(t){a.idArea=t},expression:"idArea"}})],1)],1)],1),null!=a.idArea?e("b-row",{staticClass:"mt-0"},[e("b-col",{attrs:{lg:"12"}},[e("hr")]),e("b-col",{attrs:{lg:"12"}},[e("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:a._u([{key:"header",fn:function(){return[1==a.$store.state.idRol||12==a.$store.state.idRol?e("b-button",{staticClass:"small float-right",attrs:{variant:"dark"},on:{click:a.nuevaAsignatura}},[a._v("Nueva Asignatura")]):a._e(),e("h5",{staticClass:"mb-0"},[e("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),a._v(" Lista de Asignaturas")],1)]},proxy:!0}],null,!1,1698071493)},[e("b-card-text",[e("b-row",[e("b-col",{attrs:{lg:"12"}},[e("vue-good-table",{attrs:{columns:a.encabColumnas,rows:a.listaAsignaturas,styleClass:"vgt-table condensed bordered striped ","line-numbers":!0},scopedSlots:a._u([{key:"table-row",fn:function(t){return["id"==t.column.field?e("span",[e("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},attrs:{title:"Actualizar Datos de la Asignatura"},on:{click:function(e){return a.seleccionarAsignatura(t.row)}}},[e("CIcon",{attrs:{name:"cilPencil"}})],1)]):a._e()]}}],null,!1,2834438844)},[e("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[e("h5",{staticClass:"text-danger ml-5"},[a._v("No existen asignaturas creadas")])])])],1)],1)],1)],1)],1)],1):a._e()],1)],1)],1)],1),e("b-modal",{ref:"modalCrearEditarAsignatura",attrs:{size:"xl",scrollable:"","hide-footer":"",title:a.datosAsignatura.editarAsignatura?"Editar Datos de la Asignatura":"Nueva Asignatura","ok-only":""}},[e("div",{staticClass:"mx-3"},[e("div",[e("FichaAsignatura",{attrs:{datosAsignatura:a.datosAsignatura},on:{retorno:a.datosRecibidosAsignatura}})],1)])])],1)},s=[],n=e("1da1"),i=(e("159b"),e("96cf"),e("bc3a")),o=e.n(i),u=e("9c40"),l=(e("dac4"),e("f617")),d=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("b-row",{staticClass:"mt-2"},[e("b-col",{attrs:{lg:"12"}},[e("b-card",{scopedSlots:a._u([{key:"header",fn:function(){return[e("h5",{staticClass:"mb-0"},[e("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),a._v(" DATOS DE LA ASIGNATURA")],1)]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"float-right text-medium-emphasis text-info"},[a._v("* Campo requerido")]),e("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"primary"},on:{click:a.validarDatosFormulario}},[a.infoAsignatura.editarAsignatura?e("div",[a._v("Actualizar Datos de la Asignatura")]):e("div",[a._v("Guardar la Nueva Asignatura")])]),e("b-button",{staticClass:"small mx-1 mt-2",attrs:{variant:"secondary"},on:{click:a.cancelarFormulario}},[a._v("Cancelar")])]},proxy:!0}])},[e("b-card-text",[e("b-row",[e("b-col",{attrs:{lg:"9",md:"12"}},[e("b-form-group",{staticClass:"etiqueta",attrs:{label:"Asignatura*","label-for":"asignatura"}},[e("b-form-input",{ref:"asignatura",attrs:{id:"asignatura",state:a.validateStateA("asignatura"),"aria-describedby":"feedAsig",autocomplete:"off",maxlength:"100"},model:{value:a.$v.infoAsignatura.asignatura.$model,callback:function(t){a.$set(a.$v.infoAsignatura.asignatura,"$model","string"===typeof t?t.trim():t)},expression:"$v.infoAsignatura.asignatura.$model"}}),e("b-form-invalid-feedback",{attrs:{id:"feedAsig"}},[a._v("Campo requerido.")])],1)],1),e("b-col",{attrs:{lg:"3",md:"12"}},[e("b-form-group",{staticClass:"etiqueta",attrs:{label:"Nemotécnico*","label-for":"nemo"}},[e("b-form-input",{ref:"nemo",attrs:{id:"nemo",state:a.validateStateA("nemo"),"aria-describedby":"feedNemo",autocomplete:"off",maxlength:"5"},model:{value:a.$v.infoAsignatura.nemo.$model,callback:function(t){a.$set(a.$v.infoAsignatura.nemo,"$model","string"===typeof t?t.trim():t)},expression:"$v.infoAsignatura.nemo.$model"}}),e("b-form-invalid-feedback",{attrs:{id:"feedNemo"}},[a._v("Campo requerido.")])],1)],1),e("b-col",{attrs:{lg:"9",md:"12"}},[e("b-form-group",{staticClass:"etiqueta",attrs:{label:"Area*","label-for":"area"}},[e("b-form-select",{ref:"area",attrs:{id:"area",options:a.comboAreas,state:a.validateStateA("id_area"),"aria-describedby":"feedArea",disabled:!a.infoAsignatura.editarAsignatura},model:{value:a.$v.infoAsignatura.id_area.$model,callback:function(t){a.$set(a.$v.infoAsignatura.id_area,"$model",t)},expression:"$v.infoAsignatura.id_area.$model"}}),e("b-form-invalid-feedback",{attrs:{id:"feedArea"}},[a._v("Campo requerido.")])],1)],1),e("b-col",{attrs:{lg:"3",md:"6"}},[e("b-form-group",{staticClass:"etiqueta",attrs:{label:"Estado de la Asignatura*","label-for":"estado"}},[e("b-form-select",{ref:"estado",attrs:{id:"estado",options:a.comboEstados,state:a.validateStateA("estado"),"aria-describedby":"feedEstado"},model:{value:a.$v.infoAsignatura.estado.$model,callback:function(t){a.$set(a.$v.infoAsignatura.estado,"$model",t)},expression:"$v.infoAsignatura.estado.$model"}}),e("b-form-invalid-feedback",{attrs:{id:"feedEstado"}},[a._v("Campo requerido.")])],1)],1)],1)],1)],1)],1)],1)],1)},c=[],g=(e("ac1f"),e("5319"),e("1dce")),m=e("b5ae"),f={name:"fichaasignatura",mixins:[g["validationMixin"]],props:{datosAsignatura:Object},components:{},data:function(){return{infoAsignatura:{id:null,asignatura:null,id_area:null,nemo:null,estado:null,editarAsignatura:!0},comboAreas:[],comboEstados:[]}},validations:{infoAsignatura:{asignatura:{required:m["required"],minLength:Object(m["minLength"])(4)},nemo:{required:m["required"]},id_area:{required:m["required"]},estado:{required:m["required"]}}},methods:{validarDatosFormulario:function(){var a=this;if(this.$v.infoAsignatura.$touch(),this.$v.infoAsignatura.$anyError)return this.mensajeEmergente("danger",u["h"],"Algunos campos están incompletos."),!1;var t=this.infoAsignatura.editarAsignatura?"Actualizar Datos de la Asignatura":"Crear Asignatura",e=this.infoAsignatura.editarAsignatura?"¿Esta seguro de Actualizar los Datos de la Asignatura?":"¿Esta seguro de Crear la Asignatura?";return this.$bvModal.msgBoxConfirm(e,{headerBgVariant:"primary",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:t,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+t,cancelVariant:"",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(t){t&&a.guardarDatosAsignatura()})),!0},guardarDatosAsignatura:function(){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.infoAsignatura.editarAsignatura){t.next=5;break}return t.next=3,o.a.put(u["d"]+"academico/asignaturas",JSON.stringify(a.infoAsignatura),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(t){t.data.error?a.mensajeEmergente("danger",u["h"],t.data.mensaje+" - Actualizar Asignatura"):a.$emit("retorno",2)})).catch((function(t){a.mensajeEmergente("danger",u["h"],"Algo salio mal y no se pudo realizar: Actualizar Asignatura. Intente más tarde. "+t)}));case 3:t.next=7;break;case 5:return t.next=7,o.a.post(u["d"]+"academico/asignaturas",JSON.stringify(a.infoAsignatura),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(t){t.data.error?a.mensajeEmergente("danger",u["h"],t.data.mensaje+" - Crear Asignatura"):a.$emit("retorno",1)})).catch((function(t){a.mensajeEmergente("danger",u["h"],"Algo salio mal y no se pudo realizar: Crear Asignatura. Intente más tarde. "+t)}));case 7:a.cargarDatosAsignaturas();case 8:case"end":return t.stop()}}),t)})))()},cargarDatosAsignaturas:function(){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.get(u["d"]+"academico/cargueasignaturas",{params:{idInstitucion:a.$store.state.idInstitucion,vigencia:a.$store.state.aLectivo}}).then((function(t){t.data.error?(alert(t.data.mensaje+" - Consulta datos Asignaturas"),location.replace(u["c"])):0!=t.data.datos?a.$store.commit("set",["datosAsignaturas",t.data.datos]):a.$store.commit("set",["datosAsignaturas",[]])})).catch((function(a){alert("Algo salio mal y no se pudo realizar: Consulta datos Asignaturas. Intente más tarde. "+a),location.replace(u["e"])}));case 2:case"end":return t.stop()}}),t)})))()},consultaInfoAsignatura:function(){this.infoAsignatura=this.datosAsignatura},cancelarFormulario:function(){this.$emit("retorno",0)},ocuparCombos:function(){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.comboAreas=[],a.$store.state.datosAreas.forEach((function(t){a.comboAreas.push({value:t.id,text:t.area.toUpperCase()})})),a.comboEstados=[],a.$store.state.datosTablas.estados.forEach((function(t){a.comboEstados.push({value:t.id,text:t.estado.toUpperCase()})}));case 4:case"end":return t.stop()}}),t)})))()},validateStateA:function(a){var t=this.$v.infoAsignatura[a],e=t.$dirty,r=t.$error;return e?!r:null},mensajeEmergente:function(a,t,e){this.$bvToast.toast(e,{title:t,variant:a,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){this.consultaInfoAsignatura(),this.ocuparCombos()}},A=f,b=e("2877"),h=Object(b["a"])(A,d,c,!1,null,null,null),p=h.exports,v={name:"listaasignaturas",components:{VueGoodTable:l["a"],FichaAsignatura:p},data:function(){return{idArea:null,comboAreas:[],listaAsignaturas:[],hayAsignaturas:null,datosAsignatura:{id:null,asignatura:null,id_area:null,nemo:null,estado:null,editarAsignatura:!0},encabColumnas:[{label:"Nombre de Asignatura",field:"asignatura"},{label:"Nemo",field:"nemo",sortable:!1},{label:"Estado",field:"estado",formatFn:this.formatFnE,tdClass:this.tdClassFuncE,sortable:!1},{label:"",field:"id",sortable:!1}]}},methods:{nuevaAsignatura:function(){this.datosAsignatura.id=null,this.datosAsignatura.asignatura=null,this.datosAsignatura.id_area=this.idArea,this.datosAsignatura.nemo=null,this.datosAsignatura.estado=1,this.datosAsignatura.editarAsignatura=!1,this.$refs["modalCrearEditarAsignatura"].show()},seleccionarAsignatura:function(a){this.datosAsignatura.id=a.id,this.datosAsignatura.asignatura=a.asignatura,this.datosAsignatura.id_area=a.id_area,this.datosAsignatura.nemo=a.nemo,this.datosAsignatura.estado=a.estado,this.datosAsignatura.editarAsignatura=!0,this.$refs["modalCrearEditarAsignatura"].show()},datosRecibidosAsignatura:function(a){1==a?this.mensajeEmergente("success",u["h"],"La Asignatura se ha creado correctamente."):2==a&&this.mensajeEmergente("success",u["h"],"Los datos de la Asigntura se han actualizado correctamente."),this.verAsignaturasArea(),this.$refs["modalCrearEditarAsignatura"].hide()},verAsignaturasArea:function(){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.listaAsignaturas=[],a.hayAsignaturas=!1,t.next=4,o.a.get(u["d"]+"academico/asignaturas/area",{params:{idArea:a.idArea}}).then((function(t){t.data.error?a.mensajeEmergente("danger",u["h"],t.data.mensaje+" - Lista asignaturas"):0!=t.data.datos&&(a.listaAsignaturas=t.data.datos,a.hayAsignaturas=!0)})).catch((function(t){a.mensajeEmergente("danger",u["h"],"Algo salio mal y no se pudo realizar: Lista asignaturas. Intente más tarde."+t)}));case 4:case"end":return t.stop()}}),t)})))()},ocuparComboAreas:function(){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.comboAreas=[],a.$store.state.datosAreas.forEach((function(t){a.comboAreas.push({value:t.id,text:t.area.toUpperCase()})}));case 2:case"end":return t.stop()}}),t)})))()},formatFnE:function(a){return 0==a?"INACTIVO":"ACTIVO"},tdClassFuncE:function(a){return 0==a.estado?"text-danger text-left":"text-success text-left"},mensajeEmergente:function(a,t,e){this.$bvToast.toast(e,{title:t,variant:a,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){1==this.$store.state.idRol||12==this.$store.state.idRol?this.ocuparComboAreas():this.$router.push("/restringida")}},C=v,$=Object(b["a"])(C,r,s,!1,null,null,null);t["default"]=$.exports}}]);
//# sourceMappingURL=chunk-2d0c96e9.7ce9ffa3.js.map