(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8f49"],{"56a3":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("b-row",{staticClass:"mt-2"},[t("b-col",{attrs:{lg:"12"}},[t("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[t("h5",{staticClass:"mb-0"},[t("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" ÁREAS DEL PLAN EDUCATIVO INSTITUCIONAL")],1)]},proxy:!0},{key:"footer",fn:function(){return[t("em",[e._v("Consulte o actualice los datos de una área haciendo clic en el lapiz.")])]},proxy:!0}])},[t("b-card-text",[t("b-row",[t("b-col",{attrs:{lg:"12"}},[t("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:e._u([{key:"header",fn:function(){return[e.hayAreas&&1==e.$store.state.idRol?t("b-button",{staticClass:"small float-right",attrs:{variant:"dark"},on:{click:e.nuevaArea}},[e._v("Nueva Área")]):e._e(),1!=e.$store.state.idRol||e.hayAreas?e._e():t("b-button",{staticClass:"small float-right",attrs:{variant:"dark"},on:{click:e.validarCrearAreas}},[e._v("Crear Áreas en Bloque")]),t("h5",{staticClass:"mb-0"},[t("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" Lista de Áreas")],1)]},proxy:!0}])},[t("b-card-text",[t("vue-good-table",{attrs:{columns:e.encabColumnas,rows:e.listaAreas,styleClass:"vgt-table condensed bordered striped","line-numbers":!0},scopedSlots:e._u([{key:"table-row",fn:function(a){return["id"==a.column.field?t("span",[t("span",{staticStyle:{"font-weight":"bold",color:"blue",cursor:"pointer"},attrs:{title:"Consultar/Actualizar Datos del Área"},on:{click:function(t){return e.seleccionarArea(a.row)}}},[t("CIcon",{attrs:{name:"cilPencil"}})],1)]):e._e()]}}])},[t("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[t("h5",{staticClass:"text-danger ml-5"},[e._v("No existen Áreas creadas")])])])],1)],1)],1)],1)],1)],1)],1)],1),t("b-modal",{ref:"modalCrearEditarArea",attrs:{size:"xl",scrollable:"","hide-footer":"",title:e.datosArea.editarArea?"Editar Datos del Área":"Nueva Área","ok-only":""}},[t("div",{staticClass:"mx-3"},[t("div",[t("FichaArea",{attrs:{datosArea:e.datosArea},on:{retorno:e.datosRecibidosArea}})],1)])])],1)},o=[],n=t("1da1"),i=(t("96cf"),t("bc3a")),s=t.n(i),l=t("9c40"),d=(t("dac4"),t("f617")),c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("b-row",{staticClass:"mt-2"},[t("b-col",{attrs:{lg:"12"}},[t("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[t("h5",{staticClass:"mb-0"},[t("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),e._v(" DATOS DEL ÁREA")],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"float-right text-medium-emphasis text-info"},[e._v("* Campo requerido")]),t("b-button",{staticClass:"small",attrs:{variant:"primary"},on:{click:e.validarDatosFormulario}},[e.infoArea.editarArea?t("div",[e._v("Actualizar Datos del Área")]):t("div",[e._v("Crear Área")])]),t("b-button",{staticClass:"small ml-3",attrs:{variant:"secondary"},on:{click:e.cancelarFormulario}},[e._v("Cancelar")])]},proxy:!0}])},[t("b-card-text",[t("b-row",[t("b-col",{attrs:{lg:"12",md:"12"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Descripción del area*","label-for":"area"}},[t("b-form-input",{ref:"area",attrs:{id:"area",state:e.validateStateA("area"),"aria-describedby":"feedArea",autocomplete:"off",maxlength:"100"},model:{value:e.$v.infoArea.area.$model,callback:function(a){e.$set(e.$v.infoArea.area,"$model","string"===typeof a?a.trim():a)},expression:"$v.infoArea.area.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedArea"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Nemotécnico*","label-for":"nemo"}},[t("b-form-input",{ref:"nemo",attrs:{id:"nemo",state:e.validateStateA("nemo"),"aria-describedby":"feedNemo",autocomplete:"off",maxlength:"5"},model:{value:e.$v.infoArea.nemo.$model,callback:function(a){e.$set(e.$v.infoArea.nemo,"$model","string"===typeof a?a.trim():a)},expression:"$v.infoArea.nemo.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedNemo"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3",md:"6"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Orden*","label-for":"orden"}},[t("b-form-input",{ref:"orden",attrs:{id:"orden",state:e.validateStateA("orden"),"aria-describedby":"feedOrden",autocomplete:"off",maxlength:"3",disabled:99==e.infoArea.orden},on:{keydown:e.soloNumeros},model:{value:e.$v.infoArea.orden.$model,callback:function(a){e.$set(e.$v.infoArea.orden,"$model","string"===typeof a?a.trim():a)},expression:"$v.infoArea.orden.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedOrden"}},[e._v("Campo requerido.")])],1)],1),t("b-col",{attrs:{lg:"3"}},[t("b-form-group",{staticClass:"etiqueta",attrs:{label:"Tipo Área:","label-for":"tareas"}},[t("b-form-select",{ref:"tareas",attrs:{id:"tareas",options:e.comboTiposArea,state:e.validateStateA("id_tipo"),"aria-describedby":"feedTipo"},model:{value:e.$v.infoArea.id_tipo.$model,callback:function(a){e.$set(e.$v.infoArea.id_tipo,"$model",a)},expression:"$v.infoArea.id_tipo.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"feedTipo"}},[e._v("Campo requerido.")])],1)],1)],1)],1)],1)],1)],1)],1)},u=[],m=(t("ac1f"),t("5319"),t("1dce")),f=t("b5ae"),h={name:"fichaarea",mixins:[m["validationMixin"]],props:{datosArea:Object},components:{},data:function(){return{infoArea:{id:null,area:null,id_institucion:null,vigencia:null,nemo:null,orden:null,id_tipo:null,editarArea:null},comboTiposArea:[{value:"1",text:"ACADÉMICA"},{value:"2",text:"TÉCNICA"}]}},validations:{infoArea:{area:{required:f["required"],minLength:Object(f["minLength"])(4)},nemo:{required:f["required"]},orden:{required:f["required"]},id_tipo:{required:f["required"]}}},methods:{validarDatosFormulario:function(){var e=this;if(this.$v.infoArea.$touch(),this.$v.infoArea.$anyError)return this.mensajeEmergente("danger",l["h"],"Algunos campos están incompletos."),!1;var a=this.infoArea.editarArea?"Actualizar Datos del Área":"Crear Área",t=this.infoArea.editarArea?"¿Esta seguro de actualizar los datos del Área?":"¿Esta seguro de crear el Área?";return this.$bvModal.msgBoxConfirm(t,{headerBgVariant:"primary",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:a,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+a,cancelVariant:"",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(a){a&&e.guardarArea()})),!0},guardarArea:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.infoArea.area=e.infoArea.area.toUpperCase(),e.infoArea.nemo=e.infoArea.nemo.toUpperCase(),!e.infoArea.editarArea){a.next=7;break}return a.next=5,s.a.put(l["d"]+"academico/areas",JSON.stringify(e.infoArea),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(a){a.data.error?e.mensajeEmergente("danger",l["h"],a.data.mensaje+" - Actualizar Area"):e.$emit("retorno",2)})).catch((function(a){e.mensajeEmergente("danger",l["h"],"Algo salio mal y no se pudo realizar: Actualizar Area. Intente más tarde. "+a)}));case 5:a.next=9;break;case 7:return a.next=9,s.a.post(l["d"]+"academico/areas",JSON.stringify(e.infoArea),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(a){a.data.error?e.mensajeEmergente("danger",l["h"],a.data.mensaje+" - Crear Area"):e.$emit("retorno",1)})).catch((function(a){e.mensajeEmergente("danger",l["h"],"Algo salio mal y no se pudo realizar: Crear Area. Intente más tarde. "+a)}));case 9:e.cargarDatosAreas();case 10:case"end":return a.stop()}}),a)})))()},cargarDatosAreas:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.a.get(l["d"]+"academico/cargueareas",{params:{idInstitucion:e.$store.state.idInstitucion,vigencia:e.$store.state.aLectivo}}).then((function(a){a.data.error?(alert(a.data.mensaje+" - Consulta datos Areas"),location.replace(l["c"])):0!=a.data.datos?e.$store.commit("set",["datosAreas",a.data.datos]):e.$store.commit("set",["datosAreas",[]])})).catch((function(e){alert("Algo salio mal y no se pudo realizar: Consulta datos Areas. Intente más tarde. "+e),location.replace(l["e"])}));case 2:case"end":return a.stop()}}),a)})))()},consultaInfoArea:function(){this.infoArea=this.datosArea},cancelarFormulario:function(){this.$emit("retorno",0)},soloNumeros:function(e){var a=window.Event?e.which:e.keyCode;a>=48&&a<=57||a>=96&&a<=105||8==a||9==a||37==a||39==a||e.preventDefault()},validateStateA:function(e){var a=this.$v.infoArea[e],t=a.$dirty,r=a.$error;return t?!r:null},mensajeEmergente:function(e,a,t){this.$bvToast.toast(t,{title:a,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){this.consultaInfoArea()}},A=h,b=t("2877"),p=Object(b["a"])(A,c,u,!1,null,null,null),v=p.exports,g={name:"listaareas",components:{VueGoodTable:d["a"],FichaArea:v},data:function(){return{listaAreas:[],hayAreas:null,datosArea:{id:null,area:null,id_institucion:null,vigencia:null,nemo:null,orden:null,id_tipo:null,editarArea:!0},encabColumnas:[{label:"Area",field:"area"},{label:"Vigencia",field:"vigencia",sortable:!1},{label:"Nemo",field:"nemo",sortable:!1},{label:"Orden",field:"orden",sortable:!1},{label:"Tipo",field:"id_tipo",formatFn:this.formatFn,sortable:!1},{label:"",field:"id",sortable:!1}]}},methods:{validarCrearAreas:function(){var e=this,a="Crear Áreas",t="¿Esta seguro de crear las Áreas para la Institución Educativa?";this.$bvModal.msgBoxConfirm(t,{headerBgVariant:"primary",headerTextVariant:"light",bodyBgVariant:"light",bodyBgClass:"text-center",title:a,size:"",buttonSize:"sm",okVariant:"primary",okTitle:"Si, "+a,cancelVariant:"",cancelTitle:"Cancelar",footerClass:"p-2",bodyClass:"p-5",hideHeaderClose:!1,centered:!0}).then((function(a){a&&e.crearAreas()}))},crearAreas:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t={},t.idInstitucion=e.$store.state.idInstitucion,t.vigencia=e.$store.state.aLectivo,a.next=5,s.a.post(l["d"]+"academico/areas/bloque",JSON.stringify(t),{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(a){a.data.error?e.mensajeEmergente("danger",l["h"],a.data.mensaje+" - Crear Areas en Bloque"):(e.mensajeEmergente("success",l["h"],"Las Áreas se han creado correctamente."),e.consultarListaAreas())})).catch((function(a){e.mensajeEmergente("danger",l["h"],"Algo salio mal y no se pudo realizar: Crear Areas en Bloque. Intente más tarde. "+a)}));case 5:case"end":return a.stop()}}),a)})))()},nuevaArea:function(){this.datosArea.id=null,this.datosArea.area=null,this.datosArea.id_institucion=this.$store.state.idInstitucion,this.datosArea.vigencia=this.$store.state.aLectivo,this.datosArea.nemo=null,this.datosArea.orden=null,this.datosArea.id_tipo=null,this.datosArea.editarArea=!1,this.$refs["modalCrearEditarArea"].show()},seleccionarArea:function(e){this.datosArea.id=e.id,this.datosArea.area=e.area,this.datosArea.nemo=e.nemo,this.datosArea.orden=e.orden,this.datosArea.id_tipo=e.id_tipo,this.datosArea.editarArea=!0,this.$refs["modalCrearEditarArea"].show()},datosRecibidosArea:function(e){1==e?this.mensajeEmergente("success",l["h"],"El Área se ha creado correctamente."):2==e&&this.mensajeEmergente("success",l["h"],"Los datos del Área se han actualizado correctamente."),this.consultarListaAreas(),this.$refs["modalCrearEditarArea"].hide()},consultarListaAreas:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.hayAreas=!1,a.next=3,s.a.get(l["d"]+"academico/areas",{params:{idInstitucion:e.$store.state.idInstitucion,vigencia:e.$store.state.aLectivo}}).then((function(a){a.data.error?e.mensajeEmergente("danger",l["h"],a.data.mensaje+" - Lista areas"):0!=a.data.datos&&(e.listaAreas=a.data.datos,e.hayAreas=!0)})).catch((function(a){e.mensajeEmergente("danger",l["h"],"Algo salio mal y no se pudo realizar: Lista areas. Intente más tarde."+a)}));case 3:case"end":return a.stop()}}),a)})))()},formatFn:function(e){return 1==e?"ACADÉMICA":"TÉCNICA"},mensajeEmergente:function(e,a,t){this.$bvToast.toast(t,{title:a,variant:e,toaster:"b-toaster-top-center",solid:!0,autoHideDelay:4e3,appendToast:!1})}},beforeMount:function(){1==this.$store.state.idRol||12==this.$store.state.idRol?this.consultarListaAreas():this.$router.push("/restringida")}},C=g,$=Object(b["a"])(C,r,o,!1,null,null,null);a["default"]=$.exports}}]);
//# sourceMappingURL=chunk-2d0c8f49.7bc61740.js.map